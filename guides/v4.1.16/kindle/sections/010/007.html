<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>8 Forms to external resources</title>
<link rel="stylesheet" type="text/css" href="/home/rails/v4.1.16/guides/output/kindle/stylesheets/kindle.css">
</head>
<body>
<h3 id="forms-to-external-resources">8 Forms to external resources</h3>
<p>If you need to post some data to an external resource it is still great to build your form using rails form helpers. But sometimes you need to set an <code>authenticity_token</code> for this resource. You can do it by passing an <code>authenticity_token: 'your_external_token'</code> parameter to the <code>form_tag</code> options:</p>
<div class="code_container">
<pre class="brush: ruby; html-script: true; gutter: false; toolbar: false">
&lt;%= form_tag 'http://farfar.away/form', authenticity_token: 'external_token') do %&gt;
  Form contents
&lt;% end %&gt;

</pre>
</div>
<p>Sometimes when you submit data to an external resource, like payment gateway, fields you can use in your form are limited by an external API. So you may want not to generate an <code>authenticity_token</code> hidden field at all. For doing this just pass <code>false</code> to the <code>:authenticity_token</code> option:</p>
<div class="code_container">
<pre class="brush: ruby; html-script: true; gutter: false; toolbar: false">
&lt;%= form_tag 'http://farfar.away/form', authenticity_token: false) do %&gt;
  Form contents
&lt;% end %&gt;

</pre>
</div>
<p>The same technique is also available for <code>form_for</code>:</p>
<div class="code_container">
<pre class="brush: ruby; html-script: true; gutter: false; toolbar: false">
&lt;%= form_for @invoice, url: external_url, authenticity_token: 'external_token' do |f| %&gt;
  Form contents
&lt;% end %&gt;

</pre>
</div>
<p>Or if you don't want to render an <code>authenticity_token</code> field:</p>
<div class="code_container">
<pre class="brush: ruby; html-script: true; gutter: false; toolbar: false">
&lt;%= form_for @invoice, url: external_url, authenticity_token: false do |f| %&gt;
  Form contents
&lt;% end %&gt;

</pre>
</div>
</body>
</html>
