<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>4 Action Controller</title>
<link rel="stylesheet" type="text/css" href="/home/rails/v6.1.7.3/guides/output/kindle/stylesheets/kindle.css">
</head>
<body>
<h3 id="action-controller"><a class="anchorlink" href="#action-controller">4 Action Controller</a></h3>
<h4 id="write-fragment-action-controller"><a class="anchorlink" href="#write-fragment-action-controller">4.1 write_fragment.action_controller</a></h4>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>:key</code></td>
<td>The complete key</td>
</tr>
</tbody>
</table>
<div class="code_container">
<pre><code class="highlight ruby"><span class="p">{</span>
  <span class="ss">key: </span><span class="s1">'posts/1-dashboard-view'</span>
<span class="p">}</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-75d0e8bd27f3327d1fbb75def9409324">{
  key: 'posts/1-dashboard-view'
}
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-75d0e8bd27f3327d1fbb75def9409324">Copy</button>
</div>
<h4 id="read-fragment-action-controller"><a class="anchorlink" href="#read-fragment-action-controller">4.2 read_fragment.action_controller</a></h4>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>:key</code></td>
<td>The complete key</td>
</tr>
</tbody>
</table>
<div class="code_container">
<pre><code class="highlight ruby"><span class="p">{</span>
  <span class="ss">key: </span><span class="s1">'posts/1-dashboard-view'</span>
<span class="p">}</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-106e1dbc89e3228e3a2c7e1a09f47d53">{
  key: 'posts/1-dashboard-view'
}
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-106e1dbc89e3228e3a2c7e1a09f47d53">Copy</button>
</div>
<h4 id="expire-fragment-action-controller"><a class="anchorlink" href="#expire-fragment-action-controller">4.3 expire_fragment.action_controller</a></h4>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>:key</code></td>
<td>The complete key</td>
</tr>
</tbody>
</table>
<div class="code_container">
<pre><code class="highlight ruby"><span class="p">{</span>
  <span class="ss">key: </span><span class="s1">'posts/1-dashboard-view'</span>
<span class="p">}</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-a8c4b5adc1cc43c3970edbf319873a98">{
  key: 'posts/1-dashboard-view'
}
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-a8c4b5adc1cc43c3970edbf319873a98">Copy</button>
</div>
<h4 id="exist-fragment-questionmark-action-controller"><a class="anchorlink" href="#exist-fragment-questionmark-action-controller">4.4 exist_fragment?.action_controller</a></h4>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>:key</code></td>
<td>The complete key</td>
</tr>
</tbody>
</table>
<div class="code_container">
<pre><code class="highlight ruby"><span class="p">{</span>
  <span class="ss">key: </span><span class="s1">'posts/1-dashboard-view'</span>
<span class="p">}</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-9199d10e7a593e84faf82f2ca5039acc">{
  key: 'posts/1-dashboard-view'
}
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-9199d10e7a593e84faf82f2ca5039acc">Copy</button>
</div>
<h4 id="write-page-action-controller"><a class="anchorlink" href="#write-page-action-controller">4.5 write_page.action_controller</a></h4>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>:path</code></td>
<td>The complete path</td>
</tr>
</tbody>
</table>
<div class="code_container">
<pre><code class="highlight ruby"><span class="p">{</span>
  <span class="ss">path: </span><span class="s1">'/users/1'</span>
<span class="p">}</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-f14f0bafaa922def3ba32c40018f4b5c">{
  path: '/users/1'
}
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-f14f0bafaa922def3ba32c40018f4b5c">Copy</button>
</div>
<h4 id="expire-page-action-controller"><a class="anchorlink" href="#expire-page-action-controller">4.6 expire_page.action_controller</a></h4>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>:path</code></td>
<td>The complete path</td>
</tr>
</tbody>
</table>
<div class="code_container">
<pre><code class="highlight ruby"><span class="p">{</span>
  <span class="ss">path: </span><span class="s1">'/users/1'</span>
<span class="p">}</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-e81ec766cc22f30363e90015e8dc27b1">{
  path: '/users/1'
}
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-e81ec766cc22f30363e90015e8dc27b1">Copy</button>
</div>
<h4 id="start-processing-action-controller"><a class="anchorlink" href="#start-processing-action-controller">4.7 start_processing.action_controller</a></h4>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>:controller</code></td>
<td>The controller name</td>
</tr>
<tr>
<td><code>:action</code></td>
<td>The action</td>
</tr>
<tr>
<td><code>:params</code></td>
<td>Hash of request parameters without any filtered parameter</td>
</tr>
<tr>
<td><code>:headers</code></td>
<td>Request headers</td>
</tr>
<tr>
<td><code>:format</code></td>
<td>html/js/json/xml etc</td>
</tr>
<tr>
<td><code>:method</code></td>
<td>HTTP request verb</td>
</tr>
<tr>
<td><code>:path</code></td>
<td>Request path</td>
</tr>
</tbody>
</table>
<div class="code_container">
<pre><code class="highlight ruby"><span class="p">{</span>
  <span class="ss">controller: </span><span class="s2">"PostsController"</span><span class="p">,</span>
  <span class="ss">action: </span><span class="s2">"new"</span><span class="p">,</span>
  <span class="ss">params: </span><span class="p">{</span> <span class="s2">"action"</span> <span class="o">=&gt;</span> <span class="s2">"new"</span><span class="p">,</span> <span class="s2">"controller"</span> <span class="o">=&gt;</span> <span class="s2">"posts"</span> <span class="p">},</span>
  <span class="ss">headers: </span><span class="c1">#&lt;ActionDispatch::Http::Headers:0x0055a67a519b88&gt;,</span>
  <span class="ss">format: :html</span><span class="p">,</span>
  <span class="ss">method: </span><span class="s2">"GET"</span><span class="p">,</span>
  <span class="ss">path: </span><span class="s2">"/posts/new"</span>
<span class="p">}</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-67c1fa77eeb770c08720f57a445935dc">{
  controller: "PostsController",
  action: "new",
  params: { "action" =&gt; "new", "controller" =&gt; "posts" },
  headers: #&lt;ActionDispatch::Http::Headers:0x0055a67a519b88&gt;,
  format: :html,
  method: "GET",
  path: "/posts/new"
}
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-67c1fa77eeb770c08720f57a445935dc">Copy</button>
</div>
<h4 id="process-action-action-controller"><a class="anchorlink" href="#process-action-action-controller">4.8 process_action.action_controller</a></h4>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>:controller</code></td>
<td>The controller name</td>
</tr>
<tr>
<td><code>:action</code></td>
<td>The action</td>
</tr>
<tr>
<td><code>:params</code></td>
<td>Hash of request parameters without any filtered parameter</td>
</tr>
<tr>
<td><code>:headers</code></td>
<td>Request headers</td>
</tr>
<tr>
<td><code>:format</code></td>
<td>html/js/json/xml etc</td>
</tr>
<tr>
<td><code>:method</code></td>
<td>HTTP request verb</td>
</tr>
<tr>
<td><code>:path</code></td>
<td>Request path</td>
</tr>
<tr>
<td><code>:request</code></td>
<td>The <code>ActionDispatch::Request</code>
</td>
</tr>
<tr>
<td><code>:status</code></td>
<td>HTTP status code</td>
</tr>
<tr>
<td><code>:location</code></td>
<td>Location response header</td>
</tr>
<tr>
<td><code>:view_runtime</code></td>
<td>Amount spent in view in ms</td>
</tr>
<tr>
<td><code>:db_runtime</code></td>
<td>Amount spent executing database queries in ms</td>
</tr>
</tbody>
</table>
<div class="code_container">
<pre><code class="highlight ruby"><span class="p">{</span>
  <span class="ss">controller: </span><span class="s2">"PostsController"</span><span class="p">,</span>
  <span class="ss">action: </span><span class="s2">"index"</span><span class="p">,</span>
  <span class="ss">params: </span><span class="p">{</span><span class="s2">"action"</span> <span class="o">=&gt;</span> <span class="s2">"index"</span><span class="p">,</span> <span class="s2">"controller"</span> <span class="o">=&gt;</span> <span class="s2">"posts"</span><span class="p">},</span>
  <span class="ss">headers: </span><span class="c1">#&lt;ActionDispatch::Http::Headers:0x0055a67a519b88&gt;,</span>
  <span class="ss">format: :html</span><span class="p">,</span>
  <span class="ss">method: </span><span class="s2">"GET"</span><span class="p">,</span>
  <span class="ss">path: </span><span class="s2">"/posts"</span><span class="p">,</span>
  <span class="ss">request: </span><span class="c1">#&lt;ActionDispatch::Request:0x00007ff1cb9bd7b8&gt;,</span>
  <span class="ss">status: </span><span class="mi">200</span><span class="p">,</span>
  <span class="ss">view_runtime: </span><span class="mf">46.848</span><span class="p">,</span>
  <span class="ss">db_runtime: </span><span class="mf">0.157</span>
<span class="p">}</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-d914594dddf1567e330a047f8ba3f8a9">{
  controller: "PostsController",
  action: "index",
  params: {"action" =&gt; "index", "controller" =&gt; "posts"},
  headers: #&lt;ActionDispatch::Http::Headers:0x0055a67a519b88&gt;,
  format: :html,
  method: "GET",
  path: "/posts",
  request: #&lt;ActionDispatch::Request:0x00007ff1cb9bd7b8&gt;,
  status: 200,
  view_runtime: 46.848,
  db_runtime: 0.157
}
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-d914594dddf1567e330a047f8ba3f8a9">Copy</button>
</div>
<h4 id="send-file-action-controller"><a class="anchorlink" href="#send-file-action-controller">4.9 send_file.action_controller</a></h4>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>:path</code></td>
<td>Complete path to the file</td>
</tr>
</tbody>
</table>
<div class="info"><p>Additional keys may be added by the caller.</p></div>

<h4 id="send-data-action-controller"><a class="anchorlink" href="#send-data-action-controller">4.10 send_data.action_controller</a></h4>

<p><code>ActionController</code> does not add any specific information to the payload. All options are passed through to the payload.</p>

<h4 id="redirect-to-action-controller"><a class="anchorlink" href="#redirect-to-action-controller">4.11 redirect_to.action_controller</a></h4>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>:status</code></td>
<td>HTTP response code</td>
</tr>
<tr>
<td><code>:location</code></td>
<td>URL to redirect to</td>
</tr>
<tr>
<td><code>:request</code></td>
<td>The <code>ActionDispatch::Request</code>
</td>
</tr>
</tbody>
</table>
<div class="code_container">
<pre><code class="highlight ruby"><span class="p">{</span>
  <span class="ss">status: </span><span class="mi">302</span><span class="p">,</span>
  <span class="ss">location: </span><span class="s2">"http://localhost:3000/posts/new"</span><span class="p">,</span>
  <span class="ss">request: </span><span class="c1">#&lt;ActionDispatch::Request:0x00007ff1cb9bd7b8&gt;</span>
<span class="p">}</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-91835ef486f843241afe2f7fe551891d">{
  status: 302,
  location: "http://localhost:3000/posts/new",
  request: #&lt;ActionDispatch::Request:0x00007ff1cb9bd7b8&gt;
}
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-91835ef486f843241afe2f7fe551891d">Copy</button>
</div>
<h4 id="halted-callback-action-controller"><a class="anchorlink" href="#halted-callback-action-controller">4.12 halted_callback.action_controller</a></h4>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>:filter</code></td>
<td>Filter that halted the action</td>
</tr>
</tbody>
</table>
<div class="code_container">
<pre><code class="highlight ruby"><span class="p">{</span>
  <span class="ss">filter: </span><span class="s2">":halting_filter"</span>
<span class="p">}</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-7e28d8b3f8b0d9fa1e452af18277c1f8">{
  filter: ":halting_filter"
}
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-7e28d8b3f8b0d9fa1e452af18277c1f8">Copy</button>
</div>
<h4 id="unpermitted-parameters-action-controller"><a class="anchorlink" href="#unpermitted-parameters-action-controller">4.13 unpermitted_parameters.action_controller</a></h4>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>:keys</code></td>
<td>Unpermitted keys</td>
</tr>
</tbody>
</table>
</body>
</html>
