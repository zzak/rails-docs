<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>7 Extensions to Numeric</title>
<link rel="stylesheet" type="text/css" href="/home/rails/v6.1.7.3/guides/output/kindle/stylesheets/kindle.css">
</head>
<body>
<h3 id="extensions-to-numeric"><a class="anchorlink" href="#extensions-to-numeric">7 Extensions to <code>Numeric</code></a></h3>
<h4 id="bytes"><a class="anchorlink" href="#bytes">7.1 Bytes</a></h4>

<p>All numbers respond to these methods:</p>
<ul>
<li><a href="https://api.rubyonrails.org/v6.1.7.3/classes/Numeric.html#method-i-bytes"><code>bytes</code></a></li>
<li><a href="https://api.rubyonrails.org/v6.1.7.3/classes/Numeric.html#method-i-kilobytes"><code>kilobytes</code></a></li>
<li><a href="https://api.rubyonrails.org/v6.1.7.3/classes/Numeric.html#method-i-megabytes"><code>megabytes</code></a></li>
<li><a href="https://api.rubyonrails.org/v6.1.7.3/classes/Numeric.html#method-i-gigabytes"><code>gigabytes</code></a></li>
<li><a href="https://api.rubyonrails.org/v6.1.7.3/classes/Numeric.html#method-i-terabytes"><code>terabytes</code></a></li>
<li><a href="https://api.rubyonrails.org/v6.1.7.3/classes/Numeric.html#method-i-petabytes"><code>petabytes</code></a></li>
<li><a href="https://api.rubyonrails.org/v6.1.7.3/classes/Numeric.html#method-i-exabytes"><code>exabytes</code></a></li>
</ul>
<p>They return the corresponding amount of bytes, using a conversion factor of 1024:</p>

<div class="code_container">
<pre><code class="highlight ruby"><span class="mi">2</span><span class="p">.</span><span class="nf">kilobytes</span>   <span class="c1"># =&gt; 2048</span>
<span class="mi">3</span><span class="p">.</span><span class="nf">megabytes</span>   <span class="c1"># =&gt; 3145728</span>
<span class="mf">3.5</span><span class="p">.</span><span class="nf">gigabytes</span> <span class="c1"># =&gt; 3758096384</span>
<span class="o">-</span><span class="mi">4</span><span class="p">.</span><span class="nf">exabytes</span>   <span class="c1"># =&gt; -4611686018427387904</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-29eba1cc642947f7973a12802c19927c">2.kilobytes   # =&gt; 2048
3.megabytes   # =&gt; 3145728
3.5.gigabytes # =&gt; 3758096384
-4.exabytes   # =&gt; -4611686018427387904
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-29eba1cc642947f7973a12802c19927c">Copy</button>
</div>
<p>Singular forms are aliased so you are able to say:</p>

<div class="code_container">
<pre><code class="highlight ruby"><span class="mi">1</span><span class="p">.</span><span class="nf">megabyte</span> <span class="c1"># =&gt; 1048576</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-81707ad95b499a3bb9ec462e4d18db07">1.megabyte # =&gt; 1048576
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-81707ad95b499a3bb9ec462e4d18db07">Copy</button>
</div>
<div class="note"><p>Defined in <code><a href="https://github.com/rails/rails/tree/v6.1.7.3/activesupport/lib/active_support/core_ext/numeric/bytes.rb">active_support/core_ext/numeric/bytes.rb</a></code>.</p></div>

<h4 id="extensions-to-numeric-time"><a class="anchorlink" href="#extensions-to-numeric-time">7.2 Time</a></h4>

<p>The following methods:</p>
<ul>
<li><a href="https://api.rubyonrails.org/v6.1.7.3/classes/Numeric.html#method-i-seconds"><code>seconds</code></a></li>
<li><a href="https://api.rubyonrails.org/v6.1.7.3/classes/Numeric.html#method-i-minutes"><code>minutes</code></a></li>
<li><a href="https://api.rubyonrails.org/v6.1.7.3/classes/Numeric.html#method-i-hours"><code>hours</code></a></li>
<li><a href="https://api.rubyonrails.org/v6.1.7.3/classes/Numeric.html#method-i-days"><code>days</code></a></li>
<li><a href="https://api.rubyonrails.org/v6.1.7.3/classes/Numeric.html#method-i-weeks"><code>weeks</code></a></li>
<li><a href="https://api.rubyonrails.org/v6.1.7.3/classes/Numeric.html#method-i-fortnights"><code>fortnights</code></a></li>
</ul>
<p>enable time declarations and calculations, like <code>45.minutes + 2.hours + 4.weeks</code>. Their return values can also be added to or subtracted from Time objects.</p>

<p>These methods can be combined with <a href="https://api.rubyonrails.org/v6.1.7.3/classes/ActiveSupport/Duration.html#method-i-from_now"><code>from_now</code></a>, <a href="https://api.rubyonrails.org/v6.1.7.3/classes/ActiveSupport/Duration.html#method-i-ago"><code>ago</code></a>, etc, for precise date calculations. For example:</p>

<div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># equivalent to Time.current.advance(days: 1)</span>
<span class="mi">1</span><span class="p">.</span><span class="nf">day</span><span class="p">.</span><span class="nf">from_now</span>

<span class="c1"># equivalent to Time.current.advance(weeks: 2)</span>
<span class="mi">2</span><span class="p">.</span><span class="nf">weeks</span><span class="p">.</span><span class="nf">from_now</span>

<span class="c1"># equivalent to Time.current.advance(days: 4, weeks: 5)</span>
<span class="p">(</span><span class="mi">4</span><span class="p">.</span><span class="nf">days</span> <span class="o">+</span> <span class="mi">5</span><span class="p">.</span><span class="nf">weeks</span><span class="p">).</span><span class="nf">from_now</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-d8a168d701e8e276dccb315eb8e64501"># equivalent to Time.current.advance(days: 1)
1.day.from_now

# equivalent to Time.current.advance(weeks: 2)
2.weeks.from_now

# equivalent to Time.current.advance(days: 4, weeks: 5)
(4.days + 5.weeks).from_now
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-d8a168d701e8e276dccb315eb8e64501">Copy</button>
</div>
<div class="warning"><p>For other durations please refer to the time extensions to <code>Integer</code>.</p></div>

<div class="note"><p>Defined in <code><a href="https://github.com/rails/rails/tree/v6.1.7.3/activesupport/lib/active_support/core_ext/numeric/time.rb">active_support/core_ext/numeric/time.rb</a></code>.</p></div>

<h4 id="formatting"><a class="anchorlink" href="#formatting">7.3 Formatting</a></h4>

<p>Enables the formatting of numbers in a variety of ways.</p>

<p>Produce a string representation of a number as a telephone number:</p>

<div class="code_container">
<pre><code class="highlight ruby"><span class="mi">5551234</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:phone</span><span class="p">)</span>
<span class="c1"># =&gt; 555-1234</span>
<span class="mi">1235551234</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:phone</span><span class="p">)</span>
<span class="c1"># =&gt; 123-555-1234</span>
<span class="mi">1235551234</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:phone</span><span class="p">,</span> <span class="ss">area_code: </span><span class="kp">true</span><span class="p">)</span>
<span class="c1"># =&gt; (123) 555-1234</span>
<span class="mi">1235551234</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:phone</span><span class="p">,</span> <span class="ss">delimiter: </span><span class="s2">" "</span><span class="p">)</span>
<span class="c1"># =&gt; 123 555 1234</span>
<span class="mi">1235551234</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:phone</span><span class="p">,</span> <span class="ss">area_code: </span><span class="kp">true</span><span class="p">,</span> <span class="ss">extension: </span><span class="mi">555</span><span class="p">)</span>
<span class="c1"># =&gt; (123) 555-1234 x 555</span>
<span class="mi">1235551234</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:phone</span><span class="p">,</span> <span class="ss">country_code: </span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># =&gt; +1-123-555-1234</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-f01d01e914b603c35366ce3b9ecb7949">5551234.to_s(:phone)
# =&gt; 555-1234
1235551234.to_s(:phone)
# =&gt; 123-555-1234
1235551234.to_s(:phone, area_code: true)
# =&gt; (123) 555-1234
1235551234.to_s(:phone, delimiter: " ")
# =&gt; 123 555 1234
1235551234.to_s(:phone, area_code: true, extension: 555)
# =&gt; (123) 555-1234 x 555
1235551234.to_s(:phone, country_code: 1)
# =&gt; +1-123-555-1234
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-f01d01e914b603c35366ce3b9ecb7949">Copy</button>
</div>
<p>Produce a string representation of a number as currency:</p>

<div class="code_container">
<pre><code class="highlight ruby"><span class="mf">1234567890.50</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:currency</span><span class="p">)</span>                 <span class="c1"># =&gt; $1,234,567,890.50</span>
<span class="mf">1234567890.506</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:currency</span><span class="p">)</span>                <span class="c1"># =&gt; $1,234,567,890.51</span>
<span class="mf">1234567890.506</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:currency</span><span class="p">,</span> <span class="ss">precision: </span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># =&gt; $1,234,567,890.506</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-5f02f6b717efa1207cbc47101892ae95">1234567890.50.to_s(:currency)                 # =&gt; $1,234,567,890.50
1234567890.506.to_s(:currency)                # =&gt; $1,234,567,890.51
1234567890.506.to_s(:currency, precision: 3)  # =&gt; $1,234,567,890.506
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-5f02f6b717efa1207cbc47101892ae95">Copy</button>
</div>
<p>Produce a string representation of a number as a percentage:</p>

<div class="code_container">
<pre><code class="highlight ruby"><span class="mi">100</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:percentage</span><span class="p">)</span>
<span class="c1"># =&gt; 100.000%</span>
<span class="mi">100</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:percentage</span><span class="p">,</span> <span class="ss">precision: </span><span class="mi">0</span><span class="p">)</span>
<span class="c1"># =&gt; 100%</span>
<span class="mi">1000</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:percentage</span><span class="p">,</span> <span class="ss">delimiter: </span><span class="s1">'.'</span><span class="p">,</span> <span class="ss">separator: </span><span class="s1">','</span><span class="p">)</span>
<span class="c1"># =&gt; 1.000,000%</span>
<span class="mf">302.24398923423</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:percentage</span><span class="p">,</span> <span class="ss">precision: </span><span class="mi">5</span><span class="p">)</span>
<span class="c1"># =&gt; 302.24399%</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-78366edd480a40cdd7414693bbb6abaf">100.to_s(:percentage)
# =&gt; 100.000%
100.to_s(:percentage, precision: 0)
# =&gt; 100%
1000.to_s(:percentage, delimiter: '.', separator: ',')
# =&gt; 1.000,000%
302.24398923423.to_s(:percentage, precision: 5)
# =&gt; 302.24399%
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-78366edd480a40cdd7414693bbb6abaf">Copy</button>
</div>
<p>Produce a string representation of a number in delimited form:</p>

<div class="code_container">
<pre><code class="highlight ruby"><span class="mi">12345678</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:delimited</span><span class="p">)</span>                     <span class="c1"># =&gt; 12,345,678</span>
<span class="mf">12345678.05</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:delimited</span><span class="p">)</span>                  <span class="c1"># =&gt; 12,345,678.05</span>
<span class="mi">12345678</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:delimited</span><span class="p">,</span> <span class="ss">delimiter: </span><span class="s2">"."</span><span class="p">)</span>     <span class="c1"># =&gt; 12.345.678</span>
<span class="mi">12345678</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:delimited</span><span class="p">,</span> <span class="ss">delimiter: </span><span class="s2">","</span><span class="p">)</span>     <span class="c1"># =&gt; 12,345,678</span>
<span class="mf">12345678.05</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:delimited</span><span class="p">,</span> <span class="ss">separator: </span><span class="s2">" "</span><span class="p">)</span>  <span class="c1"># =&gt; 12,345,678 05</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-b1b7bfd864d55e59a97ec871f04e7cf4">12345678.to_s(:delimited)                     # =&gt; 12,345,678
12345678.05.to_s(:delimited)                  # =&gt; 12,345,678.05
12345678.to_s(:delimited, delimiter: ".")     # =&gt; 12.345.678
12345678.to_s(:delimited, delimiter: ",")     # =&gt; 12,345,678
12345678.05.to_s(:delimited, separator: " ")  # =&gt; 12,345,678 05
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-b1b7bfd864d55e59a97ec871f04e7cf4">Copy</button>
</div>
<p>Produce a string representation of a number rounded to a precision:</p>

<div class="code_container">
<pre><code class="highlight ruby"><span class="mf">111.2345</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:rounded</span><span class="p">)</span>                     <span class="c1"># =&gt; 111.235</span>
<span class="mf">111.2345</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:rounded</span><span class="p">,</span> <span class="ss">precision: </span><span class="mi">2</span><span class="p">)</span>       <span class="c1"># =&gt; 111.23</span>
<span class="mi">13</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:rounded</span><span class="p">,</span> <span class="ss">precision: </span><span class="mi">5</span><span class="p">)</span>             <span class="c1"># =&gt; 13.00000</span>
<span class="mf">389.32314</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:rounded</span><span class="p">,</span> <span class="ss">precision: </span><span class="mi">0</span><span class="p">)</span>      <span class="c1"># =&gt; 389</span>
<span class="mf">111.2345</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:rounded</span><span class="p">,</span> <span class="ss">significant: </span><span class="kp">true</span><span class="p">)</span>  <span class="c1"># =&gt; 111</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-db4e6e6f786fffde801d3718564107e8">111.2345.to_s(:rounded)                     # =&gt; 111.235
111.2345.to_s(:rounded, precision: 2)       # =&gt; 111.23
13.to_s(:rounded, precision: 5)             # =&gt; 13.00000
389.32314.to_s(:rounded, precision: 0)      # =&gt; 389
111.2345.to_s(:rounded, significant: true)  # =&gt; 111
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-db4e6e6f786fffde801d3718564107e8">Copy</button>
</div>
<p>Produce a string representation of a number as a human-readable number of bytes:</p>

<div class="code_container">
<pre><code class="highlight ruby"><span class="mi">123</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:human_size</span><span class="p">)</span>                  <span class="c1"># =&gt; 123 Bytes</span>
<span class="mi">1234</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:human_size</span><span class="p">)</span>                 <span class="c1"># =&gt; 1.21 KB</span>
<span class="mi">12345</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:human_size</span><span class="p">)</span>                <span class="c1"># =&gt; 12.1 KB</span>
<span class="mi">1234567</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:human_size</span><span class="p">)</span>              <span class="c1"># =&gt; 1.18 MB</span>
<span class="mi">1234567890</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:human_size</span><span class="p">)</span>           <span class="c1"># =&gt; 1.15 GB</span>
<span class="mi">1234567890123</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:human_size</span><span class="p">)</span>        <span class="c1"># =&gt; 1.12 TB</span>
<span class="mi">1234567890123456</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:human_size</span><span class="p">)</span>     <span class="c1"># =&gt; 1.1 PB</span>
<span class="mi">1234567890123456789</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:human_size</span><span class="p">)</span>  <span class="c1"># =&gt; 1.07 EB</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-f70e9666f4176f3e4c70752bb7671b36">123.to_s(:human_size)                  # =&gt; 123 Bytes
1234.to_s(:human_size)                 # =&gt; 1.21 KB
12345.to_s(:human_size)                # =&gt; 12.1 KB
1234567.to_s(:human_size)              # =&gt; 1.18 MB
1234567890.to_s(:human_size)           # =&gt; 1.15 GB
1234567890123.to_s(:human_size)        # =&gt; 1.12 TB
1234567890123456.to_s(:human_size)     # =&gt; 1.1 PB
1234567890123456789.to_s(:human_size)  # =&gt; 1.07 EB
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-f70e9666f4176f3e4c70752bb7671b36">Copy</button>
</div>
<p>Produce a string representation of a number in human-readable words:</p>

<div class="code_container">
<pre><code class="highlight ruby"><span class="mi">123</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:human</span><span class="p">)</span>               <span class="c1"># =&gt; "123"</span>
<span class="mi">1234</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:human</span><span class="p">)</span>              <span class="c1"># =&gt; "1.23 Thousand"</span>
<span class="mi">12345</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:human</span><span class="p">)</span>             <span class="c1"># =&gt; "12.3 Thousand"</span>
<span class="mi">1234567</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:human</span><span class="p">)</span>           <span class="c1"># =&gt; "1.23 Million"</span>
<span class="mi">1234567890</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:human</span><span class="p">)</span>        <span class="c1"># =&gt; "1.23 Billion"</span>
<span class="mi">1234567890123</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:human</span><span class="p">)</span>     <span class="c1"># =&gt; "1.23 Trillion"</span>
<span class="mi">1234567890123456</span><span class="p">.</span><span class="nf">to_s</span><span class="p">(</span><span class="ss">:human</span><span class="p">)</span>  <span class="c1"># =&gt; "1.23 Quadrillion"</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-4de6f62dcb3f2e0a40129390735cfe1c">123.to_s(:human)               # =&gt; "123"
1234.to_s(:human)              # =&gt; "1.23 Thousand"
12345.to_s(:human)             # =&gt; "12.3 Thousand"
1234567.to_s(:human)           # =&gt; "1.23 Million"
1234567890.to_s(:human)        # =&gt; "1.23 Billion"
1234567890123.to_s(:human)     # =&gt; "1.23 Trillion"
1234567890123456.to_s(:human)  # =&gt; "1.23 Quadrillion"
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-4de6f62dcb3f2e0a40129390735cfe1c">Copy</button>
</div>
<div class="note"><p>Defined in <code><a href="https://github.com/rails/rails/tree/v6.1.7.3/activesupport/lib/active_support/core_ext/numeric/conversions.rb">active_support/core_ext/numeric/conversions.rb</a></code>.</p></div>
</body>
</html>
