<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>Ruby on Rails Guides Guidelines â€” Ruby on Rails Guides</title>

<link rel="stylesheet" type="text/css" href="stylesheets/kindle.css" />

</head>
<body class="guide">

    <h2>Ruby on Rails Guides Guidelines</h2><p>This guide documents guidelines for writing Ruby on Rails Guides. This guide follows itself in a graceful loop, serving itself as an example.</p><p>After reading this guide, you will know:</p>
<ul>
<li>About the conventions to be used in Rails documentation.</li>
<li>How to generate guides locally.</li>
</ul>

    <div class="pagebreak"></div>

              <div id="subCol">
            <h3 class="chapter"><img src="images/chapters_icon.gif" alt="" />Chapters</h3>
            <ol class="chapters">
<li><a href="#markdown">Markdown</a></li>
<li><a href="#prologue">Prologue</a></li>
<li><a href="#headings">Headings</a></li>
<li><a href="#linking-to-the-api">Linking to the API</a></li>
<li><a href="#api-documentation-guidelines">API Documentation Guidelines</a></li>
<li>
<a href="#html-guides">HTML Guides</a>

<ul>
<li><a href="#html-guides-generation">Generation</a></li>
<li><a href="#validation">Validation</a></li>
</ul>
</li>
<li>
<a href="#kindle-guides">Kindle Guides</a>

<ul>
<li><a href="#kindle-guides-generation">Generation</a></li>
</ul>
</li>
</ol>

          </div>

    <div class="pagebreak"></div>

  <h3 id="markdown"><a class="anchorlink" href="#markdown">1 Markdown</a></h3><p>Guides are written in <a href="https://help.github.com/articles/github-flavored-markdown">GitHub Flavored Markdown</a>. There is comprehensive <a href="https://daringfireball.net/projects/markdown/syntax">documentation for Markdown</a>, as well as a <a href="https://daringfireball.net/projects/markdown/basics">cheatsheet</a>.</p><h3 id="prologue"><a class="anchorlink" href="#prologue">2 Prologue</a></h3><p>Each guide should start with motivational text at the top (that's the little introduction in the blue area). The prologue should tell the reader what the guide is about, and what they will learn. As an example, see the <a href="routing.html">Routing Guide</a>.</p><h3 id="headings"><a class="anchorlink" href="#headings">3 Headings</a></h3><p>The title of every guide uses an <code>h1</code> heading; guide sections use <code>h2</code> headings; subsections use <code>h3</code> headings; etc. Note that the generated HTML output will use heading tags starting with <code>&lt;h2&gt;</code>.</p><div class="code_container">
<pre><code class="highlight plaintext">Guide Title
===========

Section
-------

### Sub Section
</code></pre>
<textarea class="clipboard-content" id="clipboard-c944320c53ed53baa2299a6661ee32d9">Guide Title
===========

Section
-------

### Sub Section
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-c944320c53ed53baa2299a6661ee32d9">Copy</button>
</div>
<p>When writing headings, capitalize all words except for prepositions, conjunctions, internal articles, and forms of the verb "to be":</p><div class="code_container">
<pre><code class="highlight plaintext">#### Assertions and Testing Jobs inside Components
#### Middleware Stack is an Array
#### When are Objects Saved?
</code></pre>
<textarea class="clipboard-content" id="clipboard-eb9d5df2bc9b921a323940b3c81ba42a">#### Assertions and Testing Jobs inside Components
#### Middleware Stack is an Array
#### When are Objects Saved?
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-eb9d5df2bc9b921a323940b3c81ba42a">Copy</button>
</div>
<p>Use the same inline formatting as regular text:</p><div class="code_container">
<pre><code class="highlight plaintext">##### The `:content_type` Option
</code></pre>
<textarea class="clipboard-content" id="clipboard-1c23b44ab4a763784c7853784cf71c20">##### The `:content_type` Option
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-1c23b44ab4a763784c7853784cf71c20">Copy</button>
</div>
<h3 id="linking-to-the-api"><a class="anchorlink" href="#linking-to-the-api">4 Linking to the API</a></h3><p>Links to the API (<code>api.rubyonrails.org</code>) are processed by the guides generator in the following manner:</p><p>Links that include a release tag are left untouched. For example</p><div class="code_container">
<pre><code class="highlight plaintext">https://api.rubyonrails.org/v5.0.1/classes/ActiveRecord/Attributes/ClassMethods.html
</code></pre>
<textarea class="clipboard-content" id="clipboard-f14e4647fbcd70a891e6f523328aa3e0">https://api.rubyonrails.org/v5.0.1/classes/ActiveRecord/Attributes/ClassMethods.html
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-f14e4647fbcd70a891e6f523328aa3e0">Copy</button>
</div>
<p>is not modified.</p><p>Please use these in release notes, since they should point to the corresponding version no matter the target being generated.</p><p>If the link does not include a release tag and edge guides are being generated, the domain is replaced by <code>edgeapi.rubyonrails.org</code>. For example,</p><div class="code_container">
<pre><code class="highlight plaintext">https://api.rubyonrails.org/classes/ActionDispatch/Response.html
</code></pre>
<textarea class="clipboard-content" id="clipboard-d269cc79657d6c22e7f786f5f0f7a26a">https://api.rubyonrails.org/classes/ActionDispatch/Response.html
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-d269cc79657d6c22e7f786f5f0f7a26a">Copy</button>
</div>
<p>becomes</p><div class="code_container">
<pre><code class="highlight plaintext">https://edgeapi.rubyonrails.org/classes/ActionDispatch/Response.html
</code></pre>
<textarea class="clipboard-content" id="clipboard-b3be4914d7735b36ba0ec2d4237bd543">https://edgeapi.rubyonrails.org/classes/ActionDispatch/Response.html
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-b3be4914d7735b36ba0ec2d4237bd543">Copy</button>
</div>
<p>If the link does not include a release tag and release guides are being generated, the Rails version is injected. For example, if we are generating the guides for v5.1.0 the link</p><div class="code_container">
<pre><code class="highlight plaintext">https://api.rubyonrails.org/classes/ActionDispatch/Response.html
</code></pre>
<textarea class="clipboard-content" id="clipboard-b086c9031ba14c0b1c47dd0909e471a2">https://api.rubyonrails.org/classes/ActionDispatch/Response.html
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-b086c9031ba14c0b1c47dd0909e471a2">Copy</button>
</div>
<p>becomes</p><div class="code_container">
<pre><code class="highlight plaintext">https://api.rubyonrails.org/v5.1.0/classes/ActionDispatch/Response.html
</code></pre>
<textarea class="clipboard-content" id="clipboard-91cd00b84a77e07357b17d331bf5d58e">https://api.rubyonrails.org/v5.1.0/classes/ActionDispatch/Response.html
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-91cd00b84a77e07357b17d331bf5d58e">Copy</button>
</div>
<p>Please don't link to <code>edgeapi.rubyonrails.org</code> manually.</p><h3 id="api-documentation-guidelines"><a class="anchorlink" href="#api-documentation-guidelines">5 API Documentation Guidelines</a></h3><p>The guides and the API should be coherent and consistent where appropriate. In particular, these sections of the <a href="api_documentation_guidelines.html">API Documentation Guidelines</a> also apply to the guides:</p>
<ul>
<li><a href="api_documentation_guidelines.html#wording">Wording</a></li>
<li><a href="api_documentation_guidelines.html#english">English</a></li>
<li><a href="api_documentation_guidelines.html#example-code">Example Code</a></li>
<li><a href="api_documentation_guidelines.html#file-names">Filenames</a></li>
<li><a href="api_documentation_guidelines.html#fonts">Fonts</a></li>
</ul>
<h3 id="html-guides"><a class="anchorlink" href="#html-guides">6 HTML Guides</a></h3><p>Before generating the guides, make sure that you have the latest version of
Bundler installed on your system. You can find the latest Bundler version
<a href="https://rubygems.org/gems/bundler">here</a>. As of this writing, it's v1.17.1.</p><p>To install the latest version of Bundler, run <code>gem install bundler</code>.</p><h4 id="html-guides-generation"><a class="anchorlink" href="#html-guides-generation">6.1 Generation</a></h4><p>To generate all the guides, just <code>cd</code> into the <code>guides</code> directory, run <code>bundle install</code>, and execute:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">bundle exec rake </span>guides:generate
</code></pre>
<textarea class="clipboard-content" id="clipboard-992ead89c65fd6de400afaf0edbe3dff">bundle exec rake guides:generate
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-992ead89c65fd6de400afaf0edbe3dff">Copy</button>
</div>
<p>or</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">bundle exec rake </span>guides:generate:html
</code></pre>
<textarea class="clipboard-content" id="clipboard-83bd184a4c207ee6c3dc4e525672b34e">bundle exec rake guides:generate:html
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-83bd184a4c207ee6c3dc4e525672b34e">Copy</button>
</div>
<p>Resulting HTML files can be found in the <code>./output</code> directory.</p><p>To process <code>my_guide.md</code> and nothing else use the <code>ONLY</code> environment variable:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">touch </span>my_guide.md
<span class="gp">$</span><span class="w"> </span><span class="nb">bundle exec rake </span>guides:generate <span class="nv">ONLY</span><span class="o">=</span>my_guide
</code></pre>
<textarea class="clipboard-content" id="clipboard-3a81ece84352325009771d7c2e98646c">touch my_guide.md
bundle exec rake guides:generate ONLY=my_guide
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-3a81ece84352325009771d7c2e98646c">Copy</button>
</div>
<p>By default, guides that have not been modified are not processed, so <code>ONLY</code> is rarely needed in practice.</p><p>To force processing all the guides, pass <code>ALL=1</code>.</p><p>If you want to generate guides in a language other than English, you can keep them in a separate directory under <code>source</code> (e.g. <code>source/es</code>) and use the <code>GUIDES_LANGUAGE</code> environment variable:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">bundle exec rake </span>guides:generate <span class="nv">GUIDES_LANGUAGE</span><span class="o">=</span>es
</code></pre>
<textarea class="clipboard-content" id="clipboard-201e0190b977978737539e48c7e1a184">bundle exec rake guides:generate GUIDES_LANGUAGE=es
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-201e0190b977978737539e48c7e1a184">Copy</button>
</div>
<p>If you want to see all the environment variables you can use to configure the generation script just run:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">rake</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-25edba84699ea4ba1ccd18532f5fabce">rake
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-25edba84699ea4ba1ccd18532f5fabce">Copy</button>
</div>
<h4 id="validation"><a class="anchorlink" href="#validation">6.2 Validation</a></h4><p>Please validate the generated HTML with:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">bundle exec rake </span>guides:validate
</code></pre>
<textarea class="clipboard-content" id="clipboard-52b5929b08b3ae59721365d63cf0c6aa">bundle exec rake guides:validate
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-52b5929b08b3ae59721365d63cf0c6aa">Copy</button>
</div>
<p>Particularly, titles get an ID generated from their content and this often leads to duplicates.</p><h3 id="kindle-guides"><a class="anchorlink" href="#kindle-guides">7 Kindle Guides</a></h3><h4 id="kindle-guides-generation"><a class="anchorlink" href="#kindle-guides-generation">7.1 Generation</a></h4><p>To generate guides for the Kindle, use the following rake task:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">bundle exec rake </span>guides:generate:kindle
</code></pre>
<textarea class="clipboard-content" id="clipboard-4444d4b9f7448ed80aa79078a05ca50d">bundle exec rake guides:generate:kindle
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-4444d4b9f7448ed80aa79078a05ca50d">Copy</button>
</div>

</body>
</html>
