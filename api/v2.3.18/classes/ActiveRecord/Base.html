<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>Class: ActiveRecord::Base</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />

    <script language="JavaScript" type="text/javascript">
    // <![CDATA[

        function toggleSource( id )
        {
          var elem
          var link

          if( document.getElementById )
          {
            elem = document.getElementById( id )
            link = document.getElementById( "l_" + id )
          }
          else if ( document.all )
          {
            elem = eval( "document.all." + id )
            link = eval( "document.all.l_" + id )
          }
          else
            return false;

          if( elem.style.display == "block" )
          {
            elem.style.display = "none"
            link.innerHTML = "show source"
          }
          else
          {
            elem.style.display = "block"
            link.innerHTML = "hide source"
          }
        }

        function openCode( url )
        {
          window.open( url, "SOURCE_CODE", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=480,width=750" ).focus();
        }
      // ]]>
    </script>
  </head>

  <body>
  <table width="100%" border='0' cellpadding='0' cellspacing='0' class='banner'><tr>
  <td class="file-title"><span class="file-title-prefix">Class</span><br />ActiveRecord::Base</td>
  <td align="right">
    <table cellspacing="0" cellpadding="2">
      <tr valign="top">
        <td>In:</td>
        <td>
<a href="../../files/activerecord/lib/active_record/connection_adapters/sqlite_adapter_rb.html">activerecord/lib/active_record/connection_adapters/sqlite_adapter.rb</a>
<a href="../../files/activerecord/lib/active_record/connection_adapters/mysql_adapter_rb.html">activerecord/lib/active_record/connection_adapters/mysql_adapter.rb</a>
<a href="../../files/activerecord/lib/active_record/connection_adapters/sqlite3_adapter_rb.html">activerecord/lib/active_record/connection_adapters/sqlite3_adapter.rb</a>
<a href="../../files/activerecord/lib/active_record/connection_adapters/postgresql_adapter_rb.html">activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb</a>
<a href="../../files/activerecord/lib/active_record/connection_adapters/abstract/connection_specification_rb.html">activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb</a>
<a href="../../files/activerecord/lib/active_record/base_rb.html">activerecord/lib/active_record/base.rb</a>
        </td>
      </tr>
    <tr>
      <td>Parent:</td>
      <td>
        <a href="../Object.html">
Object
         </a>
     </td>
   </tr>
         </table>
        </td>
        </tr>
      </table>
 <!-- banner header -->

  <div id="bodyContent">
      <div id="content">

  <div class="description"><p>
Active Record objects don&#8216;t specify their <a
href="Base.html#M002423">attributes</a> directly, but rather infer them
from the table definition with which they&#8216;re linked. Adding,
removing, and changing <a href="Base.html#M002423">attributes</a> and their
type is done directly in the database. Any change is instantly reflected in
the Active Record objects. The mapping that binds a given Active Record
class to a certain database table will happen automatically in most common
cases, but can be overwritten for the uncommon ones.
</p>
<p>
See the mapping rules in <a href="Base.html#M002361">table_name</a> and the
full example in <a href="../../files/README.html">files/README.html</a> for
more insight.
</p>
<h2>Creation</h2>
<p>
Active Records accept constructor parameters either in a <a
href="Base.html#M002432">hash</a> or as a block. The <a
href="Base.html#M002432">hash</a> method is especially useful when
you&#8216;re receiving the data from somewhere else, like an HTTP request.
It works like this:
</p>
<pre>
  user = User.new(:name =&gt; &quot;David&quot;, :occupation =&gt; &quot;Code Artist&quot;)
  user.name # =&gt; &quot;David&quot;
</pre>
<p>
You can also use block initialization:
</p>
<pre>
  user = User.new do |u|
    u.name = &quot;David&quot;
    u.occupation = &quot;Code Artist&quot;
  end
</pre>
<p>
And of course you can just <a href="Base.html#M002343">create</a> a bare
object and specify the <a href="Base.html#M002423">attributes</a> after the
fact:
</p>
<pre>
  user = User.new
  user.name = &quot;David&quot;
  user.occupation = &quot;Code Artist&quot;
</pre>
<h2>Conditions</h2>
<p>
Conditions can either be specified as a string, array, or <a
href="Base.html#M002432">hash</a> representing the WHERE-part of an SQL
statement. The array form is to be used when the condition input is tainted
and requires sanitization. The string form can be used for statements that
don&#8216;t involve tainted data. The <a href="Base.html#M002432">hash</a>
form works much like the array form, except only equality and range is
possible. Examples:
</p>
<pre>
  class User &lt; ActiveRecord::Base
    def self.authenticate_unsafely(user_name, password)
      find(:first, :conditions =&gt; &quot;user_name = '#{user_name}' AND password = '#{password}'&quot;)
    end

    def self.authenticate_safely(user_name, password)
      find(:first, :conditions =&gt; [ &quot;user_name = ? AND password = ?&quot;, user_name, password ])
    end

    def self.authenticate_safely_simply(user_name, password)
      find(:first, :conditions =&gt; { :user_name =&gt; user_name, :password =&gt; password })
    end
  end
</pre>
<p>
The <tt>authenticate_unsafely</tt> method inserts the parameters directly
into the query and is thus susceptible to SQL-injection attacks if the
<tt>user_name</tt> and <tt>password</tt> parameters come directly from an
HTTP request. The <tt>authenticate_safely</tt> and
<tt>authenticate_safely_simply</tt> both will sanitize the
<tt>user_name</tt> and <tt>password</tt> before inserting them in the
query, which will ensure that an attacker can&#8216;t escape the query and
fake the login (or worse).
</p>
<p>
When using multiple parameters in the conditions, it can easily become hard
to read exactly what the fourth or fifth question mark is supposed to
represent. In those cases, you can resort to named bind variables instead.
That&#8216;s done by replacing the question marks with symbols and
supplying a <a href="Base.html#M002432">hash</a> with values for the
matching symbol keys:
</p>
<pre>
  Company.find(:first, :conditions =&gt; [
    &quot;id = :id AND name = :name AND division = :division AND created_at &gt; :accounting_date&quot;,
    { :id =&gt; 3, :name =&gt; &quot;37signals&quot;, :division =&gt; &quot;First&quot;, :accounting_date =&gt; '2005-01-01' }
  ])
</pre>
<p>
Similarly, a simple <a href="Base.html#M002432">hash</a> without a
statement will generate conditions based on equality with the SQL AND
operator. For instance:
</p>
<pre>
  Student.find(:all, :conditions =&gt; { :first_name =&gt; &quot;Harvey&quot;, :status =&gt; 1 })
  Student.find(:all, :conditions =&gt; params[:student])
</pre>
<p>
A range may be used in the <a href="Base.html#M002432">hash</a> to use the
SQL BETWEEN operator:
</p>
<pre>
  Student.find(:all, :conditions =&gt; { :grade =&gt; 9..12 })
</pre>
<p>
An array may be used in the <a href="Base.html#M002432">hash</a> to use the
SQL IN operator:
</p>
<pre>
  Student.find(:all, :conditions =&gt; { :grade =&gt; [9,11,12] })
</pre>
<h2>Overwriting default accessors</h2>
<p>
All column values are automatically available through basic accessors on
the Active Record object, but sometimes you want to specialize this
behavior. This can be done by overwriting the default accessors (using the
same name as the attribute) and calling <tt>read_attribute(attr_name)</tt>
and <tt>write_attribute(attr_name, value)</tt> to actually change things.
Example:
</p>
<pre>
  class Song &lt; ActiveRecord::Base
    # Uses an integer of seconds to hold the length of the song

    def length=(minutes)
      write_attribute(:length, minutes.to_i * 60)
    end

    def length
      read_attribute(:length) / 60
    end
  end
</pre>
<p>
You can alternatively use <tt>self[:attribute]=(value)</tt> and
<tt>self[:attribute]</tt> instead of <tt>write_attribute(:attribute,
value)</tt> and <tt>read_attribute(:attribute)</tt> as a shorter form.
</p>
<h2>Attribute query methods</h2>
<p>
In addition to the basic accessors, query methods are also automatically
available on the Active Record object. Query methods allow you to test
whether an attribute value is present.
</p>
<p>
For example, an Active Record User with the <tt>name</tt> attribute has a
<tt>name?</tt> method that you can call to determine whether the user has a
name:
</p>
<pre>
  user = User.new(:name =&gt; &quot;David&quot;)
  user.name? # =&gt; true

  anonymous = User.new(:name =&gt; &quot;&quot;)
  anonymous.name? # =&gt; false
</pre>
<h2>Accessing <a href="Base.html#M002423">attributes</a> before they have been typecasted</h2>
<p>
Sometimes you want to be able to read the raw attribute data without having
the column-determined typecast run its course <a
href="Base.html#M002338">first</a>. That can be done by using the
<tt>&lt;attribute&gt;_before_type_cast</tt> accessors that <a
href="Base.html#M002340">all</a> <a href="Base.html#M002423">attributes</a>
have. For example, if your Account model has a <tt>balance</tt> attribute,
you can call <tt>account.balance_before_type_cast</tt> or
<tt>account.id_before_type_cast</tt>.
</p>
<p>
This is especially useful in validation situations where the user might
supply a string for an integer field and you want to display the original
string back in an error message. Accessing the attribute normally would
typecast the string to 0, which isn&#8216;t what you want.
</p>
<h2>Dynamic attribute-based finders</h2>
<p>
Dynamic attribute-based finders are a cleaner way of getting (and/or
creating) objects by simple queries without turning to SQL. They work by
appending the name of an attribute to <tt>find_by_</tt>,
<tt>find_last_by_</tt>, or <tt>find_all_by_</tt>, so you get finders like
<tt>Person.find_by_user_name</tt>, <tt>Person.find_all_by_last_name</tt>,
and <tt>Payment.find_by_transaction_id</tt>. So instead of writing
<tt>Person.find(:<a href="Base.html#M002338">first</a>, :conditions =&gt;
[&quot;user_name = ?&quot;, user_name])</tt>, you just do
<tt>Person.find_by_user_name(user_name)</tt>. And instead of writing
<tt>Person.find(:<a href="Base.html#M002340">all</a>, :conditions =&gt;
[&quot;last_name = ?&quot;, last_name])</tt>, you just do
<tt>Person.find_all_by_last_name(last_name)</tt>.
</p>
<p>
It&#8216;s also possible to use multiple <a
href="Base.html#M002423">attributes</a> in the same <a
href="Base.html#M002337">find</a> by separating them with
&quot;<em>and</em>&quot;, so you get finders like
<tt>Person.find_by_user_name_and_password</tt> or even
<tt>Payment.find_by_purchaser_and_state_and_country</tt>. So instead of
writing <tt>Person.find(:<a href="Base.html#M002338">first</a>, :conditions
=&gt; [&quot;user_name = ? AND password = ?&quot;, user_name,
password])</tt>, you just do
<tt>Person.find_by_user_name_and_password(user_name, password)</tt>.
</p>
<p>
It&#8216;s even possible to use <a href="Base.html#M002340">all</a> the
additional parameters to <a href="Base.html#M002337">find</a>. For example,
the full interface for <tt>Payment.find_all_by_amount</tt> is actually
<tt>Payment.find_all_by_amount(amount, options)</tt>. And the full
interface to <tt>Person.find_by_user_name</tt> is actually
<tt>Person.find_by_user_name(user_name, options)</tt>. So you could call
<tt>Payment.find_all_by_amount(50, :order =&gt;
&quot;created_on&quot;)</tt>. Also you may call
<tt>Payment.find_last_by_amount(amount, options)</tt> returning the <a
href="Base.html#M002339">last</a> record matching that amount and options.
</p>
<p>
The same dynamic finder style can be used to <a
href="Base.html#M002343">create</a> the object if it doesn&#8216;t already
exist. This dynamic finder is called with <tt>find_or_create_by_</tt> and
will return the object if it already exists and otherwise creates it, then
returns it. Protected <a href="Base.html#M002423">attributes</a>
won&#8216;t be set unless they are given in a block. For example:
</p>
<pre>
  # No 'Summer' tag exists
  Tag.find_or_create_by_name(&quot;Summer&quot;) # equal to Tag.create(:name =&gt; &quot;Summer&quot;)

  # Now the 'Summer' tag does exist
  Tag.find_or_create_by_name(&quot;Summer&quot;) # equal to Tag.find_by_name(&quot;Summer&quot;)

  # Now 'Bob' exist and is an 'admin'
  User.find_or_create_by_name('Bob', :age =&gt; 40) { |u| u.admin = true }
</pre>
<p>
Use the <tt>find_or_initialize_by_</tt> finder if you want to return a <a
href="Base.html#M002398">new</a> record without saving it <a
href="Base.html#M002338">first</a>. Protected <a
href="Base.html#M002423">attributes</a> won&#8216;t be set unless they are
given in a block. For example:
</p>
<pre>
  # No 'Winter' tag exists
  winter = Tag.find_or_initialize_by_name(&quot;Winter&quot;)
  winter.new_record? # true
</pre>
<p>
To <a href="Base.html#M002337">find</a> by a subset of the <a
href="Base.html#M002423">attributes</a> to be used for instantiating a <a
href="Base.html#M002398">new</a> object, pass a <a
href="Base.html#M002432">hash</a> instead of a list of parameters. For
example:
</p>
<pre>
  Tag.find_or_create_by_name(:name =&gt; &quot;rails&quot;, :creator =&gt; current_user)
</pre>
<p>
That will either <a href="Base.html#M002337">find</a> an existing tag named
&quot;rails&quot;, or <a href="Base.html#M002343">create</a> a <a
href="Base.html#M002398">new</a> one while setting the user that created
it.
</p>
<h2>Saving arrays, hashes, and other non-mappable objects in text <a href="Base.html#M002369">columns</a></h2>
<p>
Active Record can <a href="Base.html#M002359">serialize</a> any object in
text <a href="Base.html#M002369">columns</a> using YAML. To do so, you must
specify this with a call to the class method <tt><a
href="Base.html#M002359">serialize</a></tt>. This makes it possible to
store arrays, hashes, and other non-mappable objects without doing any
additional work. Example:
</p>
<pre>
  class User &lt; ActiveRecord::Base
    serialize :preferences
  end

  user = User.create(:preferences =&gt; { &quot;background&quot; =&gt; &quot;black&quot;, &quot;display&quot; =&gt; large })
  User.find(user.id).preferences # =&gt; { &quot;background&quot; =&gt; &quot;black&quot;, &quot;display&quot; =&gt; large }
</pre>
<p>
You can also specify a class option as the second parameter that&#8216;ll
raise an exception if a serialized object is retrieved as a descendant of a
class not in the hierarchy. Example:
</p>
<pre>
  class User &lt; ActiveRecord::Base
    serialize :preferences, Hash
  end

  user = User.create(:preferences =&gt; %w( one two three ))
  User.find(user.id).preferences    # raises SerializationTypeMismatch
</pre>
<h2>Single table inheritance</h2>
<p>
Active Record allows inheritance by storing the name of the class in a
column that by default is named &quot;type&quot; (can be changed by
overwriting <tt><a
href="Base.html#M002363">Base.inheritance_column</a></tt>). This means that
an inheritance looking like this:
</p>
<pre>
  class Company &lt; ActiveRecord::Base; end
  class Firm &lt; Company; end
  class Client &lt; Company; end
  class PriorityClient &lt; Client; end
</pre>
<p>
When you do <tt>Firm.create(:name =&gt; &quot;37signals&quot;)</tt>, this
record will be saved in the companies table with type = &quot;Firm&quot;.
You can then fetch this row again using <tt>Company.find(:<a
href="Base.html#M002338">first</a>, &quot;name =
&#8216;37signals&#8217;&quot;)</tt> and it will return a Firm object.
</p>
<p>
If you don&#8216;t have a type column defined in your table, single-table
inheritance won&#8216;t be triggered. In that case, it&#8216;ll work just
like normal subclasses with no special magic for differentiating between
them or reloading the right type with <a href="Base.html#M002337">find</a>.
</p>
<p>
Note, <a href="Base.html#M002340">all</a> the <a
href="Base.html#M002423">attributes</a> for <a
href="Base.html#M002340">all</a> the cases are kept in the same table. Read
more: <a
href="http://www.martinfowler.com/eaaCatalog/singleTableInheritance.html">www.martinfowler.com/eaaCatalog/singleTableInheritance.html</a>
</p>
<h2>Connection to multiple databases in different models</h2>
<p>
Connections are usually created through <a
href="Base.html#M002327">ActiveRecord::Base.establish_connection</a> and
retrieved by <a href="Base.html#M002326">ActiveRecord::Base.connection</a>.
All classes inheriting from <a href="Base.html">ActiveRecord::Base</a> will
use this <a href="Base.html#M002326">connection</a>. But you can also set a
class-specific <a href="Base.html#M002326">connection</a>. For example, if
Course is an <a href="Base.html">ActiveRecord::Base</a>, but resides in a
different database, you can just say <tt>Course.establish_connection</tt>
and Course and <a href="Base.html#M002340">all</a> of its subclasses will
use this <a href="Base.html#M002326">connection</a> instead.
</p>
<p>
This feature is implemented by keeping a <a
href="Base.html#M002326">connection</a> pool in <a
href="Base.html">ActiveRecord::Base</a> that is a Hash indexed by the
class. If a <a href="Base.html#M002326">connection</a> is requested, the <a
href="Base.html#M002334">retrieve_connection</a> method will go up the
class-hierarchy until a <a href="Base.html#M002326">connection</a> is found
in the <a href="Base.html#M002326">connection</a> pool.
</p>
<h2>Exceptions</h2>
<ul>
<li><a href="ActiveRecordError.html">ActiveRecordError</a> - Generic error
class and superclass of <a href="Base.html#M002340">all</a> other errors
raised by Active Record.

</li>
<li><a href="AdapterNotSpecified.html">AdapterNotSpecified</a> - The
configuration <a href="Base.html#M002432">hash</a> used in <tt><a
href="Base.html#M002327">establish_connection</a></tt> didn&#8216;t include
an <tt>:adapter</tt> key.

</li>
<li><a href="AdapterNotFound.html">AdapterNotFound</a> - The <tt>:adapter</tt>
key used in <tt><a href="Base.html#M002327">establish_connection</a></tt>
specified a non-existent adapter (or a bad spelling of an existing one).

</li>
<li><a href="AssociationTypeMismatch.html">AssociationTypeMismatch</a> - The
object assigned to the association wasn&#8216;t of the type specified in
the association definition.

</li>
<li><a href="SerializationTypeMismatch.html">SerializationTypeMismatch</a> -
The serialized object wasn&#8216;t of the class specified as the second
parameter.

</li>
<li><a href="ConnectionNotEstablished.html">ConnectionNotEstablished</a>+ - No
<a href="Base.html#M002326">connection</a> has been established. Use <tt><a
href="Base.html#M002327">establish_connection</a></tt> before querying.

</li>
<li><a href="RecordNotFound.html">RecordNotFound</a> - No record responded to
the <tt><a href="Base.html#M002337">find</a></tt> method. Either the row
with the given ID doesn&#8216;t exist or the row didn&#8216;t meet the
additional restrictions. Some <tt><a href="Base.html#M002337">find</a></tt>
calls do not raise this exception to signal nothing was found, please check
its documentation for further details.

</li>
<li><a href="StatementInvalid.html">StatementInvalid</a> - The database server
rejected the SQL statement. The precise error is added in the message.

</li>
<li><a
href="MultiparameterAssignmentErrors.html">MultiparameterAssignmentErrors</a>
- Collection of errors that occurred during a mass assignment using the
<tt><a href="Base.html#M002422">attributes=</a></tt> method. The
<tt>errors</tt> property of this exception contains an array of <a
href="AttributeAssignmentError.html">AttributeAssignmentError</a> objects
that should be inspected to determine which <a
href="Base.html#M002423">attributes</a> triggered the errors.

</li>
<li><a href="AttributeAssignmentError.html">AttributeAssignmentError</a> - An
error occurred while doing a mass assignment through the <tt><a
href="Base.html#M002422">attributes=</a></tt> method. You can <a
href="Base.html#M002377">inspect</a> the <tt>attribute</tt> property of the
exception object to determine which attribute triggered the error.

</li>
</ul>
<p>
<b>Note</b>: The <a href="Base.html#M002423">attributes</a> listed are
class-level <a href="Base.html#M002423">attributes</a> (accessible from
both the class and instance level). So it&#8216;s possible to assign a
logger to the class through <tt>Base.logger=</tt> which will then be used
by <a href="Base.html#M002340">all</a> instances in the current object
space.
</p>
</div>



  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="#M002430">==</a></li>
  <li><a href="#M002380">===</a></li>
  <li><a href="#M002420">[]</a></li>
  <li><a href="#M002421">[]=</a></li>
  <li><a href="#M002382">abstract_class?</a></li>
  <li><a href="#M002393">aggregate_mapping</a></li>
  <li><a href="#M002340">all</a></li>
  <li><a href="#M002328">allow_concurrency</a></li>
  <li><a href="#M002329">allow_concurrency=</a></li>
  <li><a href="#M002356">attr_accessible</a></li>
  <li><a href="#M002355">attr_protected</a></li>
  <li><a href="#M002357">attr_readonly</a></li>
  <li><a href="#M002425">attribute_for_inspect</a></li>
  <li><a href="#M002428">attribute_names</a></li>
  <li><a href="#M002426">attribute_present?</a></li>
  <li><a href="#M002423">attributes</a></li>
  <li><a href="#M002422">attributes=</a></li>
  <li><a href="#M002424">attributes_before_type_cast</a></li>
  <li><a href="#M002381">base_class</a></li>
  <li><a href="#M002409">becomes</a></li>
  <li><a href="#M002378">benchmark</a></li>
  <li><a href="#M002401">cache_key</a></li>
  <li><a href="#M002390">class_of_active_record_descendant</a></li>
  <li><a href="#M002408">clone</a></li>
  <li><a href="#M002429">column_for_attribute</a></li>
  <li><a href="#M002371">column_names</a></li>
  <li><a href="#M002369">columns</a></li>
  <li><a href="#M002370">columns_hash</a></li>
  <li><a href="#M002389">compute_type</a></li>
  <li><a href="#M002335">connected?</a></li>
  <li><a href="#M002332">connection</a></li>
  <li><a href="#M002326">connection</a></li>
  <li><a href="#M002333">connection_pool</a></li>
  <li><a href="#M002372">content_columns</a></li>
  <li><a href="#M002350">count_by_sql</a></li>
  <li><a href="#M002343">create</a></li>
  <li><a href="#M002415">decrement</a></li>
  <li><a href="#M002416">decrement!</a></li>
  <li><a href="#M002354">decrement_counter</a></li>
  <li><a href="#M002388">default_scope</a></li>
  <li><a href="#M002345">delete</a></li>
  <li><a href="#M002406">delete</a></li>
  <li><a href="#M002349">delete_all</a></li>
  <li><a href="#M002376">descends_from_active_record?</a></li>
  <li><a href="#M002346">destroy</a></li>
  <li><a href="#M002407">destroy</a></li>
  <li><a href="#M002348">destroy_all</a></li>
  <li><a href="#M002435">destroyed?</a></li>
  <li><a href="#M002431">eql?</a></li>
  <li><a href="#M002327">establish_connection</a></li>
  <li><a href="#M002342">exists?</a></li>
  <li><a href="#M002394">expand_hash_conditions_for_aggregates</a></li>
  <li><a href="#M002337">find</a></li>
  <li><a href="#M002341">find_by_sql</a></li>
  <li><a href="#M002338">first</a></li>
  <li><a href="#M002433">freeze</a></li>
  <li><a href="#M002434">frozen?</a></li>
  <li><a href="#M002427">has_attribute?</a></li>
  <li><a href="#M002432">hash</a></li>
  <li><a href="#M002374">human_attribute_name</a></li>
  <li><a href="#M002375">human_name</a></li>
  <li><a href="#M002399">id</a></li>
  <li><a href="#M002402">id=</a></li>
  <li><a href="#M002413">increment</a></li>
  <li><a href="#M002414">increment!</a></li>
  <li><a href="#M002353">increment_counter</a></li>
  <li><a href="#M002363">inheritance_column</a></li>
  <li><a href="#M002377">inspect</a></li>
  <li><a href="#M002438">inspect</a></li>
  <li><a href="#M002339">last</a></li>
  <li><a href="#M002385">merge_conditions</a></li>
  <li><a href="#M002398">new</a></li>
  <li><a href="#M002403">new_record?</a></li>
  <li><a href="#M002362">primary_key</a></li>
  <li><a href="#M002437">readonly!</a></li>
  <li><a href="#M002436">readonly?</a></li>
  <li><a href="#M002358">readonly_attributes</a></li>
  <li><a href="#M002419">reload</a></li>
  <li><a href="#M002336">remove_connection</a></li>
  <li><a href="#M002373">reset_column_information</a></li>
  <li><a href="#M002351">reset_counters</a></li>
  <li><a href="#M002383">respond_to?</a></li>
  <li><a href="#M002334">retrieve_connection</a></li>
  <li><a href="#M002397">sanitize_sql_array</a></li>
  <li><a href="#M002392">sanitize_sql_for_assignment</a></li>
  <li><a href="#M002391">sanitize_sql_for_conditions</a></li>
  <li><a href="#M002396">sanitize_sql_hash_for_assignment</a></li>
  <li><a href="#M002395">sanitize_sql_hash_for_conditions</a></li>
  <li><a href="#M002404">save</a></li>
  <li><a href="#M002405">save!</a></li>
  <li><a href="#M002359">serialize</a></li>
  <li><a href="#M002360">serialized_attributes</a></li>
  <li><a href="#M002366">set_inheritance_column</a></li>
  <li><a href="#M002365">set_primary_key</a></li>
  <li><a href="#M002367">set_sequence_name</a></li>
  <li><a href="#M002364">set_table_name</a></li>
  <li><a href="#M002379">silence</a></li>
  <li><a href="#M002384">sti_name</a></li>
  <li><a href="#M002368">table_exists?</a></li>
  <li><a href="#M002361">table_name</a></li>
  <li><a href="#M002400">to_param</a></li>
  <li><a href="#M002417">toggle</a></li>
  <li><a href="#M002418">toggle!</a></li>
  <li><a href="#M002344">update</a></li>
  <li><a href="#M002347">update_all</a></li>
  <li><a href="#M002410">update_attribute</a></li>
  <li><a href="#M002411">update_attributes</a></li>
  <li><a href="#M002412">update_attributes!</a></li>
  <li><a href="#M002352">update_counters</a></li>
  <li><a href="#M002330">verification_timeout</a></li>
  <li><a href="#M002331">verification_timeout=</a></li>
  <li><a href="#M002387">with_exclusive_scope</a></li>
  <li><a href="#M002386">with_scope</a></li>
  </ul>




  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">VALID_FIND_OPTIONS</td>
    <td>=</td>
    <td class="attr-value">[ :conditions, :include, :joins, :limit, :offset,                                :order, :select, :readonly, :group, :having, :from, :lock ]</td>
  </tr>
  </table>

  <div class="sectiontitle">Attributes</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class='attr-rw'>
[RW]
    </td>
    <td class='attr-name'>abstract_class</td>
    <td class='attr-desc'>
Set this to true if this is an abstract class (see <tt><a
href="Base.html#M002382">abstract_class?</a></tt>).

</td>
  </tr>
  </table>

<div class="sectiontitle">Public Class methods</div>
<div class="method">
  <div class="title">
    <a name="M002380"></a><b>===</b>(object)
  </div>
  <div class="description">
  <p>
Overwrite the default class equality method to provide support for
association proxies.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002380_source')" id="l_M002380_source">show source</a> ]</p>
  <div id="M002380_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1489</span>
1489:       <span class="ruby-keyword kw">def</span> <span class="ruby-operator">===</span>(<span class="ruby-identifier">object</span>)
1490:         <span class="ruby-identifier">object</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-keyword kw">self</span>)
1491:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002382"></a><b>abstract_class?</b>()
  </div>
  <div class="description">
  <p>
Returns whether this class is a base AR class. If A is a base class and B
descends from A, then B.base_class will return B.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002382_source')" id="l_M002382_source">show source</a> ]</p>
  <div id="M002382_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1505</span>
1505:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">abstract_class?</span>
1506:         <span class="ruby-keyword kw">defined?</span>(<span class="ruby-ivar">@abstract_class</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@abstract_class</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">true</span>
1507:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002340"></a><b>all</b>(*args)
  </div>
  <div class="description">
  <p>
This is an alias for <a href="Base.html#M002337">find</a>(:<a
href="Base.html#M002340">all</a>). You can pass in <a
href="Base.html#M002340">all</a> the same arguments to this method as you
can to <a href="Base.html#M002337">find</a>(:<a
href="Base.html#M002340">all</a>)
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002340_source')" id="l_M002340_source">show source</a> ]</p>
  <div id="M002340_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 638</span>
638:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">all</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
639:         <span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
640:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002328"></a><b>allow_concurrency</b>()
  </div>
  <div class="description">
  <p>
Deprecated and no longer has any effect.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002328_source')" id="l_M002328_source">show source</a> ]</p>
  <div id="M002328_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb, line 92</span>
92:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">allow_concurrency</span>
93:         <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Deprecation</span>.<span class="ruby-identifier">warn</span>(<span class="ruby-value str">&quot;ActiveRecord::Base.allow_concurrency has been deprecated and no longer has any effect. Please remove all references to allow_concurrency.&quot;</span>)
94:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002329"></a><b>allow_concurrency=</b>(flag)
  </div>
  <div class="description">
  <p>
Deprecated and no longer has any effect.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002329_source')" id="l_M002329_source">show source</a> ]</p>
  <div id="M002329_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb, line 97</span>
97:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">allow_concurrency=</span>(<span class="ruby-identifier">flag</span>)
98:         <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Deprecation</span>.<span class="ruby-identifier">warn</span>(<span class="ruby-value str">&quot;ActiveRecord::Base.allow_concurrency= has been deprecated and no longer has any effect. Please remove all references to allow_concurrency=.&quot;</span>)
99:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002356"></a><b>attr_accessible</b>(*attributes)
  </div>
  <div class="description">
  <p>
Specifies a white list of model <a href="Base.html#M002423">attributes</a>
that can be set via mass-assignment, such as <tt><a
href="Base.html#M002398">new</a>(<a
href="Base.html#M002423">attributes</a>)</tt>, <tt><a
href="Base.html#M002411">update_attributes</a>(<a
href="Base.html#M002423">attributes</a>)</tt>, or <tt><a
href="Base.html#M002422">attributes=</a>(<a
href="Base.html#M002423">attributes</a>)</tt>
</p>
<p>
This is the opposite of the <tt><a
href="Base.html#M002355">attr_protected</a></tt> macro: Mass-assignment
will only set <a href="Base.html#M002423">attributes</a> in this list, to
assign to the rest of <a href="Base.html#M002423">attributes</a> you can
use direct writer methods. This is meant to protect sensitive <a
href="Base.html#M002423">attributes</a> from being overwritten by malicious
users tampering with URLs or forms. If you&#8216;d rather start from an <a
href="Base.html#M002340">all</a>-open default and restrict <a
href="Base.html#M002423">attributes</a> as needed, have a look at <tt><a
href="Base.html#M002355">attr_protected</a></tt>.
</p>
<pre>
  class Customer &lt; ActiveRecord::Base
    attr_accessible :name, :nickname
  end

  customer = Customer.new(:name =&gt; &quot;David&quot;, :nickname =&gt; &quot;Dave&quot;, :credit_rating =&gt; &quot;Excellent&quot;)
  customer.credit_rating # =&gt; nil
  customer.attributes = { :name =&gt; &quot;Jolly fellow&quot;, :credit_rating =&gt; &quot;Superb&quot; }
  customer.credit_rating # =&gt; nil

  customer.credit_rating = &quot;Average&quot;
  customer.credit_rating # =&gt; &quot;Average&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002356_source')" id="l_M002356_source">show source</a> ]</p>
  <div id="M002356_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1086</span>
1086:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attr_accessible</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attributes</span>)
1087:         <span class="ruby-identifier">write_inheritable_attribute</span>(<span class="ruby-identifier">:attr_accessible</span>, <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:to_s</span>)) <span class="ruby-operator">+</span> (<span class="ruby-identifier">accessible_attributes</span> <span class="ruby-operator">||</span> []))
1088:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002355"></a><b>attr_protected</b>(*attributes)
  </div>
  <div class="description">
  <p>
Attributes named in this macro are protected from mass-assignment, such as
<tt><a href="Base.html#M002398">new</a>(<a
href="Base.html#M002423">attributes</a>)</tt>, <tt><a
href="Base.html#M002411">update_attributes</a>(<a
href="Base.html#M002423">attributes</a>)</tt>, or <tt><a
href="Base.html#M002422">attributes=</a>(<a
href="Base.html#M002423">attributes</a>)</tt>.
</p>
<p>
Mass-assignment to these <a href="Base.html#M002423">attributes</a> will
simply be ignored, to assign to them you can use direct writer methods.
This is meant to protect sensitive <a
href="Base.html#M002423">attributes</a> from being overwritten by malicious
users tampering with URLs or forms.
</p>
<pre>
  class Customer &lt; ActiveRecord::Base
    attr_protected :credit_rating
  end

  customer = Customer.new(&quot;name&quot; =&gt; David, &quot;credit_rating&quot; =&gt; &quot;Excellent&quot;)
  customer.credit_rating # =&gt; nil
  customer.attributes = { &quot;description&quot; =&gt; &quot;Jolly fellow&quot;, &quot;credit_rating&quot; =&gt; &quot;Superb&quot; }
  customer.credit_rating # =&gt; nil

  customer.credit_rating = &quot;Average&quot;
  customer.credit_rating # =&gt; &quot;Average&quot;
</pre>
<p>
To start from an <a href="Base.html#M002340">all</a>-closed default and
enable <a href="Base.html#M002423">attributes</a> as needed, have a look at
<tt><a href="Base.html#M002356">attr_accessible</a></tt>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002355_source')" id="l_M002355_source">show source</a> ]</p>
  <div id="M002355_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1053</span>
1053:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attr_protected</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attributes</span>)
1054:         <span class="ruby-identifier">write_inheritable_attribute</span>(<span class="ruby-identifier">:attr_protected</span>, <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:to_s</span>)) <span class="ruby-operator">+</span> (<span class="ruby-identifier">protected_attributes</span> <span class="ruby-operator">||</span> []))
1055:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002357"></a><b>attr_readonly</b>(*attributes)
  </div>
  <div class="description">
  <p>
Attributes listed as readonly can be set for a <a
href="Base.html#M002398">new</a> record, but will be ignored in database
updates afterwards.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002357_source')" id="l_M002357_source">show source</a> ]</p>
  <div id="M002357_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1096</span>
1096:        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attr_readonly</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attributes</span>)
1097:          <span class="ruby-identifier">write_inheritable_attribute</span>(<span class="ruby-identifier">:attr_readonly</span>, <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:to_s</span>)) <span class="ruby-operator">+</span> (<span class="ruby-identifier">readonly_attributes</span> <span class="ruby-operator">||</span> []))
1098:        <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002381"></a><b>base_class</b>()
  </div>
  <div class="description">
  <p>
Returns the base AR subclass that this class descends from. If A extends
AR::Base, A.base_class will return A. If B descends from A through some
arbitrarily deep hierarchy, B.base_class will return A.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002381_source')" id="l_M002381_source">show source</a> ]</p>
  <div id="M002381_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1496</span>
1496:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">base_class</span>
1497:         <span class="ruby-identifier">class_of_active_record_descendant</span>(<span class="ruby-keyword kw">self</span>)
1498:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002378"></a><b>benchmark</b>(title, log_level = Logger::DEBUG, use_silence = true) {|| ...}
  </div>
  <div class="description">
  <p>
Log and <a href="Base.html#M002378">benchmark</a> multiple statements in a
single block. Example:
</p>
<pre>
  Project.benchmark(&quot;Creating project&quot;) do
    project = Project.create(&quot;name&quot; =&gt; &quot;stuff&quot;)
    project.create_manager(&quot;name&quot; =&gt; &quot;David&quot;)
    project.milestones &lt;&lt; Milestone.find(:all)
  end
</pre>
<p>
The <a href="Base.html#M002378">benchmark</a> is only recorded if the
current level of the logger is less than or equal to the
<tt>log_level</tt>, which makes it easy to include benchmarking statements
in production software that will remain inexpensive because the <a
href="Base.html#M002378">benchmark</a> will only be conducted if the log
level is low enough.
</p>
<p>
The logging of the multiple statements is turned off unless
<tt>use_silence</tt> is set to false.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002378_source')" id="l_M002378_source">show source</a> ]</p>
  <div id="M002378_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1469</span>
1469:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">benchmark</span>(<span class="ruby-identifier">title</span>, <span class="ruby-identifier">log_level</span> = <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">DEBUG</span>, <span class="ruby-identifier">use_silence</span> = <span class="ruby-keyword kw">true</span>)
1470:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">logger</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">level</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">log_level</span>
1471:           <span class="ruby-identifier">result</span> = <span class="ruby-keyword kw">nil</span>
1472:           <span class="ruby-identifier">ms</span> = <span class="ruby-constant">Benchmark</span>.<span class="ruby-identifier">ms</span> { <span class="ruby-identifier">result</span> = <span class="ruby-identifier">use_silence</span> <span class="ruby-value">? </span><span class="ruby-identifier">silence</span> { <span class="ruby-keyword kw">yield</span> } <span class="ruby-operator">:</span> <span class="ruby-keyword kw">yield</span> }
1473:           <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">log_level</span>, <span class="ruby-value str">'%s (%.1fms)'</span> <span class="ruby-operator">%</span> [<span class="ruby-identifier">title</span>, <span class="ruby-identifier">ms</span>])
1474:           <span class="ruby-identifier">result</span>
1475:         <span class="ruby-keyword kw">else</span>
1476:           <span class="ruby-keyword kw">yield</span>
1477:         <span class="ruby-keyword kw">end</span>
1478:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002371"></a><b>column_names</b>()
  </div>
  <div class="description">
  <p>
Returns an array of column names as strings.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002371_source')" id="l_M002371_source">show source</a> ]</p>
  <div id="M002371_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1318</span>
1318:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">column_names</span>
1319:         <span class="ruby-ivar">@column_names</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">column</span><span class="ruby-operator">|</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">name</span> }
1320:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002369"></a><b>columns</b>()
  </div>
  <div class="description">
  <p>
Returns an array of column objects for the table associated with this
class.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002369_source')" id="l_M002369_source">show source</a> ]</p>
  <div id="M002369_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1304</span>
1304:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">columns</span>
1305:         <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-ivar">@columns</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@columns</span>
1306:           <span class="ruby-ivar">@columns</span> = <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">columns</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-node">&quot;#{name} Columns&quot;</span>)
1307:           <span class="ruby-ivar">@columns</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">column</span><span class="ruby-operator">|</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">primary</span> = <span class="ruby-identifier">column</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">primary_key</span> }
1308:         <span class="ruby-keyword kw">end</span>
1309:         <span class="ruby-ivar">@columns</span>
1310:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002370"></a><b>columns_hash</b>()
  </div>
  <div class="description">
  <p>
Returns a <a href="Base.html#M002432">hash</a> of column objects for the
table associated with this class.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002370_source')" id="l_M002370_source">show source</a> ]</p>
  <div id="M002370_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1313</span>
1313:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">columns_hash</span>
1314:         <span class="ruby-ivar">@columns_hash</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">inject</span>({}) { <span class="ruby-operator">|</span><span class="ruby-identifier">hash</span>, <span class="ruby-identifier">column</span><span class="ruby-operator">|</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">column</span>.<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">column</span>; <span class="ruby-identifier">hash</span> }
1315:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002335"></a><b>connected?</b>()
  </div>
  <div class="description">
  <p>
Returns true if <tt>ActiveRecord</tt> is connected.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002335_source')" id="l_M002335_source">show source</a> ]</p>
  <div id="M002335_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb, line 127</span>
127:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">connected?</span>
128:         <span class="ruby-identifier">connection_handler</span>.<span class="ruby-identifier">connected?</span>(<span class="ruby-keyword kw">self</span>)
129:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002332"></a><b>connection</b>()
  </div>
  <div class="description">
  <p>
Returns the <a href="Base.html#M002326">connection</a> currently associated
with the class. This can also be used to &quot;borrow&quot; the <a
href="Base.html#M002326">connection</a> to do database work unrelated to
any of the specific Active Records.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002332_source')" id="l_M002332_source">show source</a> ]</p>
  <div id="M002332_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb, line 114</span>
114:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">connection</span>
115:         <span class="ruby-identifier">retrieve_connection</span>
116:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002333"></a><b>connection_pool</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002333_source')" id="l_M002333_source">show source</a> ]</p>
  <div id="M002333_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb, line 118</span>
118:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">connection_pool</span>
119:         <span class="ruby-identifier">connection_handler</span>.<span class="ruby-identifier">retrieve_connection_pool</span>(<span class="ruby-keyword kw">self</span>)
120:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002372"></a><b>content_columns</b>()
  </div>
  <div class="description">
  <p>
Returns an array of column objects where the primary <a
href="Base.html#M002399">id</a>, <a href="Base.html#M002340">all</a> <a
href="Base.html#M002369">columns</a> ending in &quot;_id&quot; or
&quot;_count&quot;, and <a href="Base.html#M002369">columns</a> used for
single table inheritance have been removed.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002372_source')" id="l_M002372_source">show source</a> ]</p>
  <div id="M002372_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1324</span>
1324:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">content_columns</span>
1325:         <span class="ruby-ivar">@content_columns</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">reject</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">primary</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/(_id|_count)$/</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">inheritance_column</span> }
1326:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002350"></a><b>count_by_sql</b>(sql)
  </div>
  <div class="description">
  <p>
Returns the result of an SQL statement that should only include a COUNT(*)
in the SELECT part. The use of this method should be restricted to
complicated SQL queries that can&#8216;t be executed using the
ActiveRecord::Calculations class methods. Look into those before using
this.
</p>
<h4>Parameters</h4>
<ul>
<li><tt>sql</tt> - An SQL statement which should return a count query from the
database, see the example below.

</li>
</ul>
<h4>Examples</h4>
<pre>
  Product.count_by_sql &quot;SELECT COUNT(*) FROM sales s, customers c WHERE s.customer_id = c.id&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002350_source')" id="l_M002350_source">show source</a> ]</p>
  <div id="M002350_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 918</span>
918:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">count_by_sql</span>(<span class="ruby-identifier">sql</span>)
919:         <span class="ruby-identifier">sql</span> = <span class="ruby-identifier">sanitize_conditions</span>(<span class="ruby-identifier">sql</span>)
920:         <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_value</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-node">&quot;#{name} Count&quot;</span>).<span class="ruby-identifier">to_i</span>
921:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002343"></a><b>create</b>(attributes = nil) {|object| ...}
  </div>
  <div class="description">
  <p>
Creates an object (or multiple objects) and saves it to the database, if
validations pass. The resulting object is returned whether the object was
saved successfully to the database or not.
</p>
<p>
The <tt><a href="Base.html#M002423">attributes</a></tt> parameter can be
either be a Hash or an Array of Hashes. These Hashes describe the <a
href="Base.html#M002423">attributes</a> on the objects that are to be
created.
</p>
<h4>Examples</h4>
<pre>
  # Create a single new object
  User.create(:first_name =&gt; 'Jamie')

  # Create an Array of new objects
  User.create([{ :first_name =&gt; 'Jamie' }, { :first_name =&gt; 'Jeremy' }])

  # Create a single object and pass it into a block to set other attributes.
  User.create(:first_name =&gt; 'Jamie') do |u|
    u.is_admin = false
  end

  # Creating an Array of new objects using a block, where the block is executed for each object:
  User.create([{ :first_name =&gt; 'Jamie' }, { :first_name =&gt; 'Jeremy' }]) do |u|
    u.is_admin = false
  end
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002343_source')" id="l_M002343_source">show source</a> ]</p>
  <div id="M002343_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 721</span>
721:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create</span>(<span class="ruby-identifier">attributes</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
722:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
723:           <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">attr</span><span class="ruby-operator">|</span> <span class="ruby-identifier">create</span>(<span class="ruby-identifier">attr</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) }
724:         <span class="ruby-keyword kw">else</span>
725:           <span class="ruby-identifier">object</span> = <span class="ruby-identifier">new</span>(<span class="ruby-identifier">attributes</span>)
726:           <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">object</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
727:           <span class="ruby-identifier">object</span>.<span class="ruby-identifier">save</span>
728:           <span class="ruby-identifier">object</span>
729:         <span class="ruby-keyword kw">end</span>
730:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002354"></a><b>decrement_counter</b>(counter_name, id)
  </div>
  <div class="description">
  <p>
Decrement a number field by one, usually representing a count.
</p>
<p>
This works the same as <a href="Base.html#M002353">increment_counter</a>
but reduces the column value by 1 instead of increasing it.
</p>
<h4>Parameters</h4>
<ul>
<li><tt>counter_name</tt> - The name of the field that should be decremented.

</li>
<li><tt><a href="Base.html#M002399">id</a></tt> - The <a
href="Base.html#M002399">id</a> of the object that should be decremented.

</li>
</ul>
<h4>Examples</h4>
<pre>
  # Decrement the post_count column for the record with an id of 5
  DiscussionBoard.decrement_counter(:post_count, 5)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002354_source')" id="l_M002354_source">show source</a> ]</p>
  <div id="M002354_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1025</span>
1025:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decrement_counter</span>(<span class="ruby-identifier">counter_name</span>, <span class="ruby-identifier">id</span>)
1026:         <span class="ruby-identifier">update_counters</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">counter_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">-1</span>)
1027:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002345"></a><b>delete</b>(id)
  </div>
  <div class="description">
  <p>
Deletes the row with a primary key matching the <tt><a
href="Base.html#M002399">id</a></tt> argument, using a SQL <tt>DELETE</tt>
statement, and returns the number of rows deleted. Active Record objects
are not instantiated, so the object&#8216;s callbacks are not executed,
including any <tt>:dependent</tt> association options or <a
href="Observer.html">Observer</a> methods.
</p>
<p>
You can <a href="Base.html#M002345">delete</a> multiple rows at once by
passing an Array of <tt><a href="Base.html#M002399">id</a></tt>s.
</p>
<p>
Note: Although it is often much faster than the alternative, <tt><a
href="Base.html#M002346">destroy</a></tt>, skipping callbacks might bypass
business logic in your application that ensures referential integrity or
performs other essential jobs.
</p>
<h4>Examples</h4>
<pre>
  # Delete a single row
  Todo.delete(1)

  # Delete multiple rows
  Todo.delete([2,3,4])
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002345_source')" id="l_M002345_source">show source</a> ]</p>
  <div id="M002345_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 779</span>
779:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete</span>(<span class="ruby-identifier">id</span>)
780:         <span class="ruby-identifier">delete_all</span>([ <span class="ruby-node">&quot;#{connection.quote_column_name(primary_key)} IN (?)&quot;</span>, <span class="ruby-identifier">id</span> ])
781:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002349"></a><b>delete_all</b>(conditions = nil)
  </div>
  <div class="description">
  <p>
Deletes the records matching <tt>conditions</tt> without instantiating the
records <a href="Base.html#M002338">first</a>, and hence not calling the
<tt><a href="Base.html#M002346">destroy</a></tt> method nor invoking
callbacks. This is a single SQL DELETE statement that goes straight to the
database, much more efficient than <tt><a
href="Base.html#M002348">destroy_all</a></tt>. Be careful with relations
though, in particular <tt>:dependent</tt> rules defined on associations are
not honored. Returns the number of rows affected.
</p>
<h4>Parameters</h4>
<ul>
<li><tt>conditions</tt> - Conditions are specified the same way as with <tt><a
href="Base.html#M002337">find</a></tt> method.

</li>
</ul>
<h4>Example</h4>
<pre>
  Post.delete_all(&quot;person_id = 5 AND (category = 'Something' OR category = 'Else')&quot;)
  Post.delete_all([&quot;person_id = ? AND (category = ? OR category = ?)&quot;, 5, 'Something', 'Else'])
</pre>
<p>
Both calls <a href="Base.html#M002345">delete</a> the affected posts <a
href="Base.html#M002340">all</a> at once with a single DELETE statement. If
you need to <a href="Base.html#M002346">destroy</a> dependent associations
or call your <tt>before_*</tt> or <tt>after_destroy</tt> callbacks, use the
<tt><a href="Base.html#M002348">destroy_all</a></tt> method instead.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002349_source')" id="l_M002349_source">show source</a> ]</p>
  <div id="M002349_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 901</span>
901:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete_all</span>(<span class="ruby-identifier">conditions</span> = <span class="ruby-keyword kw">nil</span>)
902:         <span class="ruby-identifier">sql</span> = <span class="ruby-node">&quot;DELETE FROM #{quoted_table_name} &quot;</span>
903:         <span class="ruby-identifier">add_conditions!</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">conditions</span>, <span class="ruby-identifier">scope</span>(<span class="ruby-identifier">:find</span>))
904:         <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-node">&quot;#{name} Delete all&quot;</span>)
905:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002376"></a><b>descends_from_active_record?</b>()
  </div>
  <div class="description">
  <p>
True if this isn&#8216;t a concrete subclass needing a STI type condition.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002376_source')" id="l_M002376_source">show source</a> ]</p>
  <div id="M002376_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1420</span>
1420:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">descends_from_active_record?</span>
1421:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">abstract_class?</span>
1422:           <span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">descends_from_active_record?</span>
1423:         <span class="ruby-keyword kw">else</span>
1424:           <span class="ruby-identifier">superclass</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Base</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">columns_hash</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">inheritance_column</span>)
1425:         <span class="ruby-keyword kw">end</span>
1426:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002346"></a><b>destroy</b>(id)
  </div>
  <div class="description">
  <p>
Destroy an object (or multiple objects) that has the given <a
href="Base.html#M002399">id</a>, the object is instantiated <a
href="Base.html#M002338">first</a>, therefore <a
href="Base.html#M002340">all</a> callbacks and filters are fired off before
the object is deleted. This method is less efficient than
ActiveRecord#delete but allows cleanup methods and other actions to be run.
</p>
<p>
This essentially finds the object (or multiple objects) with the given <a
href="Base.html#M002399">id</a>, creates a <a
href="Base.html#M002398">new</a> object from the <a
href="Base.html#M002423">attributes</a>, and then calls <a
href="Base.html#M002346">destroy</a> on it.
</p>
<h4>Parameters</h4>
<ul>
<li><tt><a href="Base.html#M002399">id</a></tt> - Can be either an Integer or
an Array of Integers.

</li>
</ul>
<h4>Examples</h4>
<pre>
  # Destroy a single object
  Todo.destroy(1)

  # Destroy multiple objects
  todos = [1,2,3]
  Todo.destroy(todos)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002346_source')" id="l_M002346_source">show source</a> ]</p>
  <div id="M002346_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 802</span>
802:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">destroy</span>(<span class="ruby-identifier">id</span>)
803:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">id</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
804:           <span class="ruby-identifier">id</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">one_id</span><span class="ruby-operator">|</span> <span class="ruby-identifier">destroy</span>(<span class="ruby-identifier">one_id</span>) }
805:         <span class="ruby-keyword kw">else</span>
806:           <span class="ruby-identifier">find</span>(<span class="ruby-identifier">id</span>).<span class="ruby-identifier">destroy</span>
807:         <span class="ruby-keyword kw">end</span>
808:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002348"></a><b>destroy_all</b>(conditions = nil)
  </div>
  <div class="description">
  <p>
Destroys the records matching <tt>conditions</tt> by instantiating each
record and calling its <tt><a href="Base.html#M002346">destroy</a></tt>
method. Each object&#8216;s callbacks are executed (including
<tt>:dependent</tt> association options and
<tt>before_destroy</tt>/<tt>after_destroy</tt> <a
href="Observer.html">Observer</a> methods). Returns the collection of
objects that were destroyed; each will be frozen, to reflect that no
changes should be made (since they can&#8216;t be persisted).
</p>
<p>
Note: Instantiation, callback execution, and deletion of each record can be
time consuming when you&#8216;re removing many records at once. It
generates at least one SQL <tt>DELETE</tt> query per record (or possibly
more, to enforce your callbacks). If you want to <a
href="Base.html#M002345">delete</a> many rows quickly, without concern for
their associations or callbacks, use <tt><a
href="Base.html#M002349">delete_all</a></tt> instead.
</p>
<h4>Parameters</h4>
<ul>
<li><tt>conditions</tt> - A string, array, or <a
href="Base.html#M002432">hash</a> that specifies which records to <a
href="Base.html#M002346">destroy</a>. If omitted, <a
href="Base.html#M002340">all</a> records are destroyed. See the Conditions
section in the introduction to <a href="Base.html">ActiveRecord::Base</a>
for more information.

</li>
</ul>
<h4>Examples</h4>
<pre>
  Person.destroy_all(&quot;last_login &lt; '2004-04-04'&quot;)
  Person.destroy_all(:status =&gt; &quot;inactive&quot;)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002348_source')" id="l_M002348_source">show source</a> ]</p>
  <div id="M002348_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 880</span>
880:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">destroy_all</span>(<span class="ruby-identifier">conditions</span> = <span class="ruby-keyword kw">nil</span>)
881:         <span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">conditions</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">object</span><span class="ruby-operator">|</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">destroy</span> }
882:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002327"></a><b>establish_connection</b>(spec = nil)
  </div>
  <div class="description">
  <p>
Establishes the <a href="Base.html#M002326">connection</a> to the database.
Accepts a <a href="Base.html#M002432">hash</a> as input where the
<tt>:adapter</tt> key must be specified with the name of a database adapter
(in lower-case) example for regular databases (MySQL, Postgresql, etc):
</p>
<pre>
  ActiveRecord::Base.establish_connection(
    :adapter  =&gt; &quot;mysql&quot;,
    :host     =&gt; &quot;localhost&quot;,
    :username =&gt; &quot;myuser&quot;,
    :password =&gt; &quot;mypass&quot;,
    :database =&gt; &quot;somedatabase&quot;
  )
</pre>
<p>
Example for SQLite database:
</p>
<pre>
  ActiveRecord::Base.establish_connection(
    :adapter =&gt; &quot;sqlite&quot;,
    :database  =&gt; &quot;path/to/dbfile&quot;
  )
</pre>
<p>
Also accepts keys as strings (for parsing from YAML for example):
</p>
<pre>
  ActiveRecord::Base.establish_connection(
    &quot;adapter&quot; =&gt; &quot;sqlite&quot;,
    &quot;database&quot;  =&gt; &quot;path/to/dbfile&quot;
  )
</pre>
<p>
The exceptions <a href="AdapterNotSpecified.html">AdapterNotSpecified</a>,
<a href="AdapterNotFound.html">AdapterNotFound</a> and ArgumentError may be
returned on an error.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002327_source')" id="l_M002327_source">show source</a> ]</p>
  <div id="M002327_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb, line 51</span>
51:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">establish_connection</span>(<span class="ruby-identifier">spec</span> = <span class="ruby-keyword kw">nil</span>)
52:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">spec</span>
53:         <span class="ruby-keyword kw">when</span> <span class="ruby-keyword kw">nil</span>
54:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">AdapterNotSpecified</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">defined?</span> <span class="ruby-constant">RAILS_ENV</span>
55:           <span class="ruby-identifier">establish_connection</span>(<span class="ruby-constant">RAILS_ENV</span>)
56:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">ConnectionSpecification</span>
57:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">connection_handler</span>.<span class="ruby-identifier">establish_connection</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">spec</span>)
58:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Symbol</span>, <span class="ruby-constant">String</span>
59:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">configuration</span> = <span class="ruby-identifier">configurations</span>[<span class="ruby-identifier">spec</span>.<span class="ruby-identifier">to_s</span>]
60:             <span class="ruby-identifier">establish_connection</span>(<span class="ruby-identifier">configuration</span>)
61:           <span class="ruby-keyword kw">else</span>
62:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">AdapterNotSpecified</span>, <span class="ruby-node">&quot;#{spec} database is not configured&quot;</span>
63:           <span class="ruby-keyword kw">end</span>
64:         <span class="ruby-keyword kw">else</span>
65:           <span class="ruby-identifier">spec</span> = <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">symbolize_keys</span>
66:           <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">:adapter</span>) <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">raise</span> <span class="ruby-constant">AdapterNotSpecified</span>, <span class="ruby-value str">&quot;database configuration does not specify adapter&quot;</span> <span class="ruby-keyword kw">end</span>
67: 
68:           <span class="ruby-keyword kw">begin</span>
69:             <span class="ruby-identifier">require</span> <span class="ruby-value str">'rubygems'</span>
70:             <span class="ruby-identifier">gem</span> <span class="ruby-node">&quot;activerecord-#{spec[:adapter]}-adapter&quot;</span>
71:             <span class="ruby-identifier">require</span> <span class="ruby-node">&quot;active_record/connection_adapters/#{spec[:adapter]}_adapter&quot;</span>
72:           <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">LoadError</span>
73:             <span class="ruby-keyword kw">begin</span>
74:               <span class="ruby-identifier">require</span> <span class="ruby-node">&quot;active_record/connection_adapters/#{spec[:adapter]}_adapter&quot;</span>
75:             <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">LoadError</span>
76:               <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Please install the #{spec[:adapter]} adapter: `gem install activerecord-#{spec[:adapter]}-adapter` (#{$!})&quot;</span>
77:             <span class="ruby-keyword kw">end</span>
78:           <span class="ruby-keyword kw">end</span>
79: 
80:           <span class="ruby-identifier">adapter_method</span> = <span class="ruby-node">&quot;#{spec[:adapter]}_connection&quot;</span>
81:           <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">adapter_method</span>)
82:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">AdapterNotFound</span>, <span class="ruby-node">&quot;database configuration specifies nonexistent #{spec[:adapter]} adapter&quot;</span>
83:           <span class="ruby-keyword kw">end</span>
84: 
85:           <span class="ruby-identifier">remove_connection</span>
86:           <span class="ruby-identifier">establish_connection</span>(<span class="ruby-constant">ConnectionSpecification</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">spec</span>, <span class="ruby-identifier">adapter_method</span>))
87:       <span class="ruby-keyword kw">end</span>
88:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002342"></a><b>exists?</b>(id_or_conditions = {})
  </div>
  <div class="description">
  <p>
Returns true if a record exists in the table that matches the <tt><a
href="Base.html#M002399">id</a></tt> or conditions given, or false
otherwise. The argument can take five forms:
</p>
<ul>
<li>Integer - Finds the record with this primary key.

</li>
<li>String - Finds the record with a primary key corresponding to this string
(such as <tt>&#8216;5&#8216;</tt>).

</li>
<li>Array - Finds the record that matches these <tt><a
href="Base.html#M002337">find</a></tt>-style conditions (such as
<tt>[&#8216;color = ?&#8217;, &#8216;red&#8217;]</tt>).

</li>
<li>Hash - Finds the record that matches these <tt><a
href="Base.html#M002337">find</a></tt>-style conditions (such as
<tt>{:color =&gt; &#8216;red&#8217;}</tt>).

</li>
<li>No args - Returns false if the table is empty, true otherwise.

</li>
</ul>
<p>
For more information about specifying conditions as a Hash or Array, see
the Conditions section in the introduction to <a
href="Base.html">ActiveRecord::Base</a>.
</p>
<p>
Note: You can&#8216;t pass in a condition as a string (like <tt>name =
&#8216;Jamie&#8216;</tt>), since it would be sanitized and then queried
against the primary key column, like <tt><a href="Base.html#M002399">id</a>
= &#8216;name = \&#8217;Jamie\&#8217;&#8216;</tt>.
</p>
<h4>Examples</h4>
<pre>
  Person.exists?(5)
  Person.exists?('5')
  Person.exists?(:name =&gt; &quot;David&quot;)
  Person.exists?(['name LIKE ?', &quot;%#{query}%&quot;])
  Person.exists?
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002342_source')" id="l_M002342_source">show source</a> ]</p>
  <div id="M002342_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 693</span>
693:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">id_or_conditions</span> = {})
694:         <span class="ruby-identifier">find_initial</span>(
695:           <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{quoted_table_name}.#{primary_key}&quot;</span>,
696:           <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">expand_id_conditions</span>(<span class="ruby-identifier">id_or_conditions</span>)) <span class="ruby-operator">?</span> <span class="ruby-keyword kw">true</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">false</span>
697:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002337"></a><b>find</b>(*args)
  </div>
  <div class="description">
  <p>
Find operates with four different retrieval approaches:
</p>
<ul>
<li>Find by <a href="Base.html#M002399">id</a> - This can either be a specific
<a href="Base.html#M002399">id</a> (1), a list of ids (1, 5, 6), or an
array of ids ([5, 6, 10]). If no record can be found for <a
href="Base.html#M002340">all</a> of the listed ids, then <a
href="RecordNotFound.html">RecordNotFound</a> will be raised.

</li>
<li>Find <a href="Base.html#M002338">first</a> - This will return the <a
href="Base.html#M002338">first</a> record matched by the options used.
These options can either be specific conditions or merely an order. If no
record can be matched, <tt>nil</tt> is returned. Use <tt>Model.find(:<a
href="Base.html#M002338">first</a>, *args)</tt> or its shortcut
<tt>Model.first(*args)</tt>.

</li>
<li>Find <a href="Base.html#M002339">last</a> - This will return the <a
href="Base.html#M002339">last</a> record matched by the options used. These
options can either be specific conditions or merely an order. If no record
can be matched, <tt>nil</tt> is returned. Use <tt>Model.find(:<a
href="Base.html#M002339">last</a>, *args)</tt> or its shortcut
<tt>Model.last(*args)</tt>.

</li>
<li>Find <a href="Base.html#M002340">all</a> - This will return <a
href="Base.html#M002340">all</a> the records matched by the options used.
If no records are found, an empty array is returned. Use <tt>Model.find(:<a
href="Base.html#M002340">all</a>, *args)</tt> or its shortcut
<tt>Model.all(*args)</tt>.

</li>
</ul>
<p>
All approaches accept an options <a href="Base.html#M002432">hash</a> as
their <a href="Base.html#M002339">last</a> parameter.
</p>
<h4>Parameters</h4>
<ul>
<li><tt>:conditions</tt> - An SQL fragment like &quot;administrator = 1&quot;,
<tt>[ &quot;user_name = ?&quot;, username ]</tt>, or <tt>[&quot;user_name =
:user_name&quot;, { :user_name =&gt; user_name }]</tt>. See conditions in
the intro.

</li>
<li><tt>:order</tt> - An SQL fragment like &quot;created_at DESC, name&quot;.

</li>
<li><tt>:group</tt> - An attribute name by which the result should be grouped.
Uses the <tt>GROUP BY</tt> SQL-clause.

</li>
<li><tt>:having</tt> - Combined with +:group+ this can be used to filter the
records that a <tt>GROUP BY</tt> returns. Uses the <tt>HAVING</tt>
SQL-clause.

</li>
<li><tt>:limit</tt> - An integer determining the limit on the number of rows
that should be returned.

</li>
<li><tt>:offset</tt> - An integer determining the offset from where the rows
should be fetched. So at 5, it would skip rows 0 through 4.

</li>
<li><tt>:joins</tt> - Either an SQL fragment for additional joins like
&quot;LEFT JOIN comments ON comments.post_id = <a
href="Base.html#M002399">id</a>&quot; (rarely needed), named associations
in the same form used for the <tt>:include</tt> option, which will perform
an <tt>INNER JOIN</tt> on the associated table(s), or an array containing a
mixture of both strings and named associations. If the value is a string,
then the records will be returned read-only since they will have <a
href="Base.html#M002423">attributes</a> that do not correspond to the
table&#8216;s <a href="Base.html#M002369">columns</a>. Pass <tt>:readonly
=&gt; false</tt> to override.

</li>
<li><tt>:include</tt> - Names associations that should be loaded alongside. The
symbols named refer to already defined associations. See eager loading
under Associations.

</li>
<li><tt>:select</tt> - By default, this is &quot;*&quot; as in &quot;SELECT *
FROM&quot;, but can be changed if you, for example, want to do a join but
not include the joined <a href="Base.html#M002369">columns</a>. Takes a
string with the SELECT SQL fragment (e.g. &quot;<a
href="Base.html#M002399">id</a>, name&quot;).

</li>
<li><tt>:from</tt> - By default, this is the table name of the class, but can
be changed to an alternate table name (or even the name of a database
view).

</li>
<li><tt>:readonly</tt> - Mark the returned records read-only so they cannot be
saved or updated.

</li>
<li><tt>:lock</tt> - An SQL fragment like &quot;FOR UPDATE&quot; or &quot;LOCK
IN SHARE MODE&quot;. <tt>:lock =&gt; true</tt> gives <a
href="Base.html#M002326">connection</a>&#8216;s default exclusive lock,
usually &quot;FOR UPDATE&quot;.

</li>
</ul>
<h4>Examples</h4>
<pre>
  # find by id
  Person.find(1)       # returns the object for ID = 1
  Person.find(1, 2, 6) # returns an array for objects with IDs in (1, 2, 6)
  Person.find([7, 17]) # returns an array for objects with IDs in (7, 17)
  Person.find([1])     # returns an array for the object with ID = 1
  Person.find(1, :conditions =&gt; &quot;administrator = 1&quot;, :order =&gt; &quot;created_on DESC&quot;)
</pre>
<p>
Note that returned records may not be in the same order as the ids you
provide since database rows are unordered. Give an explicit <tt>:order</tt>
to ensure the results are sorted.
</p>
<h4>Examples</h4>
<pre>
  # find first
  Person.find(:first) # returns the first object fetched by SELECT * FROM people
  Person.find(:first, :conditions =&gt; [ &quot;user_name = ?&quot;, user_name])
  Person.find(:first, :conditions =&gt; [ &quot;user_name = :u&quot;, { :u =&gt; user_name }])
  Person.find(:first, :order =&gt; &quot;created_on DESC&quot;, :offset =&gt; 5)

  # find last
  Person.find(:last) # returns the last object fetched by SELECT * FROM people
  Person.find(:last, :conditions =&gt; [ &quot;user_name = ?&quot;, user_name])
  Person.find(:last, :order =&gt; &quot;created_on DESC&quot;, :offset =&gt; 5)

  # find all
  Person.find(:all) # returns an array of objects for all the rows fetched by SELECT * FROM people
  Person.find(:all, :conditions =&gt; [ &quot;category IN (?)&quot;, categories], :limit =&gt; 50)
  Person.find(:all, :conditions =&gt; { :friends =&gt; [&quot;Bob&quot;, &quot;Steve&quot;, &quot;Fred&quot;] }
  Person.find(:all, :offset =&gt; 10, :limit =&gt; 10)
  Person.find(:all, :include =&gt; [ :account, :friends ])
  Person.find(:all, :group =&gt; &quot;category&quot;)
</pre>
<p>
Example for <a href="Base.html#M002337">find</a> with a lock: Imagine two
concurrent transactions: each will read <tt>person.visits == 2</tt>, add 1
to it, and <a href="Base.html#M002404">save</a>, resulting in two saves of
<tt>person.visits = 3</tt>. By locking the row, the second transaction has
to wait until the <a href="Base.html#M002338">first</a> is finished; we get
the expected <tt>person.visits == 4</tt>.
</p>
<pre>
  Person.transaction do
    person = Person.find(1, :lock =&gt; true)
    person.visits += 1
    person.save!
  end
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002337_source')" id="l_M002337_source">show source</a> ]</p>
  <div id="M002337_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 611</span>
611:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
612:         <span class="ruby-identifier">options</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">extract_options!</span>
613:         <span class="ruby-identifier">validate_find_options</span>(<span class="ruby-identifier">options</span>)
614:         <span class="ruby-identifier">set_readonly_option!</span>(<span class="ruby-identifier">options</span>)
615: 
616:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>
617:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:first</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">find_initial</span>(<span class="ruby-identifier">options</span>)
618:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:last</span>  <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">find_last</span>(<span class="ruby-identifier">options</span>)
619:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:all</span>   <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">find_every</span>(<span class="ruby-identifier">options</span>)
620:           <span class="ruby-keyword kw">else</span>             <span class="ruby-identifier">find_from_ids</span>(<span class="ruby-identifier">args</span>, <span class="ruby-identifier">options</span>)
621:         <span class="ruby-keyword kw">end</span>
622:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002341"></a><b>find_by_sql</b>(sql)
  </div>
  <div class="description">
  <p>
Executes a custom SQL query against your database and returns <a
href="Base.html#M002340">all</a> the results. The results will be returned
as an array with <a href="Base.html#M002369">columns</a> requested
encapsulated as <a href="Base.html#M002423">attributes</a> of the model you
call this method from. If you call <tt>Product.find_by_sql</tt> then the
results will be returned in a Product object with the <a
href="Base.html#M002423">attributes</a> you specified in the SQL query.
</p>
<p>
If you call a complicated SQL query which spans multiple tables the <a
href="Base.html#M002369">columns</a> specified by the SELECT will be <a
href="Base.html#M002423">attributes</a> of the model, whether or not they
are <a href="Base.html#M002369">columns</a> of the corresponding table.
</p>
<p>
The <tt>sql</tt> parameter is a full SQL query as a string. It will be
called as is, there will be no database agnostic conversions performed.
This should be a <a href="Base.html#M002339">last</a> resort because using,
for example, MySQL specific terms will lock you to using that particular
database engine or require you to change your call if you switch engines.
</p>
<h4>Examples</h4>
<pre>
  # A simple SQL query spanning multiple tables
  Post.find_by_sql &quot;SELECT p.title, c.author FROM posts p, comments c WHERE p.id = c.post_id&quot;
  &gt; [#&lt;Post:0x36bff9c @attributes={&quot;title&quot;=&gt;&quot;Ruby Meetup&quot;, &quot;first_name&quot;=&gt;&quot;Quentin&quot;}&gt;, ...]

  # You can use the same string replacement techniques as you can with ActiveRecord#find
  Post.find_by_sql [&quot;SELECT title FROM posts WHERE author = ? AND created &gt; ?&quot;, author_id, start_date]
  &gt; [#&lt;Post:0x36bff9c @attributes={&quot;first_name&quot;=&gt;&quot;The Cheap Man Buys Twice&quot;}&gt;, ...]
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002341_source')" id="l_M002341_source">show source</a> ]</p>
  <div id="M002341_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 664</span>
664:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_by_sql</span>(<span class="ruby-identifier">sql</span>)
665:         <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_all</span>(<span class="ruby-identifier">sanitize_sql</span>(<span class="ruby-identifier">sql</span>), <span class="ruby-node">&quot;#{name} Load&quot;</span>).<span class="ruby-identifier">collect!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">record</span><span class="ruby-operator">|</span> <span class="ruby-identifier">instantiate</span>(<span class="ruby-identifier">record</span>) }
666:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002338"></a><b>first</b>(*args)
  </div>
  <div class="description">
  <p>
A convenience wrapper for <tt><a href="Base.html#M002337">find</a>(:<a
href="Base.html#M002338">first</a>, *args)</tt>. You can pass in <a
href="Base.html#M002340">all</a> the same arguments to this method as you
can to <tt><a href="Base.html#M002337">find</a>(:<a
href="Base.html#M002338">first</a>)</tt>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002338_source')" id="l_M002338_source">show source</a> ]</p>
  <div id="M002338_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 626</span>
626:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">first</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
627:         <span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
628:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002374"></a><b>human_attribute_name</b>(attribute_key_name, options = {})
  </div>
  <div class="description">
  <p>
Transforms attribute key names into a more humane format, such as
&quot;First name&quot; instead of &quot;first_name&quot;. Example:
</p>
<pre>
  Person.human_attribute_name(&quot;first_name&quot;) # =&gt; &quot;First name&quot;
</pre>
<p>
This used to be depricated in favor of humanize, but is now preferred,
because it automatically uses the <a href="../I18n.html">I18n</a> module
now. Specify <tt>options</tt> with additional translating options.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002374_source')" id="l_M002374_source">show source</a> ]</p>
  <div id="M002374_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1396</span>
1396:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">human_attribute_name</span>(<span class="ruby-identifier">attribute_key_name</span>, <span class="ruby-identifier">options</span> = {})
1397:         <span class="ruby-identifier">defaults</span> = <span class="ruby-identifier">self_and_descendants_from_active_record</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">klass</span><span class="ruby-operator">|</span>
1398:           <span class="ruby-node">&quot;#{klass.name.underscore}.#{attribute_key_name}&quot;</span><span class="ruby-node">&quot;#{klass.name.underscore}.#{attribute_key_name}&quot;</span>
1399:         <span class="ruby-keyword kw">end</span>
1400:         <span class="ruby-identifier">defaults</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:default</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:default</span>]
1401:         <span class="ruby-identifier">defaults</span>.<span class="ruby-identifier">flatten!</span>
1402:         <span class="ruby-identifier">defaults</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">attribute_key_name</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">humanize</span>
1403:         <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:count</span>] <span class="ruby-operator">||=</span> <span class="ruby-value">1</span>
1404:         <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">translate</span>(<span class="ruby-identifier">defaults</span>.<span class="ruby-identifier">shift</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:default</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">defaults</span>, <span class="ruby-identifier">:scope</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:activerecord</span>, <span class="ruby-identifier">:attributes</span>]))
1405:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002375"></a><b>human_name</b>(options = {})
  </div>
  <div class="description">
  <p>
Transform the modelname into a more humane format, using <a
href="../I18n.html">I18n</a>. Defaults to the basic humanize method.
Default scope of the translation is activerecord.models Specify
<tt>options</tt> with additional translating options.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002375_source')" id="l_M002375_source">show source</a> ]</p>
  <div id="M002375_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1411</span>
1411:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">human_name</span>(<span class="ruby-identifier">options</span> = {})
1412:         <span class="ruby-identifier">defaults</span> = <span class="ruby-identifier">self_and_descendants_from_active_record</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">klass</span><span class="ruby-operator">|</span>
1413:           <span class="ruby-node">&quot;#{klass.name.underscore}&quot;</span><span class="ruby-node">&quot;#{klass.name.underscore}&quot;</span>
1414:         <span class="ruby-keyword kw">end</span> 
1415:         <span class="ruby-identifier">defaults</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">humanize</span>
1416:         <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">translate</span>(<span class="ruby-identifier">defaults</span>.<span class="ruby-identifier">shift</span>, {<span class="ruby-identifier">:scope</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:activerecord</span>, <span class="ruby-identifier">:models</span>], <span class="ruby-identifier">:count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:default</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">defaults</span>}.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">options</span>))
1417:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002353"></a><b>increment_counter</b>(counter_name, id)
  </div>
  <div class="description">
  <p>
Increment a number field by one, usually representing a count.
</p>
<p>
This is used for caching aggregate values, so that they don&#8216;t need to
be computed every time. For example, a DiscussionBoard may cache post_count
and comment_count otherwise every time the board is shown it would have to
run an SQL query to <a href="Base.html#M002337">find</a> how many posts and
comments there are.
</p>
<h4>Parameters</h4>
<ul>
<li><tt>counter_name</tt> - The name of the field that should be incremented.

</li>
<li><tt><a href="Base.html#M002399">id</a></tt> - The <a
href="Base.html#M002399">id</a> of the object that should be incremented.

</li>
</ul>
<h4>Examples</h4>
<pre>
  # Increment the post_count column for the record with an id of 5
  DiscussionBoard.increment_counter(:post_count, 5)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002353_source')" id="l_M002353_source">show source</a> ]</p>
  <div id="M002353_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1008</span>
1008:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">increment_counter</span>(<span class="ruby-identifier">counter_name</span>, <span class="ruby-identifier">id</span>)
1009:         <span class="ruby-identifier">update_counters</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">counter_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>)
1010:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002363"></a><b>inheritance_column</b>()
  </div>
  <div class="description">
  <p>
Defines the column name for use with single table inheritance &#8212; can
be set in subclasses like so: self.inheritance_column = &quot;type_id&quot;
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002363_source')" id="l_M002363_source">show source</a> ]</p>
  <div id="M002363_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1216</span>
1216:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inheritance_column</span>
1217:         <span class="ruby-ivar">@inheritance_column</span> <span class="ruby-operator">||=</span> <span class="ruby-value str">&quot;type&quot;</span>.<span class="ruby-identifier">freeze</span>
1218:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002377"></a><b>inspect</b>()
  </div>
  <div class="description">
  <p>
Returns a string like &#8216;Post <a
href="Base.html#M002399">id</a>:integer, title:string, body:text&#8216;
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002377_source')" id="l_M002377_source">show source</a> ]</p>
  <div id="M002377_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1434</span>
1434:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect</span>
1435:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Base</span>
1436:           <span class="ruby-keyword kw">super</span>
1437:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">abstract_class?</span>
1438:           <span class="ruby-node">&quot;#{super}(abstract)&quot;</span>
1439:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">table_exists?</span>
1440:           <span class="ruby-identifier">attr_list</span> = <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{c.name}: #{c.type}&quot;</span> } <span class="ruby-operator">*</span> <span class="ruby-value str">', '</span>
1441:           <span class="ruby-node">&quot;#{super}(#{attr_list})&quot;</span>
1442:         <span class="ruby-keyword kw">else</span>
1443:           <span class="ruby-node">&quot;#{super}(Table doesn't exist)&quot;</span>
1444:         <span class="ruby-keyword kw">end</span>
1445:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002339"></a><b>last</b>(*args)
  </div>
  <div class="description">
  <p>
A convenience wrapper for <tt><a href="Base.html#M002337">find</a>(:<a
href="Base.html#M002339">last</a>, *args)</tt>. You can pass in <a
href="Base.html#M002340">all</a> the same arguments to this method as you
can to <tt><a href="Base.html#M002337">find</a>(:<a
href="Base.html#M002339">last</a>)</tt>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002339_source')" id="l_M002339_source">show source</a> ]</p>
  <div id="M002339_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 632</span>
632:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">last</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
633:         <span class="ruby-identifier">find</span>(<span class="ruby-identifier">:last</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
634:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002385"></a><b>merge_conditions</b>(*conditions)
  </div>
  <div class="description">
  <p>
Merges conditions so that the result is a valid <tt>condition</tt>
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002385_source')" id="l_M002385_source">show source</a> ]</p>
  <div id="M002385_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1524</span>
1524:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">merge_conditions</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">conditions</span>)
1525:         <span class="ruby-identifier">segments</span> = []
1526: 
1527:         <span class="ruby-identifier">conditions</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">condition</span><span class="ruby-operator">|</span>
1528:           <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">condition</span>.<span class="ruby-identifier">blank?</span>
1529:             <span class="ruby-identifier">sql</span> = <span class="ruby-identifier">sanitize_sql</span>(<span class="ruby-identifier">condition</span>)
1530:             <span class="ruby-identifier">segments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">sql</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">sql</span>.<span class="ruby-identifier">blank?</span>
1531:           <span class="ruby-keyword kw">end</span>
1532:         <span class="ruby-keyword kw">end</span>
1533: 
1534:         <span class="ruby-node">&quot;(#{segments.join(') AND (')})&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">segments</span>.<span class="ruby-identifier">empty?</span>
1535:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002398"></a><b>new</b>(attributes = nil) {|self if block_given?| ...}
  </div>
  <div class="description">
  <p>
New objects can be instantiated as either empty (pass no construction
parameter) or pre-set with <a href="Base.html#M002423">attributes</a> but
not yet saved (pass a <a href="Base.html#M002432">hash</a> with key names
matching the associated table column names). In both instances, valid
attribute keys are determined by the column names of the associated table
&#8212; hence you can&#8216;t have <a
href="Base.html#M002423">attributes</a> that aren&#8216;t part of the table
<a href="Base.html#M002369">columns</a>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002398_source')" id="l_M002398_source">show source</a> ]</p>
  <div id="M002398_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2484</span>
2484:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">attributes</span> = <span class="ruby-keyword kw">nil</span>)
2485:         <span class="ruby-ivar">@attributes</span> = <span class="ruby-identifier">attributes_from_column_definition</span>
2486:         <span class="ruby-ivar">@attributes_cache</span> = {}
2487:         <span class="ruby-ivar">@new_record</span> = <span class="ruby-keyword kw">true</span>
2488:         <span class="ruby-identifier">ensure_proper_type</span>
2489:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">nil?</span>
2490:         <span class="ruby-identifier">assign_attributes</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:scope</span>, <span class="ruby-identifier">:create</span>)) <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:scoped?</span>, <span class="ruby-identifier">:create</span>)
2491:         <span class="ruby-identifier">result</span> = <span class="ruby-keyword kw">yield</span> <span class="ruby-keyword kw">self</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
2492:         <span class="ruby-identifier">callback</span>(<span class="ruby-identifier">:after_initialize</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">respond_to_without_attributes?</span>(<span class="ruby-identifier">:after_initialize</span>)
2493:         <span class="ruby-identifier">result</span>
2494:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002362"></a><b>primary_key</b>()
  </div>
  <div class="description">
  <p>
Defines the primary key field &#8212; can be overridden in subclasses.
Overwriting will negate any effect of the primary_key_prefix_type setting,
though.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002362_source')" id="l_M002362_source">show source</a> ]</p>
  <div id="M002362_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1189</span>
1189:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">primary_key</span>
1190:         <span class="ruby-identifier">reset_primary_key</span>
1191:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002358"></a><b>readonly_attributes</b>()
  </div>
  <div class="description">
  <p>
Returns an array of <a href="Base.html#M002340">all</a> the <a
href="Base.html#M002423">attributes</a> that have been specified as
readonly.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002358_source')" id="l_M002358_source">show source</a> ]</p>
  <div id="M002358_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1101</span>
1101:        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">readonly_attributes</span>
1102:          <span class="ruby-identifier">read_inheritable_attribute</span>(<span class="ruby-identifier">:attr_readonly</span>)
1103:        <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002336"></a><b>remove_connection</b>(klass = self)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002336_source')" id="l_M002336_source">show source</a> ]</p>
  <div id="M002336_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb, line 131</span>
131:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_connection</span>(<span class="ruby-identifier">klass</span> = <span class="ruby-keyword kw">self</span>)
132:         <span class="ruby-identifier">connection_handler</span>.<span class="ruby-identifier">remove_connection</span>(<span class="ruby-identifier">klass</span>)
133:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002373"></a><b>reset_column_information</b>()
  </div>
  <div class="description">
  <p>
Resets <a href="Base.html#M002340">all</a> the cached information about <a
href="Base.html#M002369">columns</a>, which will cause them to be reloaded
on the next request.
</p>
<p>
The most common usage pattern for this method is probably in a migration,
when just after creating a table you want to populate it with some default
values, eg:
</p>
<pre>
 class CreateJobLevels &lt; ActiveRecord::Migration
   def self.up
     create_table :job_levels do |t|
       t.integer :id
       t.string :name

       t.timestamps
     end

     JobLevel.reset_column_information
     %w{assistant executive manager director}.each do |type|
       JobLevel.create(:name =&gt; type)
     end
   end

   def self.down
     drop_table :job_levels
   end
 end
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002373_source')" id="l_M002373_source">show source</a> ]</p>
  <div id="M002373_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1368</span>
1368:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reset_column_information</span>
1369:         <span class="ruby-identifier">generated_methods</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span> <span class="ruby-identifier">undef_method</span>(<span class="ruby-identifier">name</span>) }
1370:         <span class="ruby-ivar">@column_names</span> = <span class="ruby-ivar">@columns</span> = <span class="ruby-ivar">@columns_hash</span> = <span class="ruby-ivar">@content_columns</span> = <span class="ruby-ivar">@dynamic_methods_hash</span> = <span class="ruby-ivar">@generated_methods</span> = <span class="ruby-ivar">@inheritance_column</span> = <span class="ruby-keyword kw">nil</span>
1371:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002351"></a><b>reset_counters</b>(id, *counters)
  </div>
  <div class="description">
  <p>
Resets one or more counter caches to their correct value using an SQL count
query. This is useful when adding <a href="Base.html#M002398">new</a>
counter caches, or if the counter has been corrupted or modified directly
by SQL.
</p>
<h4>Parameters</h4>
<ul>
<li><tt><a href="Base.html#M002399">id</a></tt> - The <a
href="Base.html#M002399">id</a> of the object you wish to reset a counter
on.

</li>
<li><tt>counters</tt> - One or more counter names to reset

</li>
</ul>
<h4>Examples</h4>
<pre>
  # For Post with id #1 records reset the comments_count
  Post.reset_counters(1, :comments)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002351_source')" id="l_M002351_source">show source</a> ]</p>
  <div id="M002351_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 936</span>
936:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reset_counters</span>(<span class="ruby-identifier">id</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">counters</span>)
937:         <span class="ruby-identifier">object</span> = <span class="ruby-identifier">find</span>(<span class="ruby-identifier">id</span>)
938:         <span class="ruby-identifier">counters</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">association</span><span class="ruby-operator">|</span>
939:           <span class="ruby-identifier">child_class</span> = <span class="ruby-identifier">reflect_on_association</span>(<span class="ruby-identifier">association</span>.<span class="ruby-identifier">to_sym</span>).<span class="ruby-identifier">klass</span>
940:           <span class="ruby-identifier">belongs_name</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">demodulize</span>.<span class="ruby-identifier">underscore</span>.<span class="ruby-identifier">to_sym</span>
941:           <span class="ruby-identifier">counter_name</span> = <span class="ruby-identifier">child_class</span>.<span class="ruby-identifier">reflect_on_association</span>(<span class="ruby-identifier">belongs_name</span>).<span class="ruby-identifier">counter_cache_column</span>
942:           <span class="ruby-identifier">value</span> = <span class="ruby-identifier">object</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">association</span>).<span class="ruby-identifier">count</span>
943: 
944:           <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">update</span>(<span class="ruby-value str">&quot;UPDATE \#{quoted_table_name}\nSET \#{connection.quote_column_name(counter_name)} = \#{value}\nWHERE \#{connection.quote_column_name(primary_key)} = \#{quote_value(object.id)}\n&quot;</span>, <span class="ruby-node">&quot;#{name} UPDATE&quot;</span>)
945:         <span class="ruby-keyword kw">end</span>
946:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span>
947:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002383"></a><b>respond_to?</b>(method_id, include_private = false)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002383_source')" id="l_M002383_source">show source</a> ]</p>
  <div id="M002383_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1509</span>
1509:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">method_id</span>, <span class="ruby-identifier">include_private</span> = <span class="ruby-keyword kw">false</span>)
1510:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">match</span> = <span class="ruby-constant">DynamicFinderMatch</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">method_id</span>)
1511:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">all_attributes_exists?</span>(<span class="ruby-identifier">match</span>.<span class="ruby-identifier">attribute_names</span>)
1512:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">match</span> = <span class="ruby-constant">DynamicScopeMatch</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">method_id</span>)
1513:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">all_attributes_exists?</span>(<span class="ruby-identifier">match</span>.<span class="ruby-identifier">attribute_names</span>)
1514:         <span class="ruby-keyword kw">end</span>
1515: 
1516:         <span class="ruby-keyword kw">super</span>
1517:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002334"></a><b>retrieve_connection</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002334_source')" id="l_M002334_source">show source</a> ]</p>
  <div id="M002334_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb, line 122</span>
122:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">retrieve_connection</span>
123:         <span class="ruby-identifier">connection_handler</span>.<span class="ruby-identifier">retrieve_connection</span>(<span class="ruby-keyword kw">self</span>)
124:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002359"></a><b>serialize</b>(attr_name, class_name = Object)
  </div>
  <div class="description">
  <p>
If you have an attribute that needs to be saved to the database as an
object, and retrieved as the same object, then specify the name of that
attribute using this method and it will be handled automatically. The
serialization is done through YAML. If <tt>class_name</tt> is specified,
the serialized object must be of that class on retrieval or <a
href="SerializationTypeMismatch.html">SerializationTypeMismatch</a> will be
raised.
</p>
<h4>Parameters</h4>
<ul>
<li><tt>attr_name</tt> - The field name that should be serialized.

</li>
<li><tt>class_name</tt> - Optional, class name that the object type should be
equal to.

</li>
</ul>
<h4>Example</h4>
<pre>
  # Serialize a preferences attribute
  class User
    serialize :preferences
  end
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002359_source')" id="l_M002359_source">show source</a> ]</p>
  <div id="M002359_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1120</span>
1120:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">serialize</span>(<span class="ruby-identifier">attr_name</span>, <span class="ruby-identifier">class_name</span> = <span class="ruby-constant">Object</span>)
1121:         <span class="ruby-identifier">serialized_attributes</span>[<span class="ruby-identifier">attr_name</span>.<span class="ruby-identifier">to_s</span>] = <span class="ruby-identifier">class_name</span>
1122:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002360"></a><b>serialized_attributes</b>()
  </div>
  <div class="description">
  <p>
Returns a <a href="Base.html#M002432">hash</a> of <a
href="Base.html#M002340">all</a> the <a
href="Base.html#M002423">attributes</a> that have been specified for
serialization as keys and their class restriction as values.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002360_source')" id="l_M002360_source">show source</a> ]</p>
  <div id="M002360_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1125</span>
1125:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">serialized_attributes</span>
1126:         <span class="ruby-identifier">read_inheritable_attribute</span>(<span class="ruby-identifier">:attr_serialized</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">write_inheritable_attribute</span>(<span class="ruby-identifier">:attr_serialized</span>, {})
1127:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002366"></a><b>set_inheritance_column</b>(value = nil, &amp;block)
  </div>
  <div class="description">
  <p>
Sets the name of the inheritance column to use to the given value, or (if
the value # is nil or false) to the value returned by the given block.
</p>
<pre>
  class Project &lt; ActiveRecord::Base
    set_inheritance_column do
      original_inheritance_column + &quot;_id&quot;
    end
  end
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002366_source')" id="l_M002366_source">show source</a> ]</p>
  <div id="M002366_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1264</span>
1264:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_inheritance_column</span>(<span class="ruby-identifier">value</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
1265:         <span class="ruby-identifier">define_attr_method</span> <span class="ruby-identifier">:inheritance_column</span>, <span class="ruby-identifier">value</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>
1266:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002365"></a><b>set_primary_key</b>(value = nil, &amp;block)
  </div>
  <div class="description">
  <p>
Sets the name of the primary key column to use to the given value, or (if
the value is nil or false) to the value returned by the given block.
</p>
<pre>
  class Project &lt; ActiveRecord::Base
    set_primary_key &quot;sysid&quot;
  end
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002365_source')" id="l_M002365_source">show source</a> ]</p>
  <div id="M002365_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1250</span>
1250:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_primary_key</span>(<span class="ruby-identifier">value</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
1251:         <span class="ruby-identifier">define_attr_method</span> <span class="ruby-identifier">:primary_key</span>, <span class="ruby-identifier">value</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>
1252:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002367"></a><b>set_sequence_name</b>(value = nil, &amp;block)
  </div>
  <div class="description">
  <p>
Sets the name of the sequence to use when generating ids to the given
value, or (if the value is nil or false) to the value returned by the given
block. This is required for Oracle and is useful for any database which
relies on sequences for primary key generation.
</p>
<p>
If a sequence name is not explicitly set when using Oracle or Firebird, it
will default to the commonly used pattern of: #{<a
href="Base.html#M002361">table_name</a>}_seq
</p>
<p>
If a sequence name is not explicitly set when using PostgreSQL, it will
discover the sequence corresponding to your primary key for you.
</p>
<pre>
  class Project &lt; ActiveRecord::Base
    set_sequence_name &quot;projectseq&quot;   # default would have been &quot;project_seq&quot;
  end
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002367_source')" id="l_M002367_source">show source</a> ]</p>
  <div id="M002367_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1283</span>
1283:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_sequence_name</span>(<span class="ruby-identifier">value</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
1284:         <span class="ruby-identifier">define_attr_method</span> <span class="ruby-identifier">:sequence_name</span>, <span class="ruby-identifier">value</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>
1285:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002364"></a><b>set_table_name</b>(value = nil, &amp;block)
  </div>
  <div class="description">
  <p>
Sets the table name to use to the given value, or (if the value is nil or
false) to the value returned by the given block.
</p>
<pre>
  class Project &lt; ActiveRecord::Base
    set_table_name &quot;project&quot;
  end
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002364_source')" id="l_M002364_source">show source</a> ]</p>
  <div id="M002364_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1238</span>
1238:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_table_name</span>(<span class="ruby-identifier">value</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
1239:         <span class="ruby-identifier">define_attr_method</span> <span class="ruby-identifier">:table_name</span>, <span class="ruby-identifier">value</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>
1240:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002379"></a><b>silence</b>() {|| ...}
  </div>
  <div class="description">
  <p>
Silences the logger for the duration of the block.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002379_source')" id="l_M002379_source">show source</a> ]</p>
  <div id="M002379_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1481</span>
1481:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">silence</span>
1482:         <span class="ruby-identifier">old_logger_level</span>, <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">level</span> = <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">level</span>, <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">ERROR</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">logger</span>
1483:         <span class="ruby-keyword kw">yield</span>
1484:       <span class="ruby-keyword kw">ensure</span>
1485:         <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">level</span> = <span class="ruby-identifier">old_logger_level</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">logger</span>
1486:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002384"></a><b>sti_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002384_source')" id="l_M002384_source">show source</a> ]</p>
  <div id="M002384_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1519</span>
1519:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sti_name</span>
1520:         <span class="ruby-identifier">store_full_sti_class</span> <span class="ruby-value">? </span><span class="ruby-identifier">name</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">demodulize</span>
1521:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002368"></a><b>table_exists?</b>()
  </div>
  <div class="description">
  <p>
Indicates whether the table associated with this class exists
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002368_source')" id="l_M002368_source">show source</a> ]</p>
  <div id="M002368_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1299</span>
1299:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">table_exists?</span>
1300:         <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">table_exists?</span>(<span class="ruby-identifier">table_name</span>)
1301:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002361"></a><b>table_name</b>()
  </div>
  <div class="description">
  <p>
Guesses the table name (in forced lower-case) based on the name of the
class in the inheritance hierarchy descending directly from <a
href="Base.html">ActiveRecord::Base</a>. So if the hierarchy looks like:
Reply &lt; Message &lt; <a href="Base.html">ActiveRecord::Base</a>, then
Message is used to guess the table name even when called on Reply. The
rules used to do the guess are handled by the Inflector class in Active
Support, which knows almost <a href="Base.html#M002340">all</a> common
English inflections. You can add <a href="Base.html#M002398">new</a>
inflections in config/initializers/inflections.rb.
</p>
<p>
Nested classes are given table names prefixed by the singular form of the
parent&#8216;s table name. Enclosing modules are not considered.
</p>
<h4>Examples</h4>
<pre>
  class Invoice &lt; ActiveRecord::Base; end;
  file                  class               table_name
  invoice.rb            Invoice             invoices

  class Invoice &lt; ActiveRecord::Base; class Lineitem &lt; ActiveRecord::Base; end; end;
  file                  class               table_name
  invoice.rb            Invoice::Lineitem   invoice_lineitems

  module Invoice; class Lineitem &lt; ActiveRecord::Base; end; end;
  file                  class               table_name
  invoice/lineitem.rb   Invoice::Lineitem   lineitems
</pre>
<p>
Additionally, the class-level <tt>table_name_prefix</tt> is prepended and
the <tt>table_name_suffix</tt> is appended. So if you have
&quot;myapp_&quot; as a prefix, the table name guess for an Invoice class
<a href="Base.html#M002409">becomes</a> &quot;myapp_invoices&quot;.
Invoice::Lineitem <a href="Base.html#M002409">becomes</a>
&quot;myapp_invoice_lineitems&quot;.
</p>
<p>
You can also overwrite this class method to allow for unguessable links,
such as a Mouse class with a link to a &quot;mice&quot; table. Example:
</p>
<pre>
  class Mouse &lt; ActiveRecord::Base
    set_table_name &quot;mice&quot;
  end
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002361_source')" id="l_M002361_source">show source</a> ]</p>
  <div id="M002361_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1162</span>
1162:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">table_name</span>
1163:         <span class="ruby-identifier">reset_table_name</span>
1164:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002344"></a><b>update</b>(id, attributes)
  </div>
  <div class="description">
  <p>
Updates an object (or multiple objects) and saves it to the database, if
validations pass. The resulting object is returned whether the object was
saved successfully to the database or not.
</p>
<h4>Parameters</h4>
<ul>
<li><tt><a href="Base.html#M002399">id</a></tt> - This should be the <a
href="Base.html#M002399">id</a> or an array of ids to be updated.

</li>
<li><tt><a href="Base.html#M002423">attributes</a></tt> - This should be a <a
href="Base.html#M002432">hash</a> of <a
href="Base.html#M002423">attributes</a> to be set on the object, or an
array of hashes.

</li>
</ul>
<h4>Examples</h4>
<pre>
  # Updating one record:
  Person.update(15, :user_name =&gt; 'Samuel', :group =&gt; 'expert')

  # Updating multiple records:
  people = { 1 =&gt; { &quot;first_name&quot; =&gt; &quot;David&quot; }, 2 =&gt; { &quot;first_name&quot; =&gt; &quot;Jeremy&quot; } }
  Person.update(people.keys, people.values)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002344_source')" id="l_M002344_source">show source</a> ]</p>
  <div id="M002344_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 748</span>
748:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">attributes</span>)
749:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">id</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
750:           <span class="ruby-identifier">idx</span> = <span class="ruby-value">-1</span>
751:           <span class="ruby-identifier">id</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">one_id</span><span class="ruby-operator">|</span> <span class="ruby-identifier">idx</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>; <span class="ruby-identifier">update</span>(<span class="ruby-identifier">one_id</span>, <span class="ruby-identifier">attributes</span>[<span class="ruby-identifier">idx</span>]) }
752:         <span class="ruby-keyword kw">else</span>
753:           <span class="ruby-identifier">object</span> = <span class="ruby-identifier">find</span>(<span class="ruby-identifier">id</span>)
754:           <span class="ruby-identifier">object</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">attributes</span>)
755:           <span class="ruby-identifier">object</span>
756:         <span class="ruby-keyword kw">end</span>
757:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002347"></a><b>update_all</b>(updates, conditions = nil, options = {})
  </div>
  <div class="description">
  <p>
Updates <a href="Base.html#M002340">all</a> records with details given if
they match a set of conditions supplied, limits and order can also be
supplied. This method constructs a single SQL UPDATE statement and sends it
straight to the database. It does not instantiate the involved models and
it does not trigger Active Record callbacks.
</p>
<h4>Parameters</h4>
<ul>
<li><tt>updates</tt> - A string of column and value pairs that will be set on
any records that match conditions. This creates the SET clause of the
generated SQL.

</li>
<li><tt>conditions</tt> - An SQL fragment like &quot;administrator = 1&quot; or
[ &quot;user_name = ?&quot;, username ]. See conditions in the intro for
more info.

</li>
<li><tt>options</tt> - Additional options are <tt>:limit</tt> and
<tt>:order</tt>, see the examples for usage.

</li>
</ul>
<h4>Examples</h4>
<pre>
  # Update all billing objects with the 3 different attributes given
  Billing.update_all( &quot;category = 'authorized', approved = 1, author = 'David'&quot; )

  # Update records that match our conditions
  Billing.update_all( &quot;author = 'David'&quot;, &quot;title LIKE '%Rails%'&quot; )

  # Update records that match our conditions but limit it to 5 ordered by date
  Billing.update_all( &quot;author = 'David'&quot;, &quot;title LIKE '%Rails%'&quot;,
                        :order =&gt; 'created_at', :limit =&gt; 5 )
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002347_source')" id="l_M002347_source">show source</a> ]</p>
  <div id="M002347_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 831</span>
831:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_all</span>(<span class="ruby-identifier">updates</span>, <span class="ruby-identifier">conditions</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">options</span> = {})
832:         <span class="ruby-identifier">sql</span>  = <span class="ruby-node">&quot;UPDATE #{quoted_table_name} SET #{sanitize_sql_for_assignment(updates)} &quot;</span>
833: 
834:         <span class="ruby-identifier">scope</span> = <span class="ruby-identifier">scope</span>(<span class="ruby-identifier">:find</span>)
835: 
836:         <span class="ruby-identifier">select_sql</span> = <span class="ruby-value str">&quot;&quot;</span>
837:         <span class="ruby-identifier">add_conditions!</span>(<span class="ruby-identifier">select_sql</span>, <span class="ruby-identifier">conditions</span>, <span class="ruby-identifier">scope</span>)
838: 
839:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:limit</span>) <span class="ruby-operator">||</span> (<span class="ruby-identifier">scope</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">scope</span>[<span class="ruby-identifier">:limit</span>])
840:           <span class="ruby-comment cmt"># Only take order from scope if limit is also provided by scope, this</span>
841:           <span class="ruby-comment cmt"># is useful for updating a has_many association with a limit.</span>
842:           <span class="ruby-identifier">add_order!</span>(<span class="ruby-identifier">select_sql</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:order</span>], <span class="ruby-identifier">scope</span>)
843: 
844:           <span class="ruby-identifier">add_limit!</span>(<span class="ruby-identifier">select_sql</span>, <span class="ruby-identifier">options</span>, <span class="ruby-identifier">scope</span>)
845:           <span class="ruby-identifier">sql</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">limited_update_conditions</span>(<span class="ruby-identifier">select_sql</span>, <span class="ruby-identifier">quoted_table_name</span>, <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">quote_column_name</span>(<span class="ruby-identifier">primary_key</span>)))
846:         <span class="ruby-keyword kw">else</span>
847:           <span class="ruby-identifier">add_order!</span>(<span class="ruby-identifier">select_sql</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:order</span>], <span class="ruby-keyword kw">nil</span>)
848:           <span class="ruby-identifier">sql</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">select_sql</span>)
849:         <span class="ruby-keyword kw">end</span>
850: 
851:         <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">update</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-node">&quot;#{name} Update&quot;</span>)
852:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002352"></a><b>update_counters</b>(id, counters)
  </div>
  <div class="description">
  <p>
A generic &quot;counter updater&quot; implementation, intended primarily to
be used by <a href="Base.html#M002353">increment_counter</a> and <a
href="Base.html#M002354">decrement_counter</a>, but which may also be
useful on its own. It simply does a direct SQL <a
href="Base.html#M002344">update</a> for the record with the given ID,
altering the given <a href="Base.html#M002432">hash</a> of counters by the
amount given by the corresponding value:
</p>
<h4>Parameters</h4>
<ul>
<li><tt><a href="Base.html#M002399">id</a></tt> - The <a
href="Base.html#M002399">id</a> of the object you wish to <a
href="Base.html#M002344">update</a> a counter on or an Array of ids.

</li>
<li><tt>counters</tt> - An Array of Hashes containing the names of the fields
to <a href="Base.html#M002344">update</a> as keys and the amount to <a
href="Base.html#M002344">update</a> the field by as values.

</li>
</ul>
<h4>Examples</h4>
<pre>
  # For the Post with id of 5, decrement the comment_count by 1, and
  # increment the action_count by 1
  Post.update_counters 5, :comment_count =&gt; -1, :action_count =&gt; 1
  # Executes the following SQL:
  # UPDATE posts
  #    SET comment_count = comment_count - 1,
  #        action_count = action_count + 1
  #  WHERE id = 5

  # For the Posts with id of 10 and 15, increment the comment_count by 1
  Post.update_counters [10, 15], :comment_count =&gt; 1
  # Executes the following SQL:
  # UPDATE posts
  #    SET comment_count = comment_count + 1,
  #  WHERE id IN (10, 15)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002352_source')" id="l_M002352_source">show source</a> ]</p>
  <div id="M002352_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 983</span>
983:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_counters</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">counters</span>)
984:         <span class="ruby-identifier">updates</span> = <span class="ruby-identifier">counters</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">counter_name</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
985:           <span class="ruby-identifier">operator</span> = <span class="ruby-identifier">value</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-value str">'-'</span> <span class="ruby-operator">:</span> <span class="ruby-value str">'+'</span>
986:           <span class="ruby-identifier">quoted_column</span> = <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">quote_column_name</span>(<span class="ruby-identifier">counter_name</span>)
987:           <span class="ruby-node">&quot;#{quoted_column} = COALESCE(#{quoted_column}, 0) #{operator} #{value.abs}&quot;</span>
988:         <span class="ruby-keyword kw">end</span>
989: 
990:         <span class="ruby-identifier">update_all</span>(<span class="ruby-identifier">updates</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">', '</span>), <span class="ruby-identifier">primary_key</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">id</span> )
991:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002330"></a><b>verification_timeout</b>()
  </div>
  <div class="description">
  <p>
Deprecated and no longer has any effect.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002330_source')" id="l_M002330_source">show source</a> ]</p>
  <div id="M002330_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb, line 102</span>
102:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">verification_timeout</span>
103:         <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Deprecation</span>.<span class="ruby-identifier">warn</span>(<span class="ruby-value str">&quot;ActiveRecord::Base.verification_timeout has been deprecated and no longer has any effect. Please remove all references to verification_timeout.&quot;</span>)
104:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002331"></a><b>verification_timeout=</b>(flag)
  </div>
  <div class="description">
  <p>
Deprecated and no longer has any effect.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002331_source')" id="l_M002331_source">show source</a> ]</p>
  <div id="M002331_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb, line 107</span>
107:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">verification_timeout=</span>(<span class="ruby-identifier">flag</span>)
108:         <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Deprecation</span>.<span class="ruby-identifier">warn</span>(<span class="ruby-value str">&quot;ActiveRecord::Base.verification_timeout= has been deprecated and no longer has any effect. Please remove all references to verification_timeout=.&quot;</span>)
109:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Protected Class methods</div>
<div class="method">
  <div class="title">
    <a name="M002393"></a><b>aggregate_mapping</b>(reflection)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002393_source')" id="l_M002393_source">show source</a> ]</p>
  <div id="M002393_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2295</span>
2295:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">aggregate_mapping</span>(<span class="ruby-identifier">reflection</span>)
2296:           <span class="ruby-identifier">mapping</span> = <span class="ruby-identifier">reflection</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:mapping</span>] <span class="ruby-operator">||</span> [<span class="ruby-identifier">reflection</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">reflection</span>.<span class="ruby-identifier">name</span>]
2297:           <span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">mapping</span> <span class="ruby-operator">:</span> [<span class="ruby-identifier">mapping</span>]
2298:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002390"></a><b>class_of_active_record_descendant</b>(klass)
  </div>
  <div class="description">
  <p>
Returns the class descending directly from <a
href="Base.html">ActiveRecord::Base</a> or an abstract class, if any, in
the inheritance hierarchy.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002390_source')" id="l_M002390_source">show source</a> ]</p>
  <div id="M002390_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2253</span>
2253:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">class_of_active_record_descendant</span>(<span class="ruby-identifier">klass</span>)
2254:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">superclass</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Base</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">abstract_class?</span>
2255:             <span class="ruby-identifier">klass</span>
2256:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">nil?</span>
2257:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActiveRecordError</span>, <span class="ruby-node">&quot;#{name} doesn't belong in a hierarchy descending from ActiveRecord&quot;</span>
2258:           <span class="ruby-keyword kw">else</span>
2259:             <span class="ruby-identifier">class_of_active_record_descendant</span>(<span class="ruby-identifier">klass</span>.<span class="ruby-identifier">superclass</span>)
2260:           <span class="ruby-keyword kw">end</span>
2261:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002389"></a><b>compute_type</b>(type_name)
  </div>
  <div class="description">
  <p>
Returns the class type of the record using the current module as a prefix.
So descendants of MyApp::Business::Account would appear as
MyApp::Business::AccountSubclass.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002389_source')" id="l_M002389_source">show source</a> ]</p>
  <div id="M002389_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2240</span>
2240:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">compute_type</span>(<span class="ruby-identifier">type_name</span>)
2241:           <span class="ruby-identifier">modularized_name</span> = <span class="ruby-identifier">type_name_with_module</span>(<span class="ruby-identifier">type_name</span>)
2242:           <span class="ruby-identifier">silence_warnings</span> <span class="ruby-keyword kw">do</span>
2243:             <span class="ruby-keyword kw">begin</span>
2244:               <span class="ruby-identifier">class_eval</span>(<span class="ruby-identifier">modularized_name</span>, <span class="ruby-keyword kw">__FILE__</span>)
2245:             <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NameError</span>
2246:               <span class="ruby-identifier">class_eval</span>(<span class="ruby-identifier">type_name</span>, <span class="ruby-keyword kw">__FILE__</span>)
2247:             <span class="ruby-keyword kw">end</span>
2248:           <span class="ruby-keyword kw">end</span>
2249:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002388"></a><b>default_scope</b>(options = {})
  </div>
  <div class="description">
  <p>
Sets the default options for the model. The format of the <tt>options</tt>
argument is the same as in <a href="Base.html#M002337">find</a>.
</p>
<pre>
  class Person &lt; ActiveRecord::Base
    default_scope :order =&gt; 'last_name, first_name'
  end
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002388_source')" id="l_M002388_source">show source</a> ]</p>
  <div id="M002388_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2212</span>
2212:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">default_scope</span>(<span class="ruby-identifier">options</span> = {})
2213:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">default_scoping</span> <span class="ruby-operator">&lt;&lt;</span> { <span class="ruby-identifier">:find</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">options</span>, <span class="ruby-identifier">:create</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:conditions</span>].<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:conditions</span>] <span class="ruby-operator">:</span> {} }
2214:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002394"></a><b>expand_hash_conditions_for_aggregates</b>(attrs)
  </div>
  <div class="description">
  <p>
Accepts a <a href="Base.html#M002432">hash</a> of SQL conditions and
replaces those <a href="Base.html#M002423">attributes</a> that correspond
to a <tt>composed_of</tt> relationship with their expanded aggregate
attribute values. Given:
</p>
<pre>
    class Person &lt; ActiveRecord::Base
      composed_of :address, :class_name =&gt; &quot;Address&quot;,
        :mapping =&gt; [%w(address_street street), %w(address_city city)]
    end
</pre>
<p>
Then:
</p>
<pre>
    { :address =&gt; Address.new(&quot;813 abc st.&quot;, &quot;chicago&quot;) }
      # =&gt; { :address_street =&gt; &quot;813 abc st.&quot;, :address_city =&gt; &quot;chicago&quot; }
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002394_source')" id="l_M002394_source">show source</a> ]</p>
  <div id="M002394_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2311</span>
2311:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">expand_hash_conditions_for_aggregates</span>(<span class="ruby-identifier">attrs</span>)
2312:           <span class="ruby-identifier">expanded_attrs</span> = {}
2313:           <span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attr</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
2314:             <span class="ruby-keyword kw">unless</span> (<span class="ruby-identifier">aggregation</span> = <span class="ruby-identifier">reflect_on_aggregation</span>(<span class="ruby-identifier">attr</span>)).<span class="ruby-identifier">nil?</span>
2315:               <span class="ruby-identifier">mapping</span> = <span class="ruby-identifier">aggregate_mapping</span>(<span class="ruby-identifier">aggregation</span>)
2316:               <span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">field_attr</span>, <span class="ruby-identifier">aggregate_attr</span><span class="ruby-operator">|</span>
2317:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">value</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">aggregate_attr</span>)
2318:                   <span class="ruby-identifier">expanded_attrs</span>[<span class="ruby-identifier">field_attr</span>] = <span class="ruby-identifier">value</span>
2319:                 <span class="ruby-keyword kw">else</span>
2320:                   <span class="ruby-identifier">expanded_attrs</span>[<span class="ruby-identifier">field_attr</span>] = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">aggregate_attr</span>)
2321:                 <span class="ruby-keyword kw">end</span>
2322:               <span class="ruby-keyword kw">end</span>
2323:             <span class="ruby-keyword kw">else</span>
2324:               <span class="ruby-identifier">expanded_attrs</span>[<span class="ruby-identifier">attr</span>] = <span class="ruby-identifier">value</span>
2325:             <span class="ruby-keyword kw">end</span>
2326:           <span class="ruby-keyword kw">end</span>
2327:           <span class="ruby-identifier">expanded_attrs</span>
2328:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002397"></a><b>sanitize_sql_array</b>(ary)
  </div>
  <div class="description">
  <p>
Accepts an array of conditions. The array has each value sanitized and
interpolated into the SQL statement.
</p>
<pre>
  [&quot;name='%s' and group_id='%s'&quot;, &quot;foo'bar&quot;, 4]  returns  &quot;name='foo''bar' and group_id='4'&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002397_source')" id="l_M002397_source">show source</a> ]</p>
  <div id="M002397_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2387</span>
2387:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sanitize_sql_array</span>(<span class="ruby-identifier">ary</span>)
2388:           <span class="ruby-identifier">statement</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">values</span> = <span class="ruby-identifier">ary</span>
2389:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">values</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">statement</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/:\w+/</span>
2390:             <span class="ruby-identifier">replace_named_bind_variables</span>(<span class="ruby-identifier">statement</span>, <span class="ruby-identifier">values</span>.<span class="ruby-identifier">first</span>)
2391:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">statement</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'?'</span>)
2392:             <span class="ruby-identifier">replace_bind_variables</span>(<span class="ruby-identifier">statement</span>, <span class="ruby-identifier">values</span>)
2393:           <span class="ruby-keyword kw">else</span>
2394:             <span class="ruby-identifier">statement</span> <span class="ruby-operator">%</span> <span class="ruby-identifier">values</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span> <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">quote_string</span>(<span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_s</span>) }
2395:           <span class="ruby-keyword kw">end</span>
2396:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002392"></a><b>sanitize_sql_for_assignment</b>(assignments)
  </div>
  <div class="description">
  <p>
Accepts an array, <a href="Base.html#M002432">hash</a>, or string of SQL
conditions and sanitizes them into a valid SQL fragment for a SET clause.
</p>
<pre>
  { :name =&gt; nil, :group_id =&gt; 4 }  returns &quot;name = NULL , group_id='4'&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002392_source')" id="l_M002392_source">show source</a> ]</p>
  <div id="M002392_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2287</span>
2287:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sanitize_sql_for_assignment</span>(<span class="ruby-identifier">assignments</span>)
2288:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">assignments</span>
2289:             <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Array</span>; <span class="ruby-identifier">sanitize_sql_array</span>(<span class="ruby-identifier">assignments</span>)
2290:             <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Hash</span>;  <span class="ruby-identifier">sanitize_sql_hash_for_assignment</span>(<span class="ruby-identifier">assignments</span>)
2291:             <span class="ruby-keyword kw">else</span>        <span class="ruby-identifier">assignments</span>
2292:           <span class="ruby-keyword kw">end</span>
2293:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002391"></a><b>sanitize_sql_for_conditions</b>(condition, table_name = quoted_table_name)
  </div>
  <div class="description">
  <p>
Accepts an array, <a href="Base.html#M002432">hash</a>, or string of SQL
conditions and sanitizes them into a valid SQL fragment for a WHERE clause.
</p>
<pre>
  [&quot;name='%s' and group_id='%s'&quot;, &quot;foo'bar&quot;, 4]  returns  &quot;name='foo''bar' and group_id='4'&quot;
  { :name =&gt; &quot;foo'bar&quot;, :group_id =&gt; 4 }  returns &quot;name='foo''bar' and group_id='4'&quot;
  &quot;name='foo''bar' and group_id='4'&quot; returns &quot;name='foo''bar' and group_id='4'&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002391_source')" id="l_M002391_source">show source</a> ]</p>
  <div id="M002391_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2273</span>
2273:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sanitize_sql_for_conditions</span>(<span class="ruby-identifier">condition</span>, <span class="ruby-identifier">table_name</span> = <span class="ruby-identifier">quoted_table_name</span>)
2274:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">condition</span>.<span class="ruby-identifier">blank?</span>
2275: 
2276:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">condition</span>
2277:             <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Array</span>; <span class="ruby-identifier">sanitize_sql_array</span>(<span class="ruby-identifier">condition</span>)
2278:             <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Hash</span>;  <span class="ruby-identifier">sanitize_sql_hash_for_conditions</span>(<span class="ruby-identifier">condition</span>, <span class="ruby-identifier">table_name</span>)
2279:             <span class="ruby-keyword kw">else</span>        <span class="ruby-identifier">condition</span>
2280:           <span class="ruby-keyword kw">end</span>
2281:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002396"></a><b>sanitize_sql_hash_for_assignment</b>(attrs)
  </div>
  <div class="description">
  <p>
Sanitizes a <a href="Base.html#M002432">hash</a> of attribute/value pairs
into SQL conditions for a SET clause.
</p>
<pre>
  { :status =&gt; nil, :group_id =&gt; 1 }
    # =&gt; &quot;status = NULL , group_id = 1&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002396_source')" id="l_M002396_source">show source</a> ]</p>
  <div id="M002396_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2378</span>
2378:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sanitize_sql_hash_for_assignment</span>(<span class="ruby-identifier">attrs</span>)
2379:           <span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attr</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
2380:             <span class="ruby-node">&quot;#{connection.quote_column_name(attr)} = #{quote_bound_value(value)}&quot;</span>
2381:           <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">', '</span>)
2382:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002395"></a><b>sanitize_sql_hash_for_conditions</b>(attrs, default_table_name = quoted_table_name, top_level = true)
  </div>
  <div class="description">
  <p>
Sanitizes a <a href="Base.html#M002432">hash</a> of attribute/value pairs
into SQL conditions for a WHERE clause.
</p>
<pre>
  { :name =&gt; &quot;foo'bar&quot;, :group_id =&gt; 4 }
    # =&gt; &quot;name='foo''bar' and group_id= 4&quot;
  { :status =&gt; nil, :group_id =&gt; [1,2,3] }
    # =&gt; &quot;status IS NULL and group_id IN (1,2,3)&quot;
  { :age =&gt; 13..18 }
    # =&gt; &quot;age BETWEEN 13 AND 18&quot;
  { 'other_records.id' =&gt; 7 }
    # =&gt; &quot;`other_records`.`id` = 7&quot;
  { :other_records =&gt; { :id =&gt; 7 } }
    # =&gt; &quot;`other_records`.`id` = 7&quot;
</pre>
<p>
And for value objects on a composed_of relationship:
</p>
<pre>
  { :address =&gt; Address.new(&quot;123 abc st.&quot;, &quot;chicago&quot;) }
    # =&gt; &quot;address_street='123 abc st.' and address_city='chicago'&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002395_source')" id="l_M002395_source">show source</a> ]</p>
  <div id="M002395_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2344</span>
2344:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sanitize_sql_hash_for_conditions</span>(<span class="ruby-identifier">attrs</span>, <span class="ruby-identifier">default_table_name</span> = <span class="ruby-identifier">quoted_table_name</span>, <span class="ruby-identifier">top_level</span> = <span class="ruby-keyword kw">true</span>)
2345:           <span class="ruby-identifier">attrs</span> = <span class="ruby-identifier">expand_hash_conditions_for_aggregates</span>(<span class="ruby-identifier">attrs</span>)
2346: 
2347:           <span class="ruby-keyword kw">return</span> <span class="ruby-value str">'1 = 2'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">top_level</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">empty?</span>
2348: 
2349:           <span class="ruby-identifier">conditions</span> = <span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attr</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
2350:             <span class="ruby-identifier">table_name</span> = <span class="ruby-identifier">default_table_name</span>
2351: 
2352:             <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">not</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
2353:               <span class="ruby-identifier">attr</span> = <span class="ruby-identifier">attr</span>.<span class="ruby-identifier">to_s</span>
2354: 
2355:               <span class="ruby-comment cmt"># Extract table name from qualified attribute names.</span>
2356:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">attr</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'.'</span>) <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">top_level</span>
2357:                 <span class="ruby-identifier">attr_table_name</span>, <span class="ruby-identifier">attr</span> = <span class="ruby-identifier">attr</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'.'</span>, <span class="ruby-value">2</span>)
2358:                 <span class="ruby-identifier">attr_table_name</span> = <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">quote_table_name</span>(<span class="ruby-identifier">attr_table_name</span>)
2359:               <span class="ruby-keyword kw">else</span>
2360:                 <span class="ruby-identifier">attr_table_name</span> = <span class="ruby-identifier">table_name</span>
2361:               <span class="ruby-keyword kw">end</span>
2362: 
2363:               <span class="ruby-identifier">attribute_condition</span>(<span class="ruby-node">&quot;#{attr_table_name}.#{connection.quote_column_name(attr)}&quot;</span>, <span class="ruby-identifier">value</span>)
2364:             <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">top_level</span>
2365:               <span class="ruby-identifier">sanitize_sql_hash_for_conditions</span>(<span class="ruby-identifier">value</span>, <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">quote_table_name</span>(<span class="ruby-identifier">attr</span>.<span class="ruby-identifier">to_s</span>), <span class="ruby-keyword kw">false</span>)
2366:             <span class="ruby-keyword kw">else</span>
2367:               <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">StatementInvalid</span>
2368:             <span class="ruby-keyword kw">end</span>
2369:           <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">' AND '</span>)
2370: 
2371:           <span class="ruby-identifier">replace_bind_variables</span>(<span class="ruby-identifier">conditions</span>, <span class="ruby-identifier">expand_range_bind_variables</span>(<span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">values</span>))
2372:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002387"></a><b>with_exclusive_scope</b>(method_scoping = {}, &amp;block)
  </div>
  <div class="description">
  <p>
Works like <a href="Base.html#M002386">with_scope</a>, but discards any
nested properties.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002387_source')" id="l_M002387_source">show source</a> ]</p>
  <div id="M002387_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2197</span>
2197:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_exclusive_scope</span>(<span class="ruby-identifier">method_scoping</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
2198:           <span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">method_scoping</span>, <span class="ruby-identifier">:overwrite</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
2199:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002386"></a><b>with_scope</b>(method_scoping = {}, action = :merge) {|| ...}
  </div>
  <div class="description">
  <p>
Scope parameters to method calls within the block. Takes a <a
href="Base.html#M002432">hash</a> of method_name =&gt; parameters <a
href="Base.html#M002432">hash</a>. method_name may be <tt>:<a
href="Base.html#M002337">find</a></tt> or <tt>:<a
href="Base.html#M002343">create</a></tt>. <tt>:<a
href="Base.html#M002337">find</a></tt> parameters may include the
<tt>:conditions</tt>, <tt>:joins</tt>, <tt>:include</tt>, <tt>:offset</tt>,
<tt>:limit</tt>, and <tt>:readonly</tt> options. <tt>:<a
href="Base.html#M002343">create</a></tt> parameters are an <a
href="Base.html#M002423">attributes</a> <a
href="Base.html#M002432">hash</a>.
</p>
<pre>
  class Article &lt; ActiveRecord::Base
    def self.create_with_scope
      with_scope(:find =&gt; { :conditions =&gt; &quot;blog_id = 1&quot; }, :create =&gt; { :blog_id =&gt; 1 }) do
        find(1) # =&gt; SELECT * from articles WHERE blog_id = 1 AND id = 1
        a = create(1)
        a.blog_id # =&gt; 1
      end
    end
  end
</pre>
<p>
In nested scopings, <a href="Base.html#M002340">all</a> previous parameters
are overwritten by the innermost rule, with the exception of
<tt>:conditions</tt>, <tt>:include</tt>, and <tt>:joins</tt> options in
<tt>:<a href="Base.html#M002337">find</a></tt>, which are merged.
</p>
<p>
<tt>:joins</tt> options are uniqued so multiple scopes can join in the same
table without table aliasing problems. If you need to join multiple tables,
but still want one of the tables to be uniqued, use the array of strings
format for your joins.
</p>
<pre>
  class Article &lt; ActiveRecord::Base
    def self.find_with_scope
      with_scope(:find =&gt; { :conditions =&gt; &quot;blog_id = 1&quot;, :limit =&gt; 1 }, :create =&gt; { :blog_id =&gt; 1 }) do
        with_scope(:find =&gt; { :limit =&gt; 10 })
          find(:all) # =&gt; SELECT * from articles WHERE blog_id = 1 LIMIT 10
        end
        with_scope(:find =&gt; { :conditions =&gt; &quot;author_id = 3&quot; })
          find(:all) # =&gt; SELECT * from articles WHERE blog_id = 1 AND author_id = 3 LIMIT 1
        end
      end
    end
  end
</pre>
<p>
You can ignore any previous scopings by using the <tt><a
href="Base.html#M002387">with_exclusive_scope</a></tt> method.
</p>
<pre>
  class Article &lt; ActiveRecord::Base
    def self.find_with_exclusive_scope
      with_scope(:find =&gt; { :conditions =&gt; &quot;blog_id = 1&quot;, :limit =&gt; 1 }) do
        with_exclusive_scope(:find =&gt; { :limit =&gt; 10 })
          find(:all) # =&gt; SELECT * from articles LIMIT 10
        end
      end
    end
  end
</pre>
<p>
<b>Note</b>: the +:<a href="Base.html#M002337">find</a>+ scope also has
effect on <a href="Base.html#M002344">update</a> and deletion methods, like
<tt><a href="Base.html#M002347">update_all</a></tt> and <tt><a
href="Base.html#M002349">delete_all</a></tt>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002386_source')" id="l_M002386_source">show source</a> ]</p>
  <div id="M002386_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2136</span>
2136:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">method_scoping</span> = {}, <span class="ruby-identifier">action</span> = <span class="ruby-identifier">:merge</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
2137:           <span class="ruby-identifier">method_scoping</span> = <span class="ruby-identifier">method_scoping</span>.<span class="ruby-identifier">method_scoping</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">method_scoping</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:method_scoping</span>)
2138: 
2139:           <span class="ruby-comment cmt"># Dup first and second level of hash (method and params).</span>
2140:           <span class="ruby-identifier">method_scoping</span> = <span class="ruby-identifier">method_scoping</span>.<span class="ruby-identifier">inject</span>({}) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">hash</span>, (<span class="ruby-identifier">method</span>, <span class="ruby-identifier">params</span>)<span class="ruby-operator">|</span>
2141:             <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>] = (<span class="ruby-identifier">params</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">true</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">params</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">params</span>.<span class="ruby-identifier">dup</span>
2142:             <span class="ruby-identifier">hash</span>
2143:           <span class="ruby-keyword kw">end</span>
2144: 
2145:           <span class="ruby-identifier">method_scoping</span>.<span class="ruby-identifier">assert_valid_keys</span>([ <span class="ruby-identifier">:find</span>, <span class="ruby-identifier">:create</span> ])
2146: 
2147:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">f</span> = <span class="ruby-identifier">method_scoping</span>[<span class="ruby-identifier">:find</span>]
2148:             <span class="ruby-identifier">f</span>.<span class="ruby-identifier">assert_valid_keys</span>(<span class="ruby-constant">VALID_FIND_OPTIONS</span>)
2149:             <span class="ruby-identifier">set_readonly_option!</span> <span class="ruby-identifier">f</span>
2150:           <span class="ruby-keyword kw">end</span>
2151: 
2152:           <span class="ruby-comment cmt"># Merge scopings</span>
2153:           <span class="ruby-keyword kw">if</span> [<span class="ruby-identifier">:merge</span>, <span class="ruby-identifier">:reverse_merge</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">action</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">current_scoped_methods</span>
2154:             <span class="ruby-identifier">method_scoping</span> = <span class="ruby-identifier">current_scoped_methods</span>.<span class="ruby-identifier">inject</span>(<span class="ruby-identifier">method_scoping</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">hash</span>, (<span class="ruby-identifier">method</span>, <span class="ruby-identifier">params</span>)<span class="ruby-operator">|</span>
2155:               <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>]
2156:                 <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Hash</span>
2157:                   <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">method</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:find</span>
2158:                     (<span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>].<span class="ruby-identifier">keys</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">params</span>.<span class="ruby-identifier">keys</span>).<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span>
2159:                       <span class="ruby-identifier">merge</span> = <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>][<span class="ruby-identifier">key</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">key</span>] <span class="ruby-comment cmt"># merge if both scopes have the same key</span>
2160:                       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">key</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:conditions</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">merge</span>
2161:                         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">key</span>].<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>][<span class="ruby-identifier">key</span>].<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
2162:                           <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>][<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">merge_conditions</span>(<span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>][<span class="ruby-identifier">key</span>].<span class="ruby-identifier">deep_merge</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">key</span>]))
2163:                         <span class="ruby-keyword kw">else</span>
2164:                           <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>][<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">merge_conditions</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">key</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>][<span class="ruby-identifier">key</span>])
2165:                         <span class="ruby-keyword kw">end</span>
2166:                       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">key</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:include</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">merge</span>
2167:                         <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>][<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">merge_includes</span>(<span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>][<span class="ruby-identifier">key</span>], <span class="ruby-identifier">params</span>[<span class="ruby-identifier">key</span>]).<span class="ruby-identifier">uniq</span>
2168:                       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">key</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:joins</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">merge</span>
2169:                         <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>][<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">merge_joins</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">key</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>][<span class="ruby-identifier">key</span>])
2170:                       <span class="ruby-keyword kw">else</span>
2171:                         <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>][<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>][<span class="ruby-identifier">key</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">key</span>]
2172:                       <span class="ruby-keyword kw">end</span>
2173:                     <span class="ruby-keyword kw">end</span>
2174:                   <span class="ruby-keyword kw">else</span>
2175:                     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">action</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:reverse_merge</span>
2176:                       <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>] = <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>].<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">params</span>)
2177:                     <span class="ruby-keyword kw">else</span>
2178:                       <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>] = <span class="ruby-identifier">params</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>])
2179:                     <span class="ruby-keyword kw">end</span>
2180:                   <span class="ruby-keyword kw">end</span>
2181:                 <span class="ruby-keyword kw">else</span>
2182:                   <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>] = <span class="ruby-identifier">params</span>
2183:               <span class="ruby-keyword kw">end</span>
2184:               <span class="ruby-identifier">hash</span>
2185:             <span class="ruby-keyword kw">end</span>
2186:           <span class="ruby-keyword kw">end</span>
2187: 
2188:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scoped_methods</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">method_scoping</span>
2189:           <span class="ruby-keyword kw">begin</span>
2190:             <span class="ruby-keyword kw">yield</span>
2191:           <span class="ruby-keyword kw">ensure</span>
2192:             <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scoped_methods</span>.<span class="ruby-identifier">pop</span>
2193:           <span class="ruby-keyword kw">end</span>
2194:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div class="method">
  <div class="title">
    <a name="M002430"></a><b>==</b>(comparison_object)
  </div>
  <div class="description">
  <p>
Returns true if the <tt>comparison_object</tt> is the same object, or is of
the same type and has the same <a href="Base.html#M002399">id</a>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002430_source')" id="l_M002430_source">show source</a> ]</p>
  <div id="M002430_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2865</span>
2865:       <span class="ruby-keyword kw">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">comparison_object</span>)
2866:         <span class="ruby-identifier">comparison_object</span>.<span class="ruby-identifier">equal?</span>(<span class="ruby-keyword kw">self</span>) <span class="ruby-operator">||</span>
2867:           (<span class="ruby-identifier">comparison_object</span>.<span class="ruby-identifier">instance_of?</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>) <span class="ruby-operator">&amp;&amp;</span>
2868:             <span class="ruby-identifier">comparison_object</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">id</span> <span class="ruby-operator">&amp;&amp;</span>
2869:             <span class="ruby-operator">!</span><span class="ruby-identifier">comparison_object</span>.<span class="ruby-identifier">new_record?</span>)
2870:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002420"></a><b>[]</b>(attr_name)
  </div>
  <div class="description">
  <p>
Returns the value of the attribute identified by <tt>attr_name</tt> after
it has been typecast (for example, &quot;2004-12-12&quot; in a data column
is cast to a date object, like Date.new(2004, 12, 12)). (Alias for the
protected read_attribute method).
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002420_source')" id="l_M002420_source">show source</a> ]</p>
  <div id="M002420_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2763</span>
2763:       <span class="ruby-keyword kw">def</span> <span class="ruby-operator">[]</span>(<span class="ruby-identifier">attr_name</span>)
2764:         <span class="ruby-identifier">read_attribute</span>(<span class="ruby-identifier">attr_name</span>)
2765:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002421"></a><b>[]=</b>(attr_name, value)
  </div>
  <div class="description">
  <p>
Updates the attribute identified by <tt>attr_name</tt> with the specified
<tt>value</tt>. (Alias for the protected write_attribute method).
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002421_source')" id="l_M002421_source">show source</a> ]</p>
  <div id="M002421_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2769</span>
2769:       <span class="ruby-keyword kw">def</span> <span class="ruby-operator">[]=</span>(<span class="ruby-identifier">attr_name</span>, <span class="ruby-identifier">value</span>)
2770:         <span class="ruby-identifier">write_attribute</span>(<span class="ruby-identifier">attr_name</span>, <span class="ruby-identifier">value</span>)
2771:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002425"></a><b>attribute_for_inspect</b>(attr_name)
  </div>
  <div class="description">
  <p>
Returns an <tt><a href="Base.html#M002377">inspect</a></tt>-like string for
the value of the attribute <tt>attr_name</tt>. String <a
href="Base.html#M002423">attributes</a> are elided after 50 characters, and
Date and Time <a href="Base.html#M002423">attributes</a> are returned in
the <tt>:db</tt> format. Other <a href="Base.html#M002423">attributes</a>
return the value of <tt><a href="Base.html#M002377">inspect</a></tt>
without modification.
</p>
<pre>
  person = Person.create!(:name =&gt; &quot;David Heinemeier Hansson &quot; * 3)

  person.attribute_for_inspect(:name)
  # =&gt; '&quot;David Heinemeier Hansson David Heinemeier Hansson D...&quot;'

  person.attribute_for_inspect(:created_at)
  # =&gt; '&quot;2009-01-12 04:48:57&quot;'
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002425_source')" id="l_M002425_source">show source</a> ]</p>
  <div id="M002425_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2830</span>
2830:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attribute_for_inspect</span>(<span class="ruby-identifier">attr_name</span>)
2831:         <span class="ruby-identifier">value</span> = <span class="ruby-identifier">read_attribute</span>(<span class="ruby-identifier">attr_name</span>)
2832: 
2833:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">50</span>
2834:           <span class="ruby-node">&quot;#{value[0..50]}...&quot;</span>.<span class="ruby-identifier">inspect</span>
2835:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Date</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Time</span>)
2836:           <span class="ruby-node">%(&quot;#{value.to_s(:db)}&quot;)</span>
2837:         <span class="ruby-keyword kw">else</span>
2838:           <span class="ruby-identifier">value</span>.<span class="ruby-identifier">inspect</span>
2839:         <span class="ruby-keyword kw">end</span>
2840:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002428"></a><b>attribute_names</b>()
  </div>
  <div class="description">
  <p>
Returns an array of names for the <a
href="Base.html#M002423">attributes</a> available on this object sorted
alphabetically.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002428_source')" id="l_M002428_source">show source</a> ]</p>
  <div id="M002428_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2855</span>
2855:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attribute_names</span>
2856:         <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">sort</span>
2857:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002426"></a><b>attribute_present?</b>(attribute)
  </div>
  <div class="description">
  <p>
Returns true if the specified <tt>attribute</tt> has been set by the user
or by a database load and is neither nil nor empty? (the latter only
applies to objects that respond to empty?, most notably Strings).
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002426_source')" id="l_M002426_source">show source</a> ]</p>
  <div id="M002426_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2844</span>
2844:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attribute_present?</span>(<span class="ruby-identifier">attribute</span>)
2845:         <span class="ruby-identifier">value</span> = <span class="ruby-identifier">read_attribute</span>(<span class="ruby-identifier">attribute</span>)
2846:         <span class="ruby-operator">!</span><span class="ruby-identifier">value</span>.<span class="ruby-identifier">blank?</span>
2847:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002423"></a><b>attributes</b>()
  </div>
  <div class="description">
  <p>
Returns a <a href="Base.html#M002432">hash</a> of <a
href="Base.html#M002340">all</a> the <a
href="Base.html#M002423">attributes</a> with their names as keys and the
values of the <a href="Base.html#M002423">attributes</a> as values.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002423_source')" id="l_M002423_source">show source</a> ]</p>
  <div id="M002423_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2803</span>
2803:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attributes</span>
2804:         <span class="ruby-identifier">attrs</span> = {}
2805:         <span class="ruby-identifier">attribute_names</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span> <span class="ruby-identifier">attrs</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">read_attribute</span>(<span class="ruby-identifier">name</span>) }
2806:         <span class="ruby-identifier">attrs</span>
2807:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002422"></a><b>attributes=</b>(new_attributes, guard_protected_attributes = true)
  </div>
  <div class="description">
  <p>
Allows you to set <a href="Base.html#M002340">all</a> the <a
href="Base.html#M002423">attributes</a> at once by passing in a <a
href="Base.html#M002432">hash</a> with keys matching the attribute names
(which again matches the column names).
</p>
<p>
If <tt>guard_protected_attributes</tt> is true (the default), then
sensitive <a href="Base.html#M002423">attributes</a> can be protected from
this form of mass-assignment by using the <tt><a
href="Base.html#M002355">attr_protected</a></tt> macro. Or you can
alternatively specify which <a href="Base.html#M002423">attributes</a>
<b>can</b> be accessed with the <tt><a
href="Base.html#M002356">attr_accessible</a></tt> macro. Then <a
href="Base.html#M002340">all</a> the <a
href="Base.html#M002423">attributes</a> not included in that won&#8216;t be
allowed to be mass-assigned.
</p>
<pre>
  class User &lt; ActiveRecord::Base
    attr_protected :is_admin
  end

  user = User.new
  user.attributes = { :username =&gt; 'Phusion', :is_admin =&gt; true }
  user.username   # =&gt; &quot;Phusion&quot;
  user.is_admin?  # =&gt; false

  user.send(:attributes=, { :username =&gt; 'Phusion', :is_admin =&gt; true }, false)
  user.is_admin?  # =&gt; true
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002422_source')" id="l_M002422_source">show source</a> ]</p>
  <div id="M002422_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2793</span>
2793:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attributes=</span>(<span class="ruby-identifier">new_attributes</span>, <span class="ruby-identifier">guard_protected_attributes</span> = <span class="ruby-keyword kw">true</span>)
2794:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_attributes</span>.<span class="ruby-identifier">nil?</span>
2795:         <span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">new_attributes</span>.<span class="ruby-identifier">dup</span>
2796:         <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">stringify_keys!</span>
2797: 
2798:         <span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">remove_attributes_protected_from_mass_assignment</span>(<span class="ruby-identifier">attributes</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">guard_protected_attributes</span>
2799:         <span class="ruby-identifier">assign_attributes</span>(<span class="ruby-identifier">attributes</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">attributes</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">any?</span>
2800:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002424"></a><b>attributes_before_type_cast</b>()
  </div>
  <div class="description">
  <p>
Returns a <a href="Base.html#M002432">hash</a> of <a
href="Base.html#M002423">attributes</a> before typecasting and
deserialization.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002424_source')" id="l_M002424_source">show source</a> ]</p>
  <div id="M002424_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2810</span>
2810:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attributes_before_type_cast</span>
2811:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">attribute_names</span>.<span class="ruby-identifier">inject</span>({}) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attrs</span>, <span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
2812:           <span class="ruby-identifier">attrs</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">read_attribute_before_type_cast</span>(<span class="ruby-identifier">name</span>)
2813:           <span class="ruby-identifier">attrs</span>
2814:         <span class="ruby-keyword kw">end</span>
2815:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002409"></a><b>becomes</b>(klass)
  </div>
  <div class="description">
  <p>
Returns an instance of the specified <tt>klass</tt> with the <a
href="Base.html#M002423">attributes</a> of the current record. This is
mostly useful in relation to single-table inheritance structures where you
want a subclass to appear as the superclass. This can be used along with
record identification in Action Pack to allow, say, <tt>Client &lt;
Company</tt> to do something like render <tt>:partial =&gt;
@client.becomes(Company)</tt> to render that instance using the
companies/company partial instead of clients/client.
</p>
<p>
Note: The <a href="Base.html#M002398">new</a> instance will share a link to
the same <a href="Base.html#M002423">attributes</a> as the original class.
So any change to the <a href="Base.html#M002423">attributes</a> in either
instance will affect the other.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002409_source')" id="l_M002409_source">show source</a> ]</p>
  <div id="M002409_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2660</span>
2660:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">becomes</span>(<span class="ruby-identifier">klass</span>)
2661:         <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">tap</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">became</span><span class="ruby-operator">|</span>
2662:           <span class="ruby-identifier">became</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value str">&quot;@attributes&quot;</span>, <span class="ruby-ivar">@attributes</span>)
2663:           <span class="ruby-identifier">became</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value str">&quot;@attributes_cache&quot;</span>, <span class="ruby-ivar">@attributes_cache</span>)
2664:           <span class="ruby-identifier">became</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value str">&quot;@new_record&quot;</span>, <span class="ruby-identifier">new_record?</span>)
2665:         <span class="ruby-keyword kw">end</span>
2666:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002401"></a><b>cache_key</b>()
  </div>
  <div class="description">
  <p>
Returns a cache key that can be used to identify this record.
</p>
<h4>Examples</h4>
<pre>
  Product.new.cache_key     # =&gt; &quot;products/new&quot;
  Product.find(5).cache_key # =&gt; &quot;products/5&quot; (updated_at not available)
  Person.find(5).cache_key  # =&gt; &quot;people/5-20071224150000&quot; (updated_at available)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002401_source')" id="l_M002401_source">show source</a> ]</p>
  <div id="M002401_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2542</span>
2542:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cache_key</span>
2543:         <span class="ruby-keyword kw">case</span>
2544:         <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">new_record?</span>
2545:           <span class="ruby-node">&quot;#{self.class.model_name.cache_key}/new&quot;</span>
2546:         <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">timestamp</span> = <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">:updated_at</span>]
2547:           <span class="ruby-node">&quot;#{self.class.model_name.cache_key}/#{id}-#{timestamp.to_s(:number)}&quot;</span>
2548:         <span class="ruby-keyword kw">else</span>
2549:           <span class="ruby-node">&quot;#{self.class.model_name.cache_key}/#{id}&quot;</span>
2550:         <span class="ruby-keyword kw">end</span>
2551:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002408"></a><b>clone</b>()
  </div>
  <div class="description">
  <p>
Returns a <a href="Base.html#M002408">clone</a> of the record that
hasn&#8216;t been assigned an <a href="Base.html#M002399">id</a> yet and is
treated as a <a href="Base.html#M002398">new</a> record. Note that this is
a &quot;shallow&quot; <a href="Base.html#M002408">clone</a>: it copies the
object&#8216;s <a href="Base.html#M002423">attributes</a> only, not its
associations. The extent of a &quot;deep&quot; <a
href="Base.html#M002408">clone</a> is application-specific and is therefore
left to the application to implement according to its need.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002408_source')" id="l_M002408_source">show source</a> ]</p>
  <div id="M002408_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2645</span>
2645:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">clone</span>
2646:         <span class="ruby-identifier">attrs</span> = <span class="ruby-identifier">clone_attributes</span>(<span class="ruby-identifier">:read_attribute_before_type_cast</span>)
2647:         <span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">primary_key</span>)
2648:         <span class="ruby-identifier">record</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">new</span>
2649:         <span class="ruby-identifier">record</span>.<span class="ruby-identifier">send</span> <span class="ruby-identifier">:instance_variable_set</span>, <span class="ruby-value str">'@attributes'</span>, <span class="ruby-identifier">attrs</span>
2650:         <span class="ruby-identifier">record</span>
2651:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002429"></a><b>column_for_attribute</b>(name)
  </div>
  <div class="description">
  <p>
Returns the column object for the named attribute.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002429_source')" id="l_M002429_source">show source</a> ]</p>
  <div id="M002429_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2860</span>
2860:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">column_for_attribute</span>(<span class="ruby-identifier">name</span>)
2861:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">columns_hash</span>[<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>]
2862:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002326"></a><b>connection</b>()
  </div>
  <div class="description">
  <p>
Returns the <a href="Base.html#M002326">connection</a> currently associated
with the class. This can also be used to &quot;borrow&quot; the <a
href="Base.html#M002326">connection</a> to do database work that
isn&#8216;t easily done without going straight to SQL.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002326_source')" id="l_M002326_source">show source</a> ]</p>
  <div id="M002326_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb, line 19</span>
19:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">connection</span>
20:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">connection</span>
21:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002415"></a><b>decrement</b>(attribute, by = 1)
  </div>
  <div class="description">
  <p>
Initializes <tt>attribute</tt> to zero if <tt>nil</tt> and subtracts the
value passed as <tt>by</tt> (default is 1). The <a
href="Base.html#M002415">decrement</a> is performed directly on the
underlying attribute, no setter is invoked. Only makes sense for
number-based <a href="Base.html#M002423">attributes</a>. Returns
<tt>self</tt>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002415_source')" id="l_M002415_source">show source</a> ]</p>
  <div id="M002415_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2717</span>
2717:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decrement</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">by</span> = <span class="ruby-value">1</span>)
2718:         <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>] <span class="ruby-operator">||=</span> <span class="ruby-value">0</span>
2719:         <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>] <span class="ruby-operator">-=</span> <span class="ruby-identifier">by</span>
2720:         <span class="ruby-keyword kw">self</span>
2721:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002416"></a><b>decrement!</b>(attribute, by = 1)
  </div>
  <div class="description">
  <p>
Wrapper around <tt><a href="Base.html#M002415">decrement</a></tt> that
saves the record. This method differs from its non-bang version in that it
passes through the attribute setter. Saving is not subjected to validation
checks. Returns <tt>true</tt> if the record could be saved.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002416_source')" id="l_M002416_source">show source</a> ]</p>
  <div id="M002416_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2727</span>
2727:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decrement!</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">by</span> = <span class="ruby-value">1</span>)
2728:         <span class="ruby-identifier">decrement</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">by</span>).<span class="ruby-identifier">update_attribute</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>])
2729:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002406"></a><b>delete</b>()
  </div>
  <div class="description">
  <p>
Deletes the record in the database and freezes this instance to reflect
that no changes should be made (since they can&#8216;t be persisted).
Returns the frozen instance.
</p>
<p>
The row is simply removed with a SQL <tt>DELETE</tt> statement on the
record&#8216;s primary key, and no callbacks are executed.
</p>
<p>
To enforce the object&#8216;s <tt>before_destroy</tt> and
<tt>after_destroy</tt> callbacks, <a href="Observer.html">Observer</a>
methods, or any <tt>:dependent</tt> association options, use <tt><a
href="Base.html#M002346">destroy</a></tt>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002406_source')" id="l_M002406_source">show source</a> ]</p>
  <div id="M002406_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2619</span>
2619:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete</span>
2620:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">id</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">new_record?</span>
2621:         <span class="ruby-ivar">@destroyed</span> = <span class="ruby-keyword kw">true</span>
2622:         <span class="ruby-identifier">freeze</span>
2623:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002407"></a><b>destroy</b>()
  </div>
  <div class="description">
  <p>
Deletes the record in the database and freezes this instance to reflect
that no changes should be made (since they can&#8216;t be persisted).
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002407_source')" id="l_M002407_source">show source</a> ]</p>
  <div id="M002407_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2627</span>
2627:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">destroy</span>
2628:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">new_record?</span>
2629:           <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">delete</span>(
2630:             <span class="ruby-node">&quot;DELETE FROM #{self.class.quoted_table_name} &quot;</span> <span class="ruby-operator">+</span>
2631:             <span class="ruby-node">&quot;WHERE #{connection.quote_column_name(self.class.primary_key)} = #{quoted_id}&quot;</span>,
2632:             <span class="ruby-node">&quot;#{self.class.name} Destroy&quot;</span>
2633:           )
2634:         <span class="ruby-keyword kw">end</span>
2635: 
2636:         <span class="ruby-ivar">@destroyed</span> = <span class="ruby-keyword kw">true</span>
2637:         <span class="ruby-identifier">freeze</span>
2638:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002435"></a><b>destroyed?</b>()
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if the record has been destroyed.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002435_source')" id="l_M002435_source">show source</a> ]</p>
  <div id="M002435_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2894</span>
2894:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">destroyed?</span>
2895:         <span class="ruby-ivar">@destroyed</span>
2896:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002431"></a><b>eql?</b>(comparison_object)
  </div>
  <div class="description">
  <p>
Delegates to ==
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002431_source')" id="l_M002431_source">show source</a> ]</p>
  <div id="M002431_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2873</span>
2873:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">eql?</span>(<span class="ruby-identifier">comparison_object</span>)
2874:         <span class="ruby-keyword kw">self</span> <span class="ruby-operator">==</span> (<span class="ruby-identifier">comparison_object</span>)
2875:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002433"></a><b>freeze</b>()
  </div>
  <div class="description">
  <p>
Freeze the <a href="Base.html#M002423">attributes</a> <a
href="Base.html#M002432">hash</a> such that associations are still
accessible, even on destroyed records.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002433_source')" id="l_M002433_source">show source</a> ]</p>
  <div id="M002433_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2884</span>
2884:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">freeze</span>
2885:         <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">freeze</span>; <span class="ruby-keyword kw">self</span>
2886:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002434"></a><b>frozen?</b>()
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if the <a href="Base.html#M002423">attributes</a> <a
href="Base.html#M002432">hash</a> has been frozen.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002434_source')" id="l_M002434_source">show source</a> ]</p>
  <div id="M002434_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2889</span>
2889:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">frozen?</span>
2890:         <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">frozen?</span>
2891:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002427"></a><b>has_attribute?</b>(attr_name)
  </div>
  <div class="description">
  <p>
Returns true if the given attribute is in the <a
href="Base.html#M002423">attributes</a> <a
href="Base.html#M002432">hash</a>
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002427_source')" id="l_M002427_source">show source</a> ]</p>
  <div id="M002427_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2850</span>
2850:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">has_attribute?</span>(<span class="ruby-identifier">attr_name</span>)
2851:         <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">attr_name</span>.<span class="ruby-identifier">to_s</span>)
2852:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002432"></a><b>hash</b>()
  </div>
  <div class="description">
  <p>
Delegates to <a href="Base.html#M002399">id</a> in order to allow two
records of the same type and <a href="Base.html#M002399">id</a> to work
with something like:
</p>
<pre>
  [ Person.find(1), Person.find(2), Person.find(3) ] &amp; [ Person.find(1), Person.find(4) ] # =&gt; [ Person.find(1) ]
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002432_source')" id="l_M002432_source">show source</a> ]</p>
  <div id="M002432_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2879</span>
2879:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">hash</span>
2880:         <span class="ruby-identifier">id</span>.<span class="ruby-identifier">hash</span>
2881:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002399"></a><b>id</b>()
  </div>
  <div class="description">
  <p>
A model instance&#8216;s primary key is always available as model.id
whether you name it the default &#8216;<a
href="Base.html#M002399">id</a>&#8217; or set it to something else.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002399_source')" id="l_M002399_source">show source</a> ]</p>
  <div id="M002399_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2498</span>
2498:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">id</span>
2499:         <span class="ruby-identifier">attr_name</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">primary_key</span>
2500:         <span class="ruby-identifier">column</span> = <span class="ruby-identifier">column_for_attribute</span>(<span class="ruby-identifier">attr_name</span>)
2501: 
2502:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:define_read_method</span>, <span class="ruby-identifier">:id</span>, <span class="ruby-identifier">attr_name</span>, <span class="ruby-identifier">column</span>)
2503:         <span class="ruby-comment cmt"># now that the method exists, call it</span>
2504:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">send</span> <span class="ruby-identifier">attr_name</span>.<span class="ruby-identifier">to_sym</span>
2505: 
2506:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002402"></a><b>id=</b>(value)
  </div>
  <div class="description">
  <p>
Sets the primary ID.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002402_source')" id="l_M002402_source">show source</a> ]</p>
  <div id="M002402_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2562</span>
2562:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">id=</span>(<span class="ruby-identifier">value</span>)
2563:         <span class="ruby-identifier">write_attribute</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">primary_key</span>, <span class="ruby-identifier">value</span>)
2564:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002413"></a><b>increment</b>(attribute, by = 1)
  </div>
  <div class="description">
  <p>
Initializes <tt>attribute</tt> to zero if <tt>nil</tt> and adds the value
passed as <tt>by</tt> (default is 1). The <a
href="Base.html#M002413">increment</a> is performed directly on the
underlying attribute, no setter is invoked. Only makes sense for
number-based <a href="Base.html#M002423">attributes</a>. Returns
<tt>self</tt>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002413_source')" id="l_M002413_source">show source</a> ]</p>
  <div id="M002413_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2700</span>
2700:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">increment</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">by</span> = <span class="ruby-value">1</span>)
2701:         <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>] <span class="ruby-operator">||=</span> <span class="ruby-value">0</span>
2702:         <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>] <span class="ruby-operator">+=</span> <span class="ruby-identifier">by</span>
2703:         <span class="ruby-keyword kw">self</span>
2704:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002414"></a><b>increment!</b>(attribute, by = 1)
  </div>
  <div class="description">
  <p>
Wrapper around <tt><a href="Base.html#M002413">increment</a></tt> that
saves the record. This method differs from its non-bang version in that it
passes through the attribute setter. Saving is not subjected to validation
checks. Returns <tt>true</tt> if the record could be saved.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002414_source')" id="l_M002414_source">show source</a> ]</p>
  <div id="M002414_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2710</span>
2710:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">increment!</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">by</span> = <span class="ruby-value">1</span>)
2711:         <span class="ruby-identifier">increment</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">by</span>).<span class="ruby-identifier">update_attribute</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>])
2712:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002438"></a><b>inspect</b>()
  </div>
  <div class="description">
  <p>
Returns the contents of the record as a nicely formatted string.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002438_source')" id="l_M002438_source">show source</a> ]</p>
  <div id="M002438_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2910</span>
2910:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect</span>
2911:         <span class="ruby-identifier">attributes_as_nice_string</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">column_names</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
2912:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">has_attribute?</span>(<span class="ruby-identifier">name</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">new_record?</span>
2913:             <span class="ruby-node">&quot;#{name}: #{attribute_for_inspect(name)}&quot;</span>
2914:           <span class="ruby-keyword kw">end</span>
2915:         }.<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;, &quot;</span>)
2916:         <span class="ruby-node">&quot;#&lt;#{self.class} #{attributes_as_nice_string}&gt;&quot;</span>
2917:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002403"></a><b>new_record?</b>()
  </div>
  <div class="description">
  <p>
Returns true if this object hasn&#8216;t been saved yet &#8212; that is, a
record for the object doesn&#8216;t exist yet; otherwise, returns false.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002403_source')" id="l_M002403_source">show source</a> ]</p>
  <div id="M002403_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2567</span>
2567:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">new_record?</span>
2568:         <span class="ruby-ivar">@new_record</span> <span class="ruby-operator">||</span> <span class="ruby-keyword kw">false</span>
2569:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002437"></a><b>readonly!</b>()
  </div>
  <div class="description">
  <p>
Marks this record as read only.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002437_source')" id="l_M002437_source">show source</a> ]</p>
  <div id="M002437_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2905</span>
2905:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">readonly!</span>
2906:         <span class="ruby-ivar">@readonly</span> = <span class="ruby-keyword kw">true</span>
2907:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002436"></a><b>readonly?</b>()
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if the record is read only. Records loaded through
joins with piggy-back <a href="Base.html#M002423">attributes</a> will be
marked as read only since they cannot be saved.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002436_source')" id="l_M002436_source">show source</a> ]</p>
  <div id="M002436_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2900</span>
2900:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">readonly?</span>
2901:         <span class="ruby-keyword kw">defined?</span>(<span class="ruby-ivar">@readonly</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@readonly</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">true</span>
2902:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002419"></a><b>reload</b>(options = nil)
  </div>
  <div class="description">
  <p>
Reloads the <a href="Base.html#M002423">attributes</a> of this object from
the database. The optional options argument is passed to <a
href="Base.html#M002337">find</a> when reloading so you may do e.g.
record.reload(:lock =&gt; true) to <a href="Base.html#M002419">reload</a>
the same record with an exclusive row lock.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002419_source')" id="l_M002419_source">show source</a> ]</p>
  <div id="M002419_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2752</span>
2752:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reload</span>(<span class="ruby-identifier">options</span> = <span class="ruby-keyword kw">nil</span>)
2753:         <span class="ruby-identifier">clear_aggregation_cache</span>
2754:         <span class="ruby-identifier">clear_association_cache</span>
2755:         <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">update</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:with_exclusive_scope</span>) { <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">find</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">options</span>) }.<span class="ruby-identifier">instance_variable_get</span>(<span class="ruby-value str">'@attributes'</span>))
2756:         <span class="ruby-ivar">@attributes_cache</span> = {}
2757:         <span class="ruby-keyword kw">self</span>
2758:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002404"></a><b>save(perform_validation = true)<br />
</b>
  </div>
  <div class="description">
  <p>
Saves the model.
</p>
<p>
If the model is <a href="Base.html#M002398">new</a> a record gets created
in the database, otherwise the existing record gets updated.
</p>
<p>
If <tt>perform_validation</tt> is true validations run. If any of them fail
the action is cancelled and <tt><a href="Base.html#M002404">save</a></tt>
returns <tt>false</tt>. If the flag is false validations are bypassed
altogether. See <a href="Validations.html">ActiveRecord::Validations</a>
for more information.
</p>
<p>
There&#8216;s a series of callbacks associated with <tt><a
href="Base.html#M002404">save</a></tt>. If any of the <tt>before_*</tt>
callbacks return <tt>false</tt> the action is cancelled and <tt><a
href="Base.html#M002404">save</a></tt> returns <tt>false</tt>. See <a
href="Callbacks.html">ActiveRecord::Callbacks</a> for further details.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002404_source')" id="l_M002404_source">show source</a> ]</p>
  <div id="M002404_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2588</span>
2588:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">save</span>
2589:         <span class="ruby-identifier">create_or_update</span>
2590:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002405"></a><b>save!</b>()
  </div>
  <div class="description">
  <p>
Saves the model.
</p>
<p>
If the model is <a href="Base.html#M002398">new</a> a record gets created
in the database, otherwise the existing record gets updated.
</p>
<p>
With <tt><a href="Base.html#M002405">save!</a></tt> validations always run.
If any of them fail <a
href="RecordInvalid.html">ActiveRecord::RecordInvalid</a> gets raised. See
<a href="Validations.html">ActiveRecord::Validations</a> for more
information.
</p>
<p>
There&#8216;s a series of callbacks associated with <tt><a
href="Base.html#M002405">save!</a></tt>. If any of the <tt>before_*</tt>
callbacks return <tt>false</tt> the action is cancelled and <tt><a
href="Base.html#M002405">save!</a></tt> raises <a
href="RecordNotSaved.html">ActiveRecord::RecordNotSaved</a>. See <a
href="Callbacks.html">ActiveRecord::Callbacks</a> for further details.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002405_source')" id="l_M002405_source">show source</a> ]</p>
  <div id="M002405_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2605</span>
2605:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">save!</span>
2606:         <span class="ruby-identifier">create_or_update</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">raise</span>(<span class="ruby-constant">RecordNotSaved</span>)
2607:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002400"></a><b>to_param</b>()
  </div>
  <div class="description">
  <p>
Returns a String, which Action Pack uses for constructing an URL to this
object. The default implementation returns this record&#8216;s <a
href="Base.html#M002399">id</a> as a String, or nil if this record&#8216;s
unsaved.
</p>
<p>
For example, suppose that you have a User model, and that you have a
<tt>map.resources :users</tt> route. Normally, <tt>user_path</tt> will
construct a path with the user object&#8216;s &#8216;<a
href="Base.html#M002399">id</a>&#8217; in it:
</p>
<pre>
  user = User.find_by_name('Phusion')
  user_path(user)  # =&gt; &quot;/users/1&quot;
</pre>
<p>
You can override <tt><a href="Base.html#M002400">to_param</a></tt> in your
model to make <tt>user_path</tt> construct a path using the user&#8216;s
name instead of the user&#8216;s <a href="Base.html#M002399">id</a>:
</p>
<pre>
  class User &lt; ActiveRecord::Base
    def to_param  # overridden
      name
    end
  end

  user = User.find_by_name('Phusion')
  user_path(user)  # =&gt; &quot;/users/Phusion&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002400_source')" id="l_M002400_source">show source</a> ]</p>
  <div id="M002400_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2530</span>
2530:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_param</span>
2531:         <span class="ruby-comment cmt"># We can't use alias_method here, because method 'id' optimizes itself on the fly.</span>
2532:         (<span class="ruby-identifier">id</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">id</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">id</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-comment cmt"># Be sure to stringify the id for routes</span>
2533:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002417"></a><b>toggle</b>(attribute)
  </div>
  <div class="description">
  <p>
Assigns to <tt>attribute</tt> the boolean opposite of <tt>attribute?</tt>.
So if the predicate returns <tt>true</tt> the attribute will become
<tt>false</tt>. This method toggles directly the underlying value without
calling any setter. Returns <tt>self</tt>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002417_source')" id="l_M002417_source">show source</a> ]</p>
  <div id="M002417_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2735</span>
2735:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">toggle</span>(<span class="ruby-identifier">attribute</span>)
2736:         <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>] = <span class="ruby-operator">!</span><span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{attribute}?&quot;</span>)
2737:         <span class="ruby-keyword kw">self</span>
2738:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002418"></a><b>toggle!</b>(attribute)
  </div>
  <div class="description">
  <p>
Wrapper around <tt><a href="Base.html#M002417">toggle</a></tt> that saves
the record. This method differs from its non-bang version in that it passes
through the attribute setter. Saving is not subjected to validation checks.
Returns <tt>true</tt> if the record could be saved.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002418_source')" id="l_M002418_source">show source</a> ]</p>
  <div id="M002418_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2744</span>
2744:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">toggle!</span>(<span class="ruby-identifier">attribute</span>)
2745:         <span class="ruby-identifier">toggle</span>(<span class="ruby-identifier">attribute</span>).<span class="ruby-identifier">update_attribute</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>])
2746:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002410"></a><b>update_attribute</b>(name, value)
  </div>
  <div class="description">
  <p>
Updates a single attribute and saves the record without going through the
normal validation procedure. This is especially useful for boolean flags on
existing records. The regular <tt><a
href="Base.html#M002410">update_attribute</a></tt> method in <a
href="Base.html">Base</a> is replaced with this when the validations module
is mixed in, which it is by default.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002410_source')" id="l_M002410_source">show source</a> ]</p>
  <div id="M002410_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2671</span>
2671:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_attribute</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span>)
2672:         <span class="ruby-identifier">send</span>(<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'='</span>, <span class="ruby-identifier">value</span>)
2673:         <span class="ruby-identifier">save</span>(<span class="ruby-keyword kw">false</span>)
2674:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002411"></a><b>update_attributes</b>(attributes)
  </div>
  <div class="description">
  <p>
Updates <a href="Base.html#M002340">all</a> the <a
href="Base.html#M002423">attributes</a> from the passed-in Hash and saves
the record. If the object is invalid, the saving will fail and false will
be returned.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002411_source')" id="l_M002411_source">show source</a> ]</p>
  <div id="M002411_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2678</span>
2678:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">attributes</span>)
2679:         <span class="ruby-identifier">with_transaction_returning_status</span>(<span class="ruby-identifier">:update_attributes_inside_transaction</span>, <span class="ruby-identifier">attributes</span>)
2680:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M002412"></a><b>update_attributes!</b>(attributes)
  </div>
  <div class="description">
  <p>
Updates an object just like <a
href="Base.html#M002411">Base.update_attributes</a> but calls <a
href="Base.html#M002405">save!</a> instead of <a
href="Base.html#M002404">save</a> so an exception is raised if the record
is invalid.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002412_source')" id="l_M002412_source">show source</a> ]</p>
  <div id="M002412_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2688</span>
2688:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_attributes!</span>(<span class="ruby-identifier">attributes</span>)
2689:         <span class="ruby-identifier">with_transaction_returning_status</span>(<span class="ruby-identifier">:update_attributes_inside_transaction!</span>, <span class="ruby-identifier">attributes</span>)
2690:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>

    </body>
</html>