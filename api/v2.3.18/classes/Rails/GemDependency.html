<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>Class: Rails::GemDependency</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />

    <script language="JavaScript" type="text/javascript">
    // <![CDATA[

        function toggleSource( id )
        {
          var elem
          var link

          if( document.getElementById )
          {
            elem = document.getElementById( id )
            link = document.getElementById( "l_" + id )
          }
          else if ( document.all )
          {
            elem = eval( "document.all." + id )
            link = eval( "document.all.l_" + id )
          }
          else
            return false;

          if( elem.style.display == "block" )
          {
            elem.style.display = "none"
            link.innerHTML = "show source"
          }
          else
          {
            elem.style.display = "block"
            link.innerHTML = "hide source"
          }
        }

        function openCode( url )
        {
          window.open( url, "SOURCE_CODE", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=480,width=750" ).focus();
        }
      // ]]>
    </script>
  </head>

  <body>
  <table width="100%" border='0' cellpadding='0' cellspacing='0' class='banner'><tr>
  <td class="file-title"><span class="file-title-prefix">Class</span><br />Rails::GemDependency</td>
  <td align="right">
    <table cellspacing="0" cellpadding="2">
      <tr valign="top">
        <td>In:</td>
        <td>
<a href="../../files/railties/lib/rails/gem_dependency_rb.html">railties/lib/rails/gem_dependency.rb</a>
        </td>
      </tr>
    <tr>
      <td>Parent:</td>
      <td>
Gem::Dependency
     </td>
   </tr>
         </table>
        </td>
        </tr>
      </table>
 <!-- banner header -->

  <div id="bodyContent">
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="#M001244">==</a></li>
  <li><a href="#M001223">add_frozen_gem_path</a></li>
  <li><a href="#M001226">add_load_paths</a></li>
  <li><a href="#M001238">build</a></li>
  <li><a href="#M001230">built?</a></li>
  <li><a href="#M001227">dependencies</a></li>
  <li><a href="#M001231">framework_gem?</a></li>
  <li><a href="#M001224">from_directory_name</a></li>
  <li><a href="#M001232">frozen?</a></li>
  <li><a href="#M001239">install</a></li>
  <li><a href="#M001233">installed?</a></li>
  <li><a href="#M001240">load</a></li>
  <li><a href="#M001234">load_paths_added?</a></li>
  <li><a href="#M001235">loaded?</a></li>
  <li><a href="#M001225">new</a></li>
  <li><a href="#M001241">refresh</a></li>
  <li><a href="#M001228">specification</a></li>
  <li><a href="#M001229">specification=</a></li>
  <li><a href="#M001242">unpack</a></li>
  <li><a href="#M001222">unpacked_path</a></li>
  <li><a href="#M001237">vendor_gem?</a></li>
  <li><a href="#M001236">vendor_rails?</a></li>
  <li><a href="#M001243">write_specification</a></li>
  </ul>





  <div class="sectiontitle">Attributes</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class='attr-rw'>
[RW]
    </td>
    <td class='attr-name'>dep</td>
    <td class='attr-desc'></td>
  </tr>
  <tr valign='top'>
    <td class='attr-rw'>
[RW]
    </td>
    <td class='attr-name'>lib</td>
    <td class='attr-desc'></td>
  </tr>
  <tr valign='top'>
    <td class='attr-rw'>
[RW]
    </td>
    <td class='attr-name'>source</td>
    <td class='attr-desc'></td>
  </tr>
  </table>

<div class="sectiontitle">Public Class methods</div>
<div class="method">
  <div class="title">
    <a name="M001223"></a><b>add_frozen_gem_path</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001223_source')" id="l_M001223_source">show source</a> ]</p>
  <div id="M001223_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/lib/rails/gem_dependency.rb, line 19</span>
19:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">add_frozen_gem_path</span>
20:       <span class="ruby-ivar">@@paths_loaded</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">begin</span>
21:         <span class="ruby-identifier">source_index</span> = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">VendorGemSourceIndex</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Gem</span>.<span class="ruby-identifier">source_index</span>)
22:         <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">clear_paths</span>
23:         <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">source_index</span> = <span class="ruby-identifier">source_index</span>
24:         <span class="ruby-comment cmt"># loaded before us - we can't change them, so mark them</span>
25:         <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">loaded_specs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-identifier">spec</span><span class="ruby-operator">|</span>
26:           <span class="ruby-ivar">@@framework_gems</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">spec</span>
27:         <span class="ruby-keyword kw">end</span>
28:         <span class="ruby-keyword kw">true</span>
29:       <span class="ruby-keyword kw">end</span>
30:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M001224"></a><b>from_directory_name</b>(directory_name, load_spec=true)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001224_source')" id="l_M001224_source">show source</a> ]</p>
  <div id="M001224_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/lib/rails/gem_dependency.rb, line 32</span>
32:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">from_directory_name</span>(<span class="ruby-identifier">directory_name</span>, <span class="ruby-identifier">load_spec</span>=<span class="ruby-keyword kw">true</span>)
33:       <span class="ruby-identifier">directory_name_parts</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">directory_name</span>).<span class="ruby-identifier">split</span>(<span class="ruby-value str">'-'</span>)
34:       
35:       <span class="ruby-identifier">version</span> = <span class="ruby-identifier">directory_name_parts</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">match</span>(<span class="ruby-regexp re">/^\d(\.\d|\.\w+)*$/</span>) }
36:       <span class="ruby-identifier">name</span>    = <span class="ruby-identifier">directory_name_parts</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-identifier">directory_name_parts</span>.<span class="ruby-identifier">index</span>(<span class="ruby-identifier">version</span>)<span class="ruby-operator">-</span><span class="ruby-value">1</span>].<span class="ruby-identifier">join</span>(<span class="ruby-value str">'-'</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">version</span>
37:       
38:       <span class="ruby-identifier">result</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">:version</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">version</span>)
39:       <span class="ruby-identifier">spec_filename</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">directory_name</span>, <span class="ruby-value str">'.specification'</span>)
40:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">load_spec</span>
41:         <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Missing specification file in #{File.dirname(spec_filename)}. Perhaps you need to do a 'rake gems:refresh_specs'\?&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">spec_filename</span>)
42:         <span class="ruby-identifier">spec</span> = <span class="ruby-constant">YAML</span><span class="ruby-operator">::</span><span class="ruby-identifier">load_file</span>(<span class="ruby-identifier">spec_filename</span>)
43:         <span class="ruby-identifier">result</span>.<span class="ruby-identifier">specification</span> = <span class="ruby-identifier">spec</span>
44:       <span class="ruby-keyword kw">end</span>
45:       <span class="ruby-identifier">result</span>
46:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ArgumentError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
47:       <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Unable to determine gem name and version from '#{directory_name}'&quot;</span>
48:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M001225"></a><b>new</b>(name, options = {})
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001225_source')" id="l_M001225_source">show source</a> ]</p>
  <div id="M001225_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/lib/rails/gem_dependency.rb, line 50</span>
50:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span> = {})
51:       <span class="ruby-identifier">require</span> <span class="ruby-value str">'rubygems'</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_defined?</span>(<span class="ruby-identifier">:Gem</span>)
52: 
53:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:requirement</span>]
54:         <span class="ruby-identifier">req</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:requirement</span>]
55:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:version</span>]
56:         <span class="ruby-identifier">req</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Requirement</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:version</span>])
57:       <span class="ruby-keyword kw">else</span>
58:         <span class="ruby-identifier">req</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Requirement</span>.<span class="ruby-identifier">default</span>
59:       <span class="ruby-keyword kw">end</span>
60: 
61:       <span class="ruby-ivar">@lib</span>      = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:lib</span>]
62:       <span class="ruby-ivar">@source</span>   = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:source</span>]
63:       <span class="ruby-ivar">@loaded</span>   = <span class="ruby-ivar">@frozen</span> = <span class="ruby-ivar">@load_paths_added</span> = <span class="ruby-keyword kw">false</span>
64: 
65:       <span class="ruby-keyword kw">super</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">req</span>)
66:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M001222"></a><b>unpacked_path</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001222_source')" id="l_M001222_source">show source</a> ]</p>
  <div id="M001222_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/lib/rails/gem_dependency.rb, line 13</span>
13:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unpacked_path</span>
14:       <span class="ruby-ivar">@unpacked_path</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-constant">RAILS_ROOT</span>, <span class="ruby-value str">'vendor'</span>, <span class="ruby-value str">'gems'</span>)
15:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div class="method">
  <div class="title">
    <a name="M001244"></a><b>==</b>(other)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001244_source')" id="l_M001244_source">show source</a> ]</p>
  <div id="M001244_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/gem_dependency.rb, line 272</span>
272:     <span class="ruby-keyword kw">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">other</span>)
273:       <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependency</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">&amp;&amp;</span>
274:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">requirement</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">requirement</span>
275:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M001226"></a><b>add_load_paths</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001226_source')" id="l_M001226_source">show source</a> ]</p>
  <div id="M001226_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/lib/rails/gem_dependency.rb, line 68</span>
68:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_load_paths</span>
69:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">add_frozen_gem_path</span>
70:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@loaded</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@load_paths_added</span>
71:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">framework_gem?</span>
72:         <span class="ruby-ivar">@load_paths_added</span> = <span class="ruby-ivar">@loaded</span> = <span class="ruby-ivar">@frozen</span> = <span class="ruby-keyword kw">true</span>
73:         <span class="ruby-keyword kw">return</span>
74:       <span class="ruby-keyword kw">end</span>
75: 
76:       <span class="ruby-keyword kw">begin</span>
77:         <span class="ruby-identifier">dep</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependency</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">requirement</span>)
78:         <span class="ruby-identifier">spec</span> = <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">source_index</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">_</span>,<span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">satisfies_requirement?</span>(<span class="ruby-identifier">dep</span>) }.<span class="ruby-identifier">last</span>
79:         <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">activate</span>           <span class="ruby-comment cmt"># a way that exists</span>
80:       <span class="ruby-keyword kw">rescue</span>
81:         <span class="ruby-identifier">gem</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">name</span>, <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">requirement</span> <span class="ruby-comment cmt"># &lt;  1.8 unhappy way</span>
82:       <span class="ruby-keyword kw">end</span>
83: 
84:       <span class="ruby-ivar">@spec</span> = <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">loaded_specs</span>[<span class="ruby-identifier">name</span>]
85:       <span class="ruby-ivar">@frozen</span> = <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">loaded_from</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">unpacked_path</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@spec</span>
86:       <span class="ruby-ivar">@load_paths_added</span> = <span class="ruby-keyword kw">true</span>
87:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">LoadError</span>
88:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M001238"></a><b>build</b>(options={})
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001238_source')" id="l_M001238_source">show source</a> ]</p>
  <div id="M001238_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/gem_dependency.rb, line 191</span>
191:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">build</span>(<span class="ruby-identifier">options</span>={})
192:       <span class="ruby-identifier">require</span> <span class="ruby-value str">'rails/gem_builder'</span>
193:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">specification</span>.<span class="ruby-identifier">nil?</span>
194:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>] <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">built?</span>
195:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">unpacked_specification_filename</span>)
196:         <span class="ruby-identifier">spec</span> = <span class="ruby-constant">YAML</span><span class="ruby-operator">::</span><span class="ruby-identifier">load_file</span>(<span class="ruby-identifier">unpacked_specification_filename</span>)
197:         <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemBuilder</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">spec</span>, <span class="ruby-identifier">unpacked_gem_directory</span>).<span class="ruby-identifier">build_extensions</span>
198:         <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Built gem: '#{unpacked_gem_directory}'&quot;</span>
199:       <span class="ruby-keyword kw">end</span>
200:       <span class="ruby-identifier">dependencies</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">dep</span><span class="ruby-operator">|</span> <span class="ruby-identifier">dep</span>.<span class="ruby-identifier">build</span>(<span class="ruby-identifier">options</span>) }
201:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M001230"></a><b>built?</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001230_source')" id="l_M001230_source">show source</a> ]</p>
  <div id="M001230_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/gem_dependency.rb, line 128</span>
128:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">built?</span>
129:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">frozen?</span>
130: 
131:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">vendor_gem?</span>
132:         <span class="ruby-identifier">specification</span>.<span class="ruby-identifier">extensions</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ext</span><span class="ruby-operator">|</span>
133:           <span class="ruby-identifier">makefile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">unpacked_gem_directory</span>, <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">ext</span>), <span class="ruby-value str">'Makefile'</span>)
134:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">makefile</span>)
135:         <span class="ruby-keyword kw">end</span>
136:       <span class="ruby-keyword kw">end</span>
137: 
138:       <span class="ruby-keyword kw">true</span>
139:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M001227"></a><b>dependencies</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001227_source')" id="l_M001227_source">show source</a> ]</p>
  <div id="M001227_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/lib/rails/gem_dependency.rb, line 90</span>
90:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">dependencies</span>
91:       <span class="ruby-keyword kw">return</span> [] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">framework_gem?</span>
92:       <span class="ruby-keyword kw">return</span> [] <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">installed?</span>
93:       <span class="ruby-identifier">specification</span>.<span class="ruby-identifier">dependencies</span>.<span class="ruby-identifier">reject</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dependency</span><span class="ruby-operator">|</span>
94:         <span class="ruby-identifier">dependency</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:development</span>
95:       <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dependency</span><span class="ruby-operator">|</span>
96:         <span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">dependency</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">:requirement</span> =<span class="ruby-operator">&gt;</span> (<span class="ruby-identifier">dependency</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:requirement</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">dependency</span>.<span class="ruby-identifier">requirement</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">dependency</span>.<span class="ruby-identifier">version_requirements</span>))
97:       <span class="ruby-keyword kw">end</span>
98:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M001231"></a><b>framework_gem?</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001231_source')" id="l_M001231_source">show source</a> ]</p>
  <div id="M001231_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/gem_dependency.rb, line 141</span>
141:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">framework_gem?</span>
142:       <span class="ruby-ivar">@@framework_gems</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">name</span>)
143:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M001232"></a><b>frozen?</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001232_source')" id="l_M001232_source">show source</a> ]</p>
  <div id="M001232_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/gem_dependency.rb, line 145</span>
145:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">frozen?</span>
146:       <span class="ruby-ivar">@frozen</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">vendor_rails?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">vendor_gem?</span>
147:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M001239"></a><b>install</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001239_source')" id="l_M001239_source">show source</a> ]</p>
  <div id="M001239_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/gem_dependency.rb, line 203</span>
203:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">install</span>
204:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">installed?</span>
205:         <span class="ruby-identifier">cmd</span> = <span class="ruby-node">&quot;#{gem_command} #{install_command.join(' ')}&quot;</span>
206:         <span class="ruby-identifier">puts</span> <span class="ruby-identifier">cmd</span>
207:         <span class="ruby-identifier">puts</span> <span class="ruby-node">%x(#{cmd})</span>
208:       <span class="ruby-keyword kw">end</span>
209:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M001233"></a><b>installed?</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001233_source')" id="l_M001233_source">show source</a> ]</p>
  <div id="M001233_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/gem_dependency.rb, line 149</span>
149:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">installed?</span>
150:       <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">loaded_specs</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">name</span>)
151:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M001240"></a><b>load</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001240_source')" id="l_M001240_source">show source</a> ]</p>
  <div id="M001240_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/gem_dependency.rb, line 211</span>
211:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">load</span>
212:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@loaded</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@load_paths_added</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">false</span>
213:       <span class="ruby-identifier">require</span>(<span class="ruby-ivar">@lib</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">name</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@lib</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">false</span>
214:       <span class="ruby-ivar">@loaded</span> = <span class="ruby-keyword kw">true</span>
215:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">LoadError</span>
216:       <span class="ruby-identifier">puts</span> <span class="ruby-identifier">$!</span>.<span class="ruby-identifier">to_s</span>
217:       <span class="ruby-identifier">$!</span>.<span class="ruby-identifier">backtrace</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">puts</span> <span class="ruby-identifier">b</span> }
218:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M001234"></a><b>load_paths_added?</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001234_source')" id="l_M001234_source">show source</a> ]</p>
  <div id="M001234_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/gem_dependency.rb, line 153</span>
153:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">load_paths_added?</span>
154:       <span class="ruby-comment cmt"># always try to add load paths - even if a gem is loaded, it may not</span>
155:       <span class="ruby-comment cmt"># be a compatible version (ie random_gem 0.4 is loaded and a later spec</span>
156:       <span class="ruby-comment cmt"># needs &gt;= 0.5 - gem 'random_gem' will catch this and error out)</span>
157:       <span class="ruby-ivar">@load_paths_added</span>
158:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M001235"></a><b>loaded?</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001235_source')" id="l_M001235_source">show source</a> ]</p>
  <div id="M001235_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/gem_dependency.rb, line 160</span>
160:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">loaded?</span>
161:       <span class="ruby-ivar">@loaded</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">begin</span>
162:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">vendor_rails?</span>
163:           <span class="ruby-keyword kw">true</span>
164:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">specification</span>.<span class="ruby-identifier">nil?</span>
165:           <span class="ruby-keyword kw">false</span>
166:         <span class="ruby-keyword kw">else</span>
167:           <span class="ruby-comment cmt"># check if the gem is loaded by inspecting $&quot;</span>
168:           <span class="ruby-comment cmt"># specification.files lists all the files contained in the gem</span>
169:           <span class="ruby-identifier">gem_files</span> = <span class="ruby-identifier">specification</span>.<span class="ruby-identifier">files</span>
170:           <span class="ruby-comment cmt"># select only the files contained in require_paths - typically in bin and lib</span>
171:           <span class="ruby-identifier">require_paths_regexp</span> = <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;^(#{specification.require_paths*'|'})/&quot;</span>)
172:           <span class="ruby-identifier">gem_lib_files</span> = <span class="ruby-identifier">gem_files</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">require_paths_regexp</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">f</span>) }
173:           <span class="ruby-comment cmt"># chop the leading directory off - a typical file might be in</span>
174:           <span class="ruby-comment cmt"># lib/gem_name/file_name.rb, but it will be 'require'd as gem_name/file_name.rb</span>
175:           <span class="ruby-identifier">gem_lib_files</span>.<span class="ruby-identifier">map!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'/'</span>, <span class="ruby-value">2</span>)[<span class="ruby-value">1</span>] }
176:           <span class="ruby-comment cmt"># if any of the files from the above list appear in $&quot;, the gem is assumed to</span>
177:           <span class="ruby-comment cmt"># have been loaded</span>
178:           <span class="ruby-operator">!</span>(<span class="ruby-identifier">gem_lib_files</span> <span class="ruby-operator">&amp;</span> <span class="ruby-identifier">$&quot;</span>).<span class="ruby-identifier">empty?</span>
179:         <span class="ruby-keyword kw">end</span>
180:       <span class="ruby-keyword kw">end</span>
181:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M001241"></a><b>refresh</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001241_source')" id="l_M001241_source">show source</a> ]</p>
  <div id="M001241_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/gem_dependency.rb, line 220</span>
220:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">refresh</span>
221:       <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">VendorGemSourceIndex</span>.<span class="ruby-identifier">silence_spec_warnings</span> = <span class="ruby-keyword kw">true</span>
222:       <span class="ruby-identifier">real_gems</span> = <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">source_index</span>.<span class="ruby-identifier">installed_source_index</span>
223:       <span class="ruby-identifier">exact_dep</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependency</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-node">&quot;= #{specification.version}&quot;</span>)
224:       <span class="ruby-identifier">matches</span> = <span class="ruby-identifier">real_gems</span>.<span class="ruby-identifier">search</span>(<span class="ruby-identifier">exact_dep</span>)
225:       <span class="ruby-identifier">installed_spec</span> = <span class="ruby-identifier">matches</span>.<span class="ruby-identifier">first</span>
226:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">frozen?</span>
227:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">installed_spec</span>
228:           <span class="ruby-comment cmt"># we have a real copy</span>
229:           <span class="ruby-comment cmt"># get a fresh spec - matches should only have one element</span>
230:           <span class="ruby-comment cmt"># note that there is no reliable method to check that the loaded</span>
231:           <span class="ruby-comment cmt"># spec is the same as the copy from real_gems - Gem.activate changes</span>
232:           <span class="ruby-comment cmt"># some of the fields</span>
233:           <span class="ruby-identifier">real_spec</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Specification</span>.<span class="ruby-identifier">load</span>(<span class="ruby-identifier">matches</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">loaded_from</span>)
234:           <span class="ruby-identifier">write_specification</span>(<span class="ruby-identifier">real_spec</span>)
235:           <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Reloaded specification for #{name} from installed gems.&quot;</span>
236:         <span class="ruby-keyword kw">else</span>
237:           <span class="ruby-comment cmt"># the gem isn't installed locally - write out our current specs</span>
238:           <span class="ruby-identifier">write_specification</span>(<span class="ruby-identifier">specification</span>)
239:           <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Gem #{name} not loaded locally - writing out current spec.&quot;</span>
240:         <span class="ruby-keyword kw">end</span>
241:       <span class="ruby-keyword kw">else</span>
242:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">framework_gem?</span>
243:           <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Gem directory for #{name} not found - check if it's loading before rails.&quot;</span>
244:         <span class="ruby-keyword kw">else</span>
245:           <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Something bad is going on - gem directory not found for #{name}.&quot;</span>
246:         <span class="ruby-keyword kw">end</span>
247:       <span class="ruby-keyword kw">end</span>
248:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M001228"></a><b>specification</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001228_source')" id="l_M001228_source">show source</a> ]</p>
  <div id="M001228_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/gem_dependency.rb, line 100</span>
100:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">specification</span>
101:       <span class="ruby-comment cmt"># code repeated from Gem.activate. Find a matching spec, or the currently loaded version.</span>
102:       <span class="ruby-comment cmt"># error out if loaded version and requested version are incompatible.</span>
103:       <span class="ruby-ivar">@spec</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">begin</span>
104:         <span class="ruby-identifier">matches</span> = <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">source_index</span>.<span class="ruby-identifier">search</span>(<span class="ruby-keyword kw">self</span>)
105:         <span class="ruby-identifier">matches</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@@framework_gems</span>[<span class="ruby-identifier">name</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">framework_gem?</span>
106:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">loaded_specs</span>[<span class="ruby-identifier">name</span>] <span class="ruby-keyword kw">then</span>
107:           <span class="ruby-comment cmt"># This gem is already loaded.  If the currently loaded gem is not in the</span>
108:           <span class="ruby-comment cmt"># list of candidate gems, then we have a version conflict.</span>
109:           <span class="ruby-identifier">existing_spec</span> = <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">loaded_specs</span>[<span class="ruby-identifier">name</span>]
110:           <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">matches</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">spec</span><span class="ruby-operator">|</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">version</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">existing_spec</span>.<span class="ruby-identifier">version</span> } <span class="ruby-keyword kw">then</span>
111:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Exception</span>,
112:                   <span class="ruby-node">&quot;can't activate #{@dep}, already activated #{existing_spec.full_name}&quot;</span>
113:           <span class="ruby-keyword kw">end</span>
114:           <span class="ruby-comment cmt"># we're stuck with it, so change to match</span>
115:           <span class="ruby-identifier">version_requirements</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Requirement</span>.<span class="ruby-identifier">create</span>(<span class="ruby-node">&quot;=#{existing_spec.version}&quot;</span>)
116:           <span class="ruby-identifier">existing_spec</span>
117:         <span class="ruby-keyword kw">else</span>
118:           <span class="ruby-comment cmt"># new load</span>
119:           <span class="ruby-identifier">matches</span>.<span class="ruby-identifier">last</span>
120:         <span class="ruby-keyword kw">end</span>
121:       <span class="ruby-keyword kw">end</span>
122:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M001229"></a><b>specification=</b>(s)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001229_source')" id="l_M001229_source">show source</a> ]</p>
  <div id="M001229_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/gem_dependency.rb, line 124</span>
124:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">specification=</span>(<span class="ruby-identifier">s</span>)
125:       <span class="ruby-ivar">@spec</span> = <span class="ruby-identifier">s</span>
126:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M001242"></a><b>unpack</b>(options={})
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001242_source')" id="l_M001242_source">show source</a> ]</p>
  <div id="M001242_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/gem_dependency.rb, line 250</span>
250:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">unpack</span>(<span class="ruby-identifier">options</span>={})
251:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">frozen?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">framework_gem?</span>
252:         <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span> <span class="ruby-identifier">unpack_base</span>
253:         <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span> <span class="ruby-identifier">unpack_base</span> <span class="ruby-keyword kw">do</span>
254:           <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">GemRunner</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">run</span>(<span class="ruby-identifier">unpack_command</span>)
255:         <span class="ruby-keyword kw">end</span>
256:         <span class="ruby-comment cmt"># Gem.activate changes the spec - get the original</span>
257:         <span class="ruby-identifier">real_spec</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Specification</span>.<span class="ruby-identifier">load</span>(<span class="ruby-identifier">specification</span>.<span class="ruby-identifier">loaded_from</span>)
258:         <span class="ruby-identifier">write_specification</span>(<span class="ruby-identifier">real_spec</span>)
259:       <span class="ruby-keyword kw">end</span>
260:       <span class="ruby-identifier">dependencies</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">dep</span><span class="ruby-operator">|</span> <span class="ruby-identifier">dep</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-identifier">options</span>) } <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:recursive</span>]
261:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M001237"></a><b>vendor_gem?</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001237_source')" id="l_M001237_source">show source</a> ]</p>
  <div id="M001237_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/gem_dependency.rb, line 187</span>
187:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">vendor_gem?</span>
188:       <span class="ruby-identifier">specification</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">unpacked_gem_directory</span>)
189:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M001236"></a><b>vendor_rails?</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001236_source')" id="l_M001236_source">show source</a> ]</p>
  <div id="M001236_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/gem_dependency.rb, line 183</span>
183:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">vendor_rails?</span>
184:       <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">loaded_specs</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">name</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">loaded_specs</span>[<span class="ruby-identifier">name</span>].<span class="ruby-identifier">loaded_from</span>.<span class="ruby-identifier">empty?</span>
185:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M001243"></a><b>write_specification</b>(spec)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001243_source')" id="l_M001243_source">show source</a> ]</p>
  <div id="M001243_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/gem_dependency.rb, line 263</span>
263:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">write_specification</span>(<span class="ruby-identifier">spec</span>)
264:       <span class="ruby-comment cmt"># copy the gem's specification into GEMDIR/.specification so that</span>
265:       <span class="ruby-comment cmt"># we can access information about the gem on deployment systems</span>
266:       <span class="ruby-comment cmt"># without having the gem installed</span>
267:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">unpacked_specification_filename</span>, <span class="ruby-value str">'w'</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
268:         <span class="ruby-identifier">file</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">to_yaml</span>
269:       <span class="ruby-keyword kw">end</span>
270:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>

    </body>
</html>