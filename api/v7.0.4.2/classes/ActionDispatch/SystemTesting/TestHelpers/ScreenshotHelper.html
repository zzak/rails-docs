<!DOCTYPE html>
<html lang="en">
<head>
    <title>ActionDispatch::SystemTesting::TestHelpers::ScreenshotHelper</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="../../../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../../css/panel.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../../css/github.css" type="text/css" media="screen" />
<script src="../../../../js/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../../js/turbolinks.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../../js/search_index.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../../js/searcher.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../../panel/tree.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../../js/searchdoc.js" type="text/javascript" charset="utf-8"></script>
<meta name="data-rel-prefix" content="../../../../">
<meta name="data-tree-keys" content='["ActionDispatch", "SystemTesting", "TestHelpers", "ScreenshotHelper"]'>


    <meta property="og:title" value="ActionDispatch::SystemTesting::TestHelpers::ScreenshotHelper">

  
    
    <meta name="description" content="Screenshot helper for system testing.">
    <meta property="og:description" content="Screenshot helper for system testing.">
  

    <meta name="keywords" content="ActionDispatch::SystemTesting::TestHelpers::ScreenshotHelper class, take_screenshot, take_failed_screenshot">
</head>

<body>
    <a class="sr-only sr-only-focusable" href="#content" data-turbolinks="false">Skip to Content</a>
    <a class="sr-only sr-only-focusable" href="#search" data-turbolinks="false">Skip to Search</a>

    <input type="checkbox" id="hamburger" class="panel_checkbox">
<label class="panel_mobile_button" for="hamburger"><span></span> Menu</label>
<nav class="panel panel_tree" id="panel" data-turbolinks-permanent>
  <div class="header">
    <input type="text" placeholder="Search (/) for a class, method, ..." autosave="searchdoc" results="10" id="search" autocomplete="off" tabindex="-1" />
    <label class="panel_mobile_button_close" for="hamburger"><span></span> Close</label>
  </div>
  <div class="tree">
    <ul>
    </ul>
  </div>
  <div class="result">
    <ul>
    </ul>
  </div>
  <a href="links.html" id="links">index</a>
</nav>


    <div class="banner">
        
            <span>Ruby on Rails 7.0.4.2</span><br />
        
        <h2>
            <span class="type">Module</span>
            ActionDispatch::SystemTesting::TestHelpers::ScreenshotHelper
            
        </h2>
        <ul class="files">
            
            <li><a href="../../../../files/actionpack/lib/action_dispatch/system_testing/test_helpers/screenshot_helper_rb.html">actionpack/lib/action_dispatch/system_testing/test_helpers/screenshot_helper.rb</a></li>
            
        </ul>
    </div>

    <main id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>Screenshot helper for system testing.</p>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-take_failed_screenshot">take_failed_screenshot</a>,
              </li>
            
              
              <li>
                <a href="#method-i-take_screenshot">take_screenshot</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    


    <!-- Methods -->
    
    
      <h2 class="sectiontitle">Instance Public methods</h2>
      
        <div class="method">
          <h3 class="title method-title" id="method-i-take_failed_screenshot">
            
              <b>take_failed_screenshot</b>()
            
            <a href="../../../../classes/ActionDispatch/SystemTesting/TestHelpers/ScreenshotHelper.html#method-i-take_failed_screenshot" name="method-i-take_failed_screenshot" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Takes a screenshot of the current page in the browser if the test failed.</p>

<p><code>take_failed_screenshot</code> is called during system test teardown.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-take_failed_screenshot_source')" id="l_method-i-take_failed_screenshot_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/actionpack/lib/action_dispatch/system_testing/test_helpers/screenshot_helper.rb#L44" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-take_failed_screenshot_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_dispatch/system_testing/test_helpers/screenshot_helper.rb, line 44</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">take_failed_screenshot</span>
  <span class="ruby-identifier">take_screenshot</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">failed?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">supports_screenshot?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">Capybara</span><span class="ruby-operator">::</span><span class="ruby-constant">Session</span>.<span class="ruby-identifier">instance_created?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-take_screenshot">
            
              <b>take_screenshot</b>()
            
            <a href="../../../../classes/ActionDispatch/SystemTesting/TestHelpers/ScreenshotHelper.html#method-i-take_screenshot" name="method-i-take_screenshot" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Takes a screenshot of the current page in the browser.</p>

<p><code>take_screenshot</code> can be used at any point in your system tests to take a screenshot of the current state. This can be useful for debugging or automating visual testing. You can take multiple screenshots per test to investigate changes at different points during your test. These will be named with a sequential prefix (or &#39;failed&#39; for failing tests)</p>

<p>The screenshot will be displayed in your console, if supported.</p>

<p>The default screenshots directory is <code>tmp/screenshots</code> but you can set a different one with <code>Capybara.save_path</code></p>

<p>You can set the <code>RAILS_SYSTEM_TESTING_SCREENSHOT_HTML</code> environment variable to save the HTML from the page that is being screenshotted so you can investigate the elements on the page at the time of the screenshot</p>

<p>You can set the <code>RAILS_SYSTEM_TESTING_SCREENSHOT</code> environment variable to control the output. Possible values are:</p>
<ul><li><dl class="rdoc-list label-list"><dt><code>simple</code> (default)
<dd>
<p>Only displays the screenshot path. This is the default value.</p>
</dd></dl>
</li><li><dl class="rdoc-list label-list"><dt><code>inline</code>
<dd>
<p>Display the screenshot in the terminal using the iTerm image protocol (<a href="https://iterm2.com/documentation-images.html">iterm2.com/documentation-images.html</a>).</p>
</dd></dl>
</li><li><dl class="rdoc-list label-list"><dt><code>artifact</code>
<dd>
<p>Display the screenshot in the terminal, using the terminal artifact format (<a href="https://buildkite.github.io/terminal-to-html/inline-images">buildkite.github.io/terminal-to-html/inline-images</a>/).</p>
</dd></dl>
</li></ul>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-take_screenshot_source')" id="l_method-i-take_screenshot_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/actionpack/lib/action_dispatch/system_testing/test_helpers/screenshot_helper.rb#L33" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-take_screenshot_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_dispatch/system_testing/test_helpers/screenshot_helper.rb, line 33</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">take_screenshot</span>
  <span class="ruby-identifier">increment_unique</span>
  <span class="ruby-identifier">save_html</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">save_html?</span>
  <span class="ruby-identifier">save_image</span>
  <span class="ruby-identifier">puts</span> <span class="ruby-identifier">display_image</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
      
    
  
</div>

    </main>
  </body>
</html>
