<!DOCTYPE html>
<html lang="en">
<head>
    <title>ActiveRecord::Core</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/panel.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/github.css" type="text/css" media="screen" />
<script src="../../js/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/turbolinks.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/search_index.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/searcher.js" type="text/javascript" charset="utf-8"></script>
<script src="../../panel/tree.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/searchdoc.js" type="text/javascript" charset="utf-8"></script>
<meta name="data-rel-prefix" content="../../">
<meta name="data-tree-keys" content='["ActiveRecord", "Core"]'>


    <meta property="og:title" value="ActiveRecord::Core">

  

    <meta name="keywords" content="ActiveRecord::Core class, configurations=, configurations, connection_handler, connection_handler=, connection_handlers, connection_handlers=, current_role, current_shard, current_preventing_writes, new, init_with, clone, dup, encode_with, ==, eql?, hash, freeze, frozen?, <=>, readonly?, strict_loading?, strict_loading!, strict_loading_n_plus_one_only?, readonly!, connection_handler, inspect, pretty_print, slice, values_at">
</head>

<body>
    <a class="sr-only sr-only-focusable" href="#content" data-turbolinks="false">Skip to Content</a>
    <a class="sr-only sr-only-focusable" href="#search" data-turbolinks="false">Skip to Search</a>

    <input type="checkbox" id="hamburger" class="panel_checkbox">
<label class="panel_mobile_button" for="hamburger"><span></span> Menu</label>
<nav class="panel panel_tree" id="panel" data-turbolinks-permanent>
  <div class="header">
    <input type="text" placeholder="Search (/) for a class, method, ..." autosave="searchdoc" results="10" id="search" autocomplete="off" tabindex="-1" />
    <label class="panel_mobile_button_close" for="hamburger"><span></span> Close</label>
  </div>
  <div class="tree">
    <ul>
    </ul>
  </div>
  <div class="result">
    <ul>
    </ul>
  </div>
  <a href="links.html" id="links">index</a>
</nav>


    <div class="banner">
        
            <span>Ruby on Rails 7.0.4.2</span><br />
        
        <h2>
            <span class="type">Module</span>
            ActiveRecord::Core
            
        </h2>
        <ul class="files">
            
            <li><a href="../../files/activerecord/lib/active_record/core_rb.html">activerecord/lib/active_record/core.rb</a></li>
            
        </ul>
    </div>

    <main id="bodyContent">
        <div id="content">
  


  


  
  


  
    <!-- Namespace -->
    <div class="sectiontitle">Namespace</div>
    <ul>
      
        <li>
          <span class="type">MODULE</span>
          <a href="Core/ClassMethods.html">ActiveRecord::Core::ClassMethods</a>
        </li>
      
        <li>
          <span class="type">CLASS</span>
          <a href="Core/InspectionMask.html">ActiveRecord::Core::InspectionMask</a>
        </li>
      
    </ul>
  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>#</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-3C-3D-3E">&lt;=&gt;</a>,
              </li>
            
              
              <li>
                <a href="#method-i-3D-3D">==</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>C</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-clone">clone</a>,
              </li>
            
              
              <li>
                <a href="#method-c-configurations">configurations</a>,
              </li>
            
              
              <li>
                <a href="#method-c-configurations-3D">configurations=</a>,
              </li>
            
              
              <li>
                <a href="#method-c-connection_handler">connection_handler</a>,
              </li>
            
              
              <li>
                <a href="#method-i-connection_handler">connection_handler</a>,
              </li>
            
              
              <li>
                <a href="#method-c-connection_handler-3D">connection_handler=</a>,
              </li>
            
              
              <li>
                <a href="#method-c-connection_handlers">connection_handlers</a>,
              </li>
            
              
              <li>
                <a href="#method-c-connection_handlers-3D">connection_handlers=</a>,
              </li>
            
              
              <li>
                <a href="#method-c-current_preventing_writes">current_preventing_writes</a>,
              </li>
            
              
              <li>
                <a href="#method-c-current_role">current_role</a>,
              </li>
            
              
              <li>
                <a href="#method-c-current_shard">current_shard</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>D</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-dup">dup</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>E</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-encode_with">encode_with</a>,
              </li>
            
              
              <li>
                <a href="#method-i-eql-3F">eql?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>F</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-freeze">freeze</a>,
              </li>
            
              
              <li>
                <a href="#method-i-frozen-3F">frozen?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>H</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-hash">hash</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>I</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-init_with">init_with</a>,
              </li>
            
              
              <li>
                <a href="#method-i-inspect">inspect</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>N</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-new">new</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>P</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-pretty_print">pretty_print</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-readonly-21">readonly!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-readonly-3F">readonly?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-slice">slice</a>,
              </li>
            
              
              <li>
                <a href="#method-i-strict_loading-21">strict_loading!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-strict_loading-3F">strict_loading?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-strict_loading_n_plus_one_only-3F">strict_loading_n_plus_one_only?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>V</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-values_at">values_at</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    
      <!-- Section attributes -->
      <h2 class="sectiontitle">Attributes</h2>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>strict_loading_mode</td>
            <td class='attr-desc'></td>
          </tr>
        
      </table>
    


    <!-- Methods -->
    
      <h2 class="sectiontitle">Class Public methods</h2>
      
        <div class="method">
          <h3 class="title method-title" id="method-c-configurations">
            
              <b>configurations</b>()
            
            <a href="../../classes/ActiveRecord/Core.html#method-c-configurations" name="method-c-configurations" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns fully resolved <a href="DatabaseConfigurations.html"><code>ActiveRecord::DatabaseConfigurations</code></a> object</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-c-configurations_source')" id="l_method-c-configurations_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activerecord/lib/active_record/core.rb#L56" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-configurations_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 56</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">configurations</span>
  <span class="ruby-identifier">@@configurations</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-configurations-3D">
            
              <b>configurations=</b>(config)
            
            <a href="../../classes/ActiveRecord/Core.html#method-c-configurations-3D" name="method-c-configurations-3D" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Contains the database configuration - as is typically stored in config/database.yml - as an <a href="DatabaseConfigurations.html"><code>ActiveRecord::DatabaseConfigurations</code></a> object.</p>

<p>For example, the following database.yml…</p>

<pre><code>development:
  adapter: sqlite3
  database: db/development.sqlite3

production:
  adapter: sqlite3
  database: db/production.sqlite3
</code></pre>

<p>…would result in <a href="Core.html#method-c-configurations"><code>ActiveRecord::Base.configurations</code></a> to look like this:</p>

<pre><code>#&lt;ActiveRecord::DatabaseConfigurations:0x00007fd1acbdf800 @configurations=[
  #&lt;ActiveRecord::DatabaseConfigurations::HashConfig:0x00007fd1acbded10 @env_name=&quot;development&quot;,
    @name=&quot;primary&quot;, @config={adapter: &quot;sqlite3&quot;, database: &quot;db/development.sqlite3&quot;}&gt;,
  #&lt;ActiveRecord::DatabaseConfigurations::HashConfig:0x00007fd1acbdea90 @env_name=&quot;production&quot;,
    @name=&quot;primary&quot;, @config={adapter: &quot;sqlite3&quot;, database: &quot;db/production.sqlite3&quot;}&gt;
]&gt;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-c-configurations-3D_source')" id="l_method-c-configurations-3D_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activerecord/lib/active_record/core.rb#L50" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-configurations-3D_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 50</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">configurations=</span>(<span class="ruby-identifier">config</span>)
  <span class="ruby-identifier">@@configurations</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">DatabaseConfigurations</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">config</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-connection_handler">
            
              <b>connection_handler</b>()
            
            <a href="../../classes/ActiveRecord/Core.html#method-c-connection_handler" name="method-c-connection_handler" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-c-connection_handler_source')" id="l_method-c-connection_handler_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activerecord/lib/active_record/core.rb#L94" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-connection_handler_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 94</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">connection_handler</span>
  <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">IsolatedExecutionState</span>[<span class="ruby-value">:active_record_connection_handler</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">default_connection_handler</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-connection_handler-3D">
            
              <b>connection_handler=</b>(handler)
            
            <a href="../../classes/ActiveRecord/Core.html#method-c-connection_handler-3D" name="method-c-connection_handler-3D" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-c-connection_handler-3D_source')" id="l_method-c-connection_handler-3D_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activerecord/lib/active_record/core.rb#L98" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-connection_handler-3D_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 98</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">connection_handler=</span>(<span class="ruby-identifier">handler</span>)
  <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">IsolatedExecutionState</span>[<span class="ruby-value">:active_record_connection_handler</span>] = <span class="ruby-identifier">handler</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-connection_handlers">
            
              <b>connection_handlers</b>()
            
            <a href="../../classes/ActiveRecord/Core.html#method-c-connection_handlers" name="method-c-connection_handlers" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-c-connection_handlers_source')" id="l_method-c-connection_handlers_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activerecord/lib/active_record/core.rb#L102" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-connection_handlers_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 102</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">connection_handlers</span>
  <span class="ruby-keyword">if</span> <span class="ruby-constant">ActiveRecord</span>.<span class="ruby-identifier">legacy_connection_handling</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&quot;The new connection handling does not support accessing multiple connection handlers.&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">@@connection_handlers</span> <span class="ruby-operator">||=</span> {}
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-connection_handlers-3D">
            
              <b>connection_handlers=</b>(handlers)
            
            <a href="../../classes/ActiveRecord/Core.html#method-c-connection_handlers-3D" name="method-c-connection_handlers-3D" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-c-connection_handlers-3D_source')" id="l_method-c-connection_handlers-3D_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activerecord/lib/active_record/core.rb#L111" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-connection_handlers-3D_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 111</span>
      <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">connection_handlers=</span>(<span class="ruby-identifier">handlers</span>)
        <span class="ruby-keyword">if</span> <span class="ruby-constant">ActiveRecord</span>.<span class="ruby-identifier">legacy_connection_handling</span>
          <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Deprecation</span>.<span class="ruby-identifier">warn</span>(<span class="ruby-identifier">&lt;&lt;~MSG</span>)
<span class="ruby-value">            Using legacy connection handling is deprecated. Please set
            `legacy_connection_handling` to `false` in your application.

            The new connection handling does not support `connection_handlers`
            getter and setter.

            Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
</span><span class="ruby-identifier">          MSG</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&quot;The new connection handling does not support multiple connection handlers.&quot;</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">@@connection_handlers</span> = <span class="ruby-identifier">handlers</span>
      <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-current_preventing_writes">
            
              <b>current_preventing_writes</b>()
            
            <a href="../../classes/ActiveRecord/Core.html#method-c-current_preventing_writes" name="method-c-current_preventing_writes" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the symbol representing the current setting for preventing writes.</p>

<pre><code>ActiveRecord::Base.connected_to(role: :reading) do
  ActiveRecord::Base.current_preventing_writes #=&gt; true
end

ActiveRecord::Base.connected_to(role: :writing) do
  ActiveRecord::Base.current_preventing_writes #=&gt; false
end
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-c-current_preventing_writes_source')" id="l_method-c-current_preventing_writes_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activerecord/lib/active_record/core.rb#L188" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-current_preventing_writes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 188</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">current_preventing_writes</span>
  <span class="ruby-keyword">if</span> <span class="ruby-constant">ActiveRecord</span>.<span class="ruby-identifier">legacy_connection_handling</span>
    <span class="ruby-identifier">connection_handler</span>.<span class="ruby-identifier">prevent_writes</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">connected_to_stack</span>.<span class="ruby-identifier">reverse_each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">hash</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:prevent_writes</span>] <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hash</span>[<span class="ruby-value">:prevent_writes</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:klasses</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-constant">Base</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:prevent_writes</span>] <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hash</span>[<span class="ruby-value">:prevent_writes</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:klasses</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">connection_class_for_self</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-current_role">
            
              <b>current_role</b>()
            
            <a href="../../classes/ActiveRecord/Core.html#method-c-current_role" name="method-c-current_role" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the symbol representing the current connected role.</p>

<pre><code>ActiveRecord::Base.connected_to(role: :writing) do
  ActiveRecord::Base.current_role #=&gt; :writing
end

ActiveRecord::Base.connected_to(role: :reading) do
  ActiveRecord::Base.current_role #=&gt; :reading
end
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-c-current_role_source')" id="l_method-c-current_role_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activerecord/lib/active_record/core.rb#L147" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-current_role_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 147</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">current_role</span>
  <span class="ruby-keyword">if</span> <span class="ruby-constant">ActiveRecord</span>.<span class="ruby-identifier">legacy_connection_handling</span>
    <span class="ruby-identifier">connection_handlers</span>.<span class="ruby-identifier">key</span>(<span class="ruby-identifier">connection_handler</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">default_role</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">connected_to_stack</span>.<span class="ruby-identifier">reverse_each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">hash</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:role</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:role</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:klasses</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-constant">Base</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:role</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:role</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:klasses</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">connection_class_for_self</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">default_role</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-current_shard">
            
              <b>current_shard</b>()
            
            <a href="../../classes/ActiveRecord/Core.html#method-c-current_shard" name="method-c-current_shard" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the symbol representing the current connected shard.</p>

<pre><code>ActiveRecord::Base.connected_to(role: :reading) do
  ActiveRecord::Base.current_shard #=&gt; :default
end

ActiveRecord::Base.connected_to(role: :writing, shard: :one) do
  ActiveRecord::Base.current_shard #=&gt; :one
end
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-c-current_shard_source')" id="l_method-c-current_shard_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activerecord/lib/active_record/core.rb#L169" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-current_shard_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 169</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">current_shard</span>
  <span class="ruby-identifier">connected_to_stack</span>.<span class="ruby-identifier">reverse_each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">hash</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:shard</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:shard</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:klasses</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-constant">Base</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:shard</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:shard</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:klasses</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">connection_class_for_self</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">default_shard</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-new">
            
              <b>new</b>(attributes = nil)
            
            <a href="../../classes/ActiveRecord/Core.html#method-c-new" name="method-c-new" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>New objects can be instantiated as either empty (pass no construction parameter) or pre-set with attributes but not yet saved (pass a hash with key names matching the associated table column names). In both instances, valid attribute keys are determined by the column names of the associated table – hence you can&#39;t have attributes that aren&#39;t part of the table columns.</p>

<h4 id="method-c-new-label-Example-3A">Example:</h4>

<pre><code># Instantiates a single new object
User.new(first_name: &#39;Jamie&#39;)
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-c-new_source')" id="l_method-c-new_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activerecord/lib/active_record/core.rb#L461" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-new_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 461</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span>(<span class="ruby-identifier">attributes</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-ivar">@new_record</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-ivar">@attributes</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">_default_attributes</span>.<span class="ruby-identifier">deep_dup</span>

  <span class="ruby-identifier">init_internals</span>
  <span class="ruby-identifier">initialize_internals_callback</span>

  <span class="ruby-identifier">assign_attributes</span>(<span class="ruby-identifier">attributes</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">attributes</span>

  <span class="ruby-keyword">yield</span> <span class="ruby-keyword">self</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
  <span class="ruby-identifier">_run_initialize_callbacks</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
      
    
      <h2 class="sectiontitle">Instance Public methods</h2>
      
        <div class="method">
          <h3 class="title method-title" id="method-i-3C-3D-3E">
            
              <b>&lt;=&gt;</b>(other_object)
            
            <a href="../../classes/ActiveRecord/Core.html#method-i-3C-3D-3E" name="method-i-3C-3D-3E" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Allows sort on objects</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-3C-3D-3E_source')" id="l_method-i-3C-3D-3E_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activerecord/lib/active_record/core.rb#L614" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-3C-3D-3E_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 614</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">&lt;=&gt;</span>(<span class="ruby-identifier">other_object</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">other_object</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>)
    <span class="ruby-identifier">to_key</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">other_object</span>.<span class="ruby-identifier">to_key</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">super</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-3D-3D">
            
              <b>==</b>(comparison_object)
            
            <a href="../../classes/ActiveRecord/Core.html#method-i-3D-3D" name="method-i-3D-3D" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns true if <code>comparison_object</code> is the same exact object, or <code>comparison_object</code> is of the same type and <code>self</code> has an ID and it is equal to <code>comparison_object.id</code>.</p>

<p>Note that new records are different from any other record by definition, unless the other record is the receiver itself. Besides, if you fetch existing records with <code>select</code> and leave the ID out, you&#39;re on your own, this predicate will return false.</p>

<p>Note also that destroying a record preserves its ID in the model instance, so deleted models are still comparable.</p>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="Core.html#method-i-eql-3F">eql?</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-3D-3D_source')" id="l_method-i-3D-3D_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activerecord/lib/active_record/core.rb#L580" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-3D-3D_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 580</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">==</span>(<span class="ruby-identifier">comparison_object</span>)
  <span class="ruby-keyword">super</span> <span class="ruby-operator">||</span>
    <span class="ruby-identifier">comparison_object</span>.<span class="ruby-identifier">instance_of?</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>) <span class="ruby-operator">&amp;&amp;</span>
    <span class="ruby-operator">!</span><span class="ruby-identifier">id</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span>
    <span class="ruby-identifier">comparison_object</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">id</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-clone">
            
              <b>clone</b>
            
            <a href="../../classes/ActiveRecord/Core.html#method-i-clone" name="method-i-clone" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Identical to Ruby&#39;s clone method.  This is a “shallow” copy.  Be warned that your attributes are not copied. That means that modifying attributes of the clone will modify the original, since they will both point to the same attributes hash. If you need a copy of your attributes hash, please use the <a href="Core.html#method-i-dup"><code>dup</code></a> method.</p>

<pre><code>user = User.first
new_user = user.clone
user.name               # =&gt; &quot;Bob&quot;
new_user.name = &quot;Joe&quot;
user.name               # =&gt; &quot;Joe&quot;

user.object_id == new_user.object_id            # =&gt; false
user.name.object_id == new_user.name.object_id  # =&gt; true

user.name.object_id == user.dup.name.object_id  # =&gt; false
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                

                

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activerecord/lib/active_record/core.rb#L513" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-clone_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 513</span>
    </pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-connection_handler">
            
              <b>connection_handler</b>()
            
            <a href="../../classes/ActiveRecord/Core.html#method-i-connection_handler" name="method-i-connection_handler" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-connection_handler_source')" id="l_method-i-connection_handler_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activerecord/lib/active_record/core.rb#L682" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-connection_handler_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 682</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">connection_handler</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">connection_handler</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-dup">
            
              <b>dup</b>
            
            <a href="../../classes/ActiveRecord/Core.html#method-i-dup" name="method-i-dup" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Duped objects have no id assigned and are treated as new records. Note that this is a “shallow” copy as it copies the object&#39;s attributes only, not its associations. The extent of a “deep” copy is application specific and is therefore left to the application to implement according to its need. The dup method does not preserve the timestamps (created|updated)_(at|on).</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                

                

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activerecord/lib/active_record/core.rb#L530" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-dup_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 530</span>
    </pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-encode_with">
            
              <b>encode_with</b>(coder)
            
            <a href="../../classes/ActiveRecord/Core.html#method-i-encode_with" name="method-i-encode_with" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Populate <code>coder</code> with attributes about this record that should be serialized. The structure of <code>coder</code> defined in this method is guaranteed to match the structure of <code>coder</code> passed to the <a href="Core.html#method-i-init_with"><code>init_with</code></a> method.</p>

<p>Example:</p>

<pre><code>class Post &lt; ActiveRecord::Base
end
coder = {}
Post.new.encode_with(coder)
coder # =&gt; {&quot;attributes&quot; =&gt; {&quot;id&quot; =&gt; nil, ... }}
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-encode_with_source')" id="l_method-i-encode_with_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activerecord/lib/active_record/core.rb#L565" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-encode_with_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 565</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">encode_with</span>(<span class="ruby-identifier">coder</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">yaml_encoder</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-ivar">@attributes</span>, <span class="ruby-identifier">coder</span>)
  <span class="ruby-identifier">coder</span>[<span class="ruby-string">&quot;new_record&quot;</span>] = <span class="ruby-identifier">new_record?</span>
  <span class="ruby-identifier">coder</span>[<span class="ruby-string">&quot;active_record_yaml_version&quot;</span>] = <span class="ruby-value">2</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-eql-3F">
            
              <b>eql?</b>(comparison_object)
            
            <a href="../../classes/ActiveRecord/Core.html#method-i-eql-3F" name="method-i-eql-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="Core.html#method-i-3D-3D">==</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-freeze">
            
              <b>freeze</b>()
            
            <a href="../../classes/ActiveRecord/Core.html#method-i-freeze" name="method-i-freeze" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Clone and freeze the attributes hash such that associations are still accessible, even on destroyed records, but cloned models will not be frozen.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-freeze_source')" id="l_method-i-freeze_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activerecord/lib/active_record/core.rb#L603" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-freeze_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 603</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">freeze</span>
  <span class="ruby-ivar">@attributes</span> = <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">freeze</span>
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-frozen-3F">
            
              <b>frozen?</b>()
            
            <a href="../../classes/ActiveRecord/Core.html#method-i-frozen-3F" name="method-i-frozen-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if the attributes hash has been frozen.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-frozen-3F_source')" id="l_method-i-frozen-3F_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activerecord/lib/active_record/core.rb#L609" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-frozen-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 609</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">frozen?</span>
  <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">frozen?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-hash">
            
              <b>hash</b>()
            
            <a href="../../classes/ActiveRecord/Core.html#method-i-hash" name="method-i-hash" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Delegates to id in order to allow two records of the same type and id to work with something like:</p>

<pre><code>[ Person.find(1), Person.find(2), Person.find(3) ] &amp; [ Person.find(1), Person.find(4) ] # =&gt; [ Person.find(1) ]
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-hash_source')" id="l_method-i-hash_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activerecord/lib/active_record/core.rb#L590" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-hash_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 590</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">hash</span>
  <span class="ruby-identifier">id</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">id</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">id</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">hash</span> <span class="ruby-operator">^</span> <span class="ruby-identifier">id</span>.<span class="ruby-identifier">hash</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">super</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-init_with">
            
              <b>init_with</b>(coder, &amp;block)
            
            <a href="../../classes/ActiveRecord/Core.html#method-i-init_with" name="method-i-init_with" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Initialize an empty model object from <code>coder</code>. <code>coder</code> should be the result of previously encoding an Active Record model, using <a href="Core.html#method-i-encode_with"><code>encode_with</code></a>.</p>

<pre><code>class Post &lt; ActiveRecord::Base
end

old_post = Post.new(title: &quot;hello world&quot;)
coder = {}
old_post.encode_with(coder)

post = Post.allocate
post.init_with(coder)
post.title # =&gt; &#39;hello world&#39;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-init_with_source')" id="l_method-i-init_with_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activerecord/lib/active_record/core.rb#L488" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-init_with_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 488</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">init_with</span>(<span class="ruby-identifier">coder</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">coder</span> = <span class="ruby-constant">LegacyYamlAdapter</span>.<span class="ruby-identifier">convert</span>(<span class="ruby-identifier">coder</span>)
  <span class="ruby-identifier">attributes</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">yaml_encoder</span>.<span class="ruby-identifier">decode</span>(<span class="ruby-identifier">coder</span>)
  <span class="ruby-identifier">init_with_attributes</span>(<span class="ruby-identifier">attributes</span>, <span class="ruby-identifier">coder</span>[<span class="ruby-string">&quot;new_record&quot;</span>], <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-inspect">
            
              <b>inspect</b>()
            
            <a href="../../classes/ActiveRecord/Core.html#method-i-inspect" name="method-i-inspect" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the contents of the record as a nicely formatted string.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-inspect_source')" id="l_method-i-inspect_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activerecord/lib/active_record/core.rb#L687" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-inspect_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 687</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">inspect</span>
  <span class="ruby-comment"># We check defined?(@attributes) not to issue warnings if the object is</span>
  <span class="ruby-comment"># allocated but not initialized.</span>
  <span class="ruby-identifier">inspection</span> = <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@attributes</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@attributes</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">attribute_names</span>.<span class="ruby-identifier">filter_map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">_has_attribute?</span>(<span class="ruby-identifier">name</span>)
        <span class="ruby-node">&quot;#{name}: #{attribute_for_inspect(name)}&quot;</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;, &quot;</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-string">&quot;not initialized&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-node">&quot;#&lt;#{self.class} #{inspection}&gt;&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-pretty_print">
            
              <b>pretty_print</b>(pp)
            
            <a href="../../classes/ActiveRecord/Core.html#method-i-pretty_print" name="method-i-pretty_print" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Takes a PP and prettily prints this record to it, allowing you to get a nice result from <code>pp record</code> when pp is required.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-pretty_print_source')" id="l_method-i-pretty_print_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activerecord/lib/active_record/core.rb#L705" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-pretty_print_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 705</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">pretty_print</span>(<span class="ruby-identifier">pp</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">super</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">custom_inspect_method_defined?</span>
  <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">object_address_group</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@attributes</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@attributes</span>
      <span class="ruby-identifier">attr_names</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">attribute_names</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span> <span class="ruby-identifier">_has_attribute?</span>(<span class="ruby-identifier">name</span>) }
      <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">seplist</span>(<span class="ruby-identifier">attr_names</span>, <span class="ruby-identifier">proc</span> { <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">text</span> <span class="ruby-string">&quot;,&quot;</span> }) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attr_name</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">breakable</span> <span class="ruby-string">&quot; &quot;</span>
        <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">group</span>(<span class="ruby-value">1</span>) <span class="ruby-keyword">do</span>
          <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">text</span> <span class="ruby-identifier">attr_name</span>
          <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">text</span> <span class="ruby-string">&quot;:&quot;</span>
          <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">breakable</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">_read_attribute</span>(<span class="ruby-identifier">attr_name</span>)
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">inspection_filter</span>.<span class="ruby-identifier">filter_param</span>(<span class="ruby-identifier">attr_name</span>, <span class="ruby-identifier">value</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">nil?</span>
          <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">pp</span> <span class="ruby-identifier">value</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">breakable</span> <span class="ruby-string">&quot; &quot;</span>
      <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">text</span> <span class="ruby-string">&quot;not initialized&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-readonly-21">
            
              <b>readonly!</b>()
            
            <a href="../../classes/ActiveRecord/Core.html#method-i-readonly-21" name="method-i-readonly-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Marks this record as read only.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-readonly-21_source')" id="l_method-i-readonly-21_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activerecord/lib/active_record/core.rb#L678" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-readonly-21_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 678</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">readonly!</span>
  <span class="ruby-ivar">@readonly</span> = <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-readonly-3F">
            
              <b>readonly?</b>()
            
            <a href="../../classes/ActiveRecord/Core.html#method-i-readonly-3F" name="method-i-readonly-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if the record is read only.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-readonly-3F_source')" id="l_method-i-readonly-3F_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activerecord/lib/active_record/core.rb#L631" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-readonly-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 631</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">readonly?</span>
  <span class="ruby-ivar">@readonly</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-slice">
            
              <b>slice</b>(*methods)
            
            <a href="../../classes/ActiveRecord/Core.html#method-i-slice" name="method-i-slice" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a hash of the given methods with their names as keys and returned values as values.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-slice_source')" id="l_method-i-slice_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activerecord/lib/active_record/core.rb#L729" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-slice_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 729</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">slice</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">methods</span>)
  <span class="ruby-identifier">methods</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">index_with</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">method</span><span class="ruby-operator">|</span> <span class="ruby-identifier">public_send</span>(<span class="ruby-identifier">method</span>) }.<span class="ruby-identifier">with_indifferent_access</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-strict_loading-21">
            
              <b>strict_loading!</b>(value = true, mode: :all)
            
            <a href="../../classes/ActiveRecord/Core.html#method-i-strict_loading-21" name="method-i-strict_loading-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Sets the record to strict_loading mode. This will raise an error if the record tries to lazily load an association.</p>

<pre><code>user = User.first
user.strict_loading! # =&gt; true
user.comments
=&gt; ActiveRecord::StrictLoadingViolationError
</code></pre>

<h3 id="method-i-strict_loading-21-label-Parameters-3A">Parameters:</h3>
<ul><li>
<p>value - Boolean specifying whether to enable or disable strict loading.</p>
</li><li>
<p>mode - <a href="../Symbol.html"><code>Symbol</code></a> specifying strict loading mode. Defaults to :all. Using</p>

<pre><code>:n_plus_one_only mode will only raise an error if an association
that will lead to an n plus one query is lazily loaded.
</code></pre>
</li></ul>

<h3 id="method-i-strict_loading-21-label-Example-3A">Example:</h3>

<pre><code>user = User.first
user.strict_loading!(false) # =&gt; false
user.comments
=&gt; #&lt;ActiveRecord::Associations::CollectionProxy&gt;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-strict_loading-21_source')" id="l_method-i-strict_loading-21_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activerecord/lib/active_record/core.rb#L661" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-strict_loading-21_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 661</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">strict_loading!</span>(<span class="ruby-identifier">value</span> = <span class="ruby-keyword">true</span>, <span class="ruby-value">mode:</span> <span class="ruby-value">:all</span>)
  <span class="ruby-keyword">unless</span> [<span class="ruby-value">:all</span>, <span class="ruby-value">:n_plus_one_only</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">mode</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;The :mode option must be one of [:all, :n_plus_one_only].&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@strict_loading_mode</span> = <span class="ruby-identifier">mode</span>
  <span class="ruby-ivar">@strict_loading</span> = <span class="ruby-identifier">value</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-strict_loading-3F">
            
              <b>strict_loading?</b>()
            
            <a href="../../classes/ActiveRecord/Core.html#method-i-strict_loading-3F" name="method-i-strict_loading-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if the record is in strict_loading mode.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-strict_loading-3F_source')" id="l_method-i-strict_loading-3F_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activerecord/lib/active_record/core.rb#L636" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-strict_loading-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 636</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">strict_loading?</span>
  <span class="ruby-ivar">@strict_loading</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-strict_loading_n_plus_one_only-3F">
            
              <b>strict_loading_n_plus_one_only?</b>()
            
            <a href="../../classes/ActiveRecord/Core.html#method-i-strict_loading_n_plus_one_only-3F" name="method-i-strict_loading_n_plus_one_only-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if the record uses strict_loading with <code>:n_plus_one_only</code> mode enabled.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-strict_loading_n_plus_one_only-3F_source')" id="l_method-i-strict_loading_n_plus_one_only-3F_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activerecord/lib/active_record/core.rb#L673" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-strict_loading_n_plus_one_only-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 673</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">strict_loading_n_plus_one_only?</span>
  <span class="ruby-ivar">@strict_loading_mode</span> <span class="ruby-operator">==</span> <span class="ruby-value">:n_plus_one_only</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-values_at">
            
              <b>values_at</b>(*methods)
            
            <a href="../../classes/ActiveRecord/Core.html#method-i-values_at" name="method-i-values_at" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns an array of the values returned by the given methods.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-values_at_source')" id="l_method-i-values_at_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activerecord/lib/active_record/core.rb#L734" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-values_at_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 734</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">values_at</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">methods</span>)
  <span class="ruby-identifier">methods</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">map!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">method</span><span class="ruby-operator">|</span> <span class="ruby-identifier">public_send</span>(<span class="ruby-identifier">method</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
      
    
  
</div>

    </main>
  </body>
</html>
