<!DOCTYPE html>
<html lang="en">
<head>
    <title>ActiveSupport::Deprecation::Reporting</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="../../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../css/panel.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../css/github.css" type="text/css" media="screen" />
<script src="../../../js/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../js/turbolinks.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../js/search_index.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../js/searcher.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../panel/tree.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../js/searchdoc.js" type="text/javascript" charset="utf-8"></script>
<meta name="data-rel-prefix" content="../../../">
<meta name="data-tree-keys" content='["ActiveSupport", "Deprecation", "Reporting"]'>


    <meta property="og:title" value="ActiveSupport::Deprecation::Reporting">

  

    <meta name="keywords" content="ActiveSupport::Deprecation::Reporting class, warn, silence, allow, silenced, deprecation_warning">
</head>

<body>
    <a class="sr-only sr-only-focusable" href="#content" data-turbolinks="false">Skip to Content</a>
    <a class="sr-only sr-only-focusable" href="#search" data-turbolinks="false">Skip to Search</a>

    <input type="checkbox" id="hamburger" class="panel_checkbox">
<label class="panel_mobile_button" for="hamburger"><span></span> Menu</label>
<nav class="panel panel_tree" id="panel" data-turbolinks-permanent>
  <div class="header">
    <input type="text" placeholder="Search (/) for a class, method, ..." autosave="searchdoc" results="10" id="search" autocomplete="off" tabindex="-1" />
    <label class="panel_mobile_button_close" for="hamburger"><span></span> Close</label>
  </div>
  <div class="tree">
    <ul>
    </ul>
  </div>
  <div class="result">
    <ul>
    </ul>
  </div>
  <a href="links.html" id="links">index</a>
</nav>


    <div class="banner">
        
            <span>Ruby on Rails 7.0.4.2</span><br />
        
        <h2>
            <span class="type">Module</span>
            ActiveSupport::Deprecation::Reporting
            
        </h2>
        <ul class="files">
            
            <li><a href="../../../files/activesupport/lib/active_support/deprecation/reporting_rb.html">activesupport/lib/active_support/deprecation/reporting.rb</a></li>
            
        </ul>
    </div>

    <main id="bodyContent">
        <div id="content">
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>A</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-allow">allow</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>D</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-deprecation_warning">deprecation_warning</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-silence">silence</a>,
              </li>
            
              
              <li>
                <a href="#method-i-silenced">silenced</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>W</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-warn">warn</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    
      <!-- Section constants -->
      <h2 class="sectiontitle">Constants</h2>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">RAILS_GEM_ROOT</td>
            <td>=</td>
            <td class="attr-value">File.expand_path(&quot;../../../..&quot;, __dir__) + &quot;/&quot;</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
      </table>
    


    
      <!-- Section attributes -->
      <h2 class="sectiontitle">Attributes</h2>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>gem_name</td>
            <td class='attr-desc'><p>Name of gem where method is deprecated</p></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [W]
            </td>
            <td class='attr-name'>silenced</td>
            <td class='attr-desc'><p>Whether to print a message (silent mode)</p></td>
          </tr>
        
      </table>
    


    <!-- Methods -->
    
    
      <h2 class="sectiontitle">Instance Public methods</h2>
      
        <div class="method">
          <h3 class="title method-title" id="method-i-allow">
            
              <b>allow</b>(allowed_warnings = :all, if: true, &amp;block)
            
            <a href="../../../classes/ActiveSupport/Deprecation/Reporting.html#method-i-allow" name="method-i-allow" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Allow previously disallowed deprecation warnings within the block. <code>allowed_warnings</code> can be an array containing strings, symbols, or regular expressions. (Symbols are treated as strings). These are compared against the text of deprecation warning messages generated within the block. Matching warnings will be exempt from the rules set by <code>ActiveSupport::Deprecation.disallowed_warnings</code></p>

<p>The optional <code>if:</code> argument accepts a truthy/falsy value or an object that responds to <code>.call</code>. If truthy, then matching warnings will be allowed. If falsey then the method yields to the block without allowing the warning.</p>

<pre><code>ActiveSupport::Deprecation.disallowed_behavior = :raise
ActiveSupport::Deprecation.disallowed_warnings = [
  &quot;something broke&quot;
]

ActiveSupport::Deprecation.warn(&#39;something broke!&#39;)
# =&gt; ActiveSupport::DeprecationException

ActiveSupport::Deprecation.allow [&#39;something broke&#39;] do
  ActiveSupport::Deprecation.warn(&#39;something broke!&#39;)
end
# =&gt; nil

ActiveSupport::Deprecation.allow [&#39;something broke&#39;], if: Rails.env.production? do
  ActiveSupport::Deprecation.warn(&#39;something broke!&#39;)
end
# =&gt; ActiveSupport::DeprecationException for dev/test, nil for production
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-allow_source')" id="l_method-i-allow_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activesupport/lib/active_support/deprecation/reporting.rb#L72" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-allow_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/lib/active_support/deprecation/reporting.rb, line 72</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">allow</span>(<span class="ruby-identifier">allowed_warnings</span> = <span class="ruby-value">:all</span>, <span class="ruby-value">if:</span> <span class="ruby-keyword">true</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">conditional</span> = <span class="ruby-identifier">binding</span>.<span class="ruby-identifier">local_variable_get</span>(<span class="ruby-value">:if</span>)
  <span class="ruby-identifier">conditional</span> = <span class="ruby-identifier">conditional</span>.<span class="ruby-identifier">call</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">conditional</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:call</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">conditional</span>
    <span class="ruby-ivar">@explicitly_allowed_warnings</span>.<span class="ruby-identifier">bind</span>(<span class="ruby-identifier">allowed_warnings</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">yield</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-deprecation_warning">
            
              <b>deprecation_warning</b>(deprecated_method_name, message = nil, caller_backtrace = nil)
            
            <a href="../../../classes/ActiveSupport/Deprecation/Reporting.html#method-i-deprecation_warning" name="method-i-deprecation_warning" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-deprecation_warning_source')" id="l_method-i-deprecation_warning_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activesupport/lib/active_support/deprecation/reporting.rb#L86" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-deprecation_warning_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/lib/active_support/deprecation/reporting.rb, line 86</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">deprecation_warning</span>(<span class="ruby-identifier">deprecated_method_name</span>, <span class="ruby-identifier">message</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">caller_backtrace</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">caller_backtrace</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">caller_locations</span>(<span class="ruby-value">2</span>)
  <span class="ruby-identifier">deprecated_method_warning</span>(<span class="ruby-identifier">deprecated_method_name</span>, <span class="ruby-identifier">message</span>).<span class="ruby-identifier">tap</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">msg</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">warn</span>(<span class="ruby-identifier">msg</span>, <span class="ruby-identifier">caller_backtrace</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-silence">
            
              <b>silence</b>(&amp;block)
            
            <a href="../../../classes/ActiveSupport/Deprecation/Reporting.html#method-i-silence" name="method-i-silence" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Silence deprecation warnings within the block.</p>

<pre><code>ActiveSupport::Deprecation.warn(&#39;something broke!&#39;)
# =&gt; &quot;DEPRECATION WARNING: something broke! (called from your_code.rb:1)&quot;

ActiveSupport::Deprecation.silence do
  ActiveSupport::Deprecation.warn(&#39;something broke!&#39;)
end
# =&gt; nil
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-silence_source')" id="l_method-i-silence_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activesupport/lib/active_support/deprecation/reporting.rb#L40" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-silence_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/lib/active_support/deprecation/reporting.rb, line 40</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">silence</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-ivar">@silenced_thread</span>.<span class="ruby-identifier">bind</span>(<span class="ruby-keyword">true</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-silenced">
            
              <b>silenced</b>()
            
            <a href="../../../classes/ActiveSupport/Deprecation/Reporting.html#method-i-silenced" name="method-i-silenced" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-silenced_source')" id="l_method-i-silenced_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activesupport/lib/active_support/deprecation/reporting.rb#L82" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-silenced_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/lib/active_support/deprecation/reporting.rb, line 82</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">silenced</span>
  <span class="ruby-ivar">@silenced</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@silenced_thread</span>.<span class="ruby-identifier">value</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-warn">
            
              <b>warn</b>(message = nil, callstack = nil)
            
            <a href="../../../classes/ActiveSupport/Deprecation/Reporting.html#method-i-warn" name="method-i-warn" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Outputs a deprecation warning to the output configured by <code>ActiveSupport::Deprecation.behavior</code>.</p>

<pre><code>ActiveSupport::Deprecation.warn(&#39;something broke!&#39;)
# =&gt; &quot;DEPRECATION WARNING: something broke! (called from your_code.rb:1)&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-warn_source')" id="l_method-i-warn_source">show</a>
                

                 | 

                
                  <a href="https://github.com/rails/rails/blob/7c70791470fc517deb7c640bead9f1b47efb5539/activesupport/lib/active_support/deprecation/reporting.rb#L18" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-warn_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/lib/active_support/deprecation/reporting.rb, line 18</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">warn</span>(<span class="ruby-identifier">message</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">callstack</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">silenced</span>

  <span class="ruby-identifier">callstack</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">caller_locations</span>(<span class="ruby-value">2</span>)
  <span class="ruby-identifier">deprecation_message</span>(<span class="ruby-identifier">callstack</span>, <span class="ruby-identifier">message</span>).<span class="ruby-identifier">tap</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">deprecation_disallowed?</span>(<span class="ruby-identifier">message</span>)
      <span class="ruby-identifier">disallowed_behavior</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">b</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">m</span>, <span class="ruby-identifier">callstack</span>, <span class="ruby-identifier">deprecation_horizon</span>, <span class="ruby-identifier">gem_name</span>) }
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">behavior</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">b</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">m</span>, <span class="ruby-identifier">callstack</span>, <span class="ruby-identifier">deprecation_horizon</span>, <span class="ruby-identifier">gem_name</span>) }
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
      
    
  
</div>

    </main>
  </body>
</html>
